<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is Pengyin Shan's Note">
<meta name="viewport" content="width=device-width">
<title>Pengyin's Note (old posts, page 7) | Pengyin's Note</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="http://pengyin-shan.com/index-7.html">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]--><style>
    div.input_prompt {
      display: none;
    }
    </style>
</head>
<body>
    <section class="social"><ul>
<li><a href="index.html" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="archive.html" title="Archives"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="categories/index.html" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="rss.xml" title="RSS"><i class="icon-rss"></i></a></li>
            <li><a href="https://www.linkedin.com/in/pengyinshan" title="My LinkedIn"><i class="icon-linkedin"></i></a></li>
            <li><a href="https://github.com/shanpy" title="My Github"><i class="icon-github"></i></a></li>

        </ul></section><section class="page-content"><div class="content" rel="main">
        <div class="post">
            <h1 class="title"><a href="posts/2015/Algorithm%20Data%20Structure/algorithm-and-data-structure-basics-recursion.html">Algorithm and Data Structure Basics - Recursion</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-09-02T00:00:00-04:00">2015-09-02 00:00</time>
</div>
                <div class="stats">
                                <a href="posts/2015/Algorithm%20Data%20Structure/algorithm-and-data-structure-basics-recursion.html#disqus_thread" data-disqus-identifier="cache/posts/2015/Algorithm Data Structure/algorithm-and-data-structure-basics-recursion.html">Comments</a>


                </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/algorithm.html" rel="tag">Algorithm</a></li>
           <li><a class="tag p-category" href="categories/data-structure.html" rel="tag">Data Structure</a></li>
           <li><a class="tag p-category" href="categories/java.html" rel="tag">Java</a></li>
           <li><a class="tag p-category" href="categories/recursion.html" rel="tag">Recursion</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<h4>Reference List</h4>
<ul>
<li>
<p><a href="http://www.nowamagic.net/librarys/veda/detail/2314">Understand Recursion (Chinese)</a></p>
</li>
<li>
<p><a href="http://blog.csdn.net/wangjinyu501/article/details/8248492">Recursion (Chinese)</a></p>
</li>
</ul>
<h4>Common Model of Recursion</h4>
<pre class="code literal-block"><span></span><span class="n">Obj</span> <span class="nf">recursion</span><span class="o">(</span><span class="n">Obj</span> <span class="n">o</span><span class="o">){</span>
    <span class="k">if</span><span class="o">(</span><span class="n">baseCondition</span><span class="o">){</span>
        <span class="cm">/*</span>
<span class="cm">        You need to return here, so that recursion part can use the basic value which is returned back</span>
<span class="cm">        */</span>
        <span class="k">return</span> <span class="n">baseConditionResult</span><span class="o">;</span>
    <span class="o">}</span><span class="k">else</span><span class="o">{</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">some_expression</span><span class="o">;</span>
        <span class="n">recursion</span><span class="o">(</span><span class="n">o</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre>


<p><em>If there are other expression before or after recursion call, make sure you run it after each call back, because these expressions are part of method, and you want to call the full method for each recursion. Check "Hanoi" example below for detail.</em></p>
<h4>Problem in Recursion</h4>
<p>Since system using <strong>stack</strong> to save return values from each callback, it's really easy to get memory overflow problem.</p>
<h4>Hanoi</h4>
<h5>Rule</h5>
<ol>
<li>
<p>Move plate when number of plate is <code>1</code> (In code below, we want to printout basic value);</p>
</li>
<li>
<p>If number of plates on a tower is more than <code>1</code> (assume <code>n</code>), move first <code>n-1</code> plate, then move the bottom plate.</p>
</li>
</ol>
<h5>Code</h5>
<pre class="code literal-block"><span></span><span class="cm">/**</span>
<span class="cm">Result:</span>
<span class="cm">    Dist 1 from A  to C</span>
<span class="cm">    Dist 2 from A to B</span>
<span class="cm">    Dist 1 from C  to B</span>
<span class="cm">    Dist 3 from A to C</span>
<span class="cm">    Dist 1 from B  to A</span>
<span class="cm">    Dist 2 from B to C</span>
<span class="cm">    Dist 1 from A  to C</span>
<span class="cm">*/</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Hanoi</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">int</span> <span class="n">nDisks</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">doTowers</span><span class="o">(</span><span class="kt">int</span> <span class="n">topN</span><span class="o">,</span> <span class="kt">char</span> <span class="n">from</span><span class="o">,</span> <span class="kt">char</span> <span class="n">inter</span><span class="o">,</span> <span class="kt">char</span> <span class="n">to</span><span class="o">){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">topN</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Dist "</span> <span class="o">+</span> <span class="n">topN</span> <span class="o">+</span> <span class="s">" from "</span> <span class="o">+</span> <span class="n">from</span> <span class="o">+</span> <span class="s">" to "</span> <span class="o">+</span> <span class="n">to</span><span class="o">);</span>
        <span class="k">else</span><span class="o">{</span>
            <span class="c1">//Move top n-1 from start tower to mid tower</span>
            <span class="n">doTowers</span><span class="o">(</span><span class="n">topN</span><span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="n">from</span><span class="o">,</span> <span class="n">to</span><span class="o">,</span> <span class="n">inter</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Dist "</span> <span class="o">+</span> <span class="n">topN</span> <span class="o">+</span> <span class="s">" from "</span> <span class="o">+</span> <span class="n">from</span> <span class="o">+</span> <span class="s">" to "</span> <span class="o">+</span> <span class="n">to</span><span class="o">);</span>
            <span class="c1">//Move top n-1 from mid tower to end tower</span>
            <span class="n">doTowers</span><span class="o">(</span><span class="n">topN</span><span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="n">inter</span><span class="o">,</span> <span class="n">from</span><span class="o">,</span> <span class="n">to</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">doTowers</span><span class="o">(</span><span class="n">nDisks</span><span class="o">,</span> <span class="sc">'A'</span><span class="o">,</span> <span class="sc">'B'</span><span class="o">,</span> <span class="sc">'C'</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre>


<p>To make code looks clear, I draw a draft of the sequence of recursion call for the code above. Note the purpose numbers are the sequence of call:</p>
<p>../images/articles/2015/algorithm/hanoi_graph.png </p>
<h4>Merge Sort</h4>
<h5>Code</h5>
<pre class="code literal-block"><span></span><span class="cm">/*</span>
<span class="cm">Output:</span>
<span class="cm">72 90 45 126 54</span>
<span class="cm">45 54 72 90 126</span>
<span class="cm">*/</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MergeSort</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kt">long</span><span class="o">[]</span> <span class="n">theArray</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">nElems</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">MergeSort</span><span class="o">(</span><span class="kt">int</span> <span class="n">max</span><span class="o">){</span>
        <span class="n">theArray</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">long</span><span class="o">[</span><span class="n">max</span><span class="o">];</span>
        <span class="n">nElems</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">insert</span><span class="o">(</span><span class="kt">long</span> <span class="n">value</span><span class="o">){</span>
        <span class="n">theArray</span><span class="o">[</span><span class="n">nElems</span><span class="o">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
        <span class="n">nElems</span><span class="o">++;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">display</span><span class="o">(){</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">nElems</span><span class="o">;</span> <span class="n">j</span><span class="o">++){</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">theArray</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">+</span> <span class="s">" "</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">""</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">mergeSort</span><span class="o">(){</span>
        <span class="kt">long</span><span class="o">[]</span> <span class="n">workspace</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">long</span><span class="o">[</span><span class="n">nElems</span><span class="o">];</span>
        <span class="n">recMergeSort</span><span class="o">(</span><span class="n">workspace</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">nElems</span><span class="o">-</span><span class="mi">1</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">recMergeSort</span><span class="o">(</span><span class="kt">long</span><span class="o">[]</span> <span class="n">workspace</span><span class="o">,</span> <span class="kt">int</span> <span class="n">lowerBound</span><span class="o">,</span> <span class="kt">int</span> <span class="n">upperBound</span><span class="o">){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">lowerBound</span> <span class="o">==</span> <span class="n">upperBound</span><span class="o">)</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="k">else</span><span class="o">{</span>
            <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="o">(</span><span class="n">lowerBound</span> <span class="o">+</span> <span class="n">upperBound</span><span class="o">)/</span><span class="mi">2</span><span class="o">;</span>
            <span class="n">recMergeSort</span><span class="o">(</span><span class="n">workspace</span><span class="o">,</span> <span class="n">lowerBound</span><span class="o">,</span> <span class="n">mid</span><span class="o">);</span>
            <span class="n">recMergeSort</span><span class="o">(</span><span class="n">workspace</span><span class="o">,</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="o">,</span> <span class="n">upperBound</span><span class="o">);</span>
            <span class="n">merge</span><span class="o">(</span><span class="n">workspace</span><span class="o">,</span><span class="n">lowerBound</span><span class="o">,</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="o">,</span> <span class="n">upperBound</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">merge</span><span class="o">(</span><span class="kt">long</span><span class="o">[]</span> <span class="n">workspace</span><span class="o">,</span> <span class="kt">int</span> <span class="n">lowPtr</span><span class="o">,</span> <span class="kt">int</span> <span class="n">highPtr</span><span class="o">,</span> <span class="kt">int</span> <span class="n">upperBound</span><span class="o">){</span>
        <span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">lowerBound</span> <span class="o">=</span> <span class="n">lowPtr</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">highPtr</span><span class="o">-</span><span class="mi">1</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">upperBound</span> <span class="o">-</span> <span class="n">lowerBound</span> <span class="o">+</span><span class="mi">1</span><span class="o">;</span> <span class="c1">//# of items</span>

        <span class="k">while</span><span class="o">(</span><span class="n">lowPtr</span> <span class="o">&lt;=</span> <span class="n">mid</span> <span class="o">&amp;&amp;</span> <span class="n">highPtr</span> <span class="o">&lt;=</span> <span class="n">upperBound</span><span class="o">){</span>
            <span class="k">if</span><span class="o">(</span><span class="n">theArray</span><span class="o">[</span><span class="n">lowPtr</span><span class="o">]&lt;</span><span class="n">theArray</span><span class="o">[</span><span class="n">highPtr</span><span class="o">]){</span>
                <span class="n">workspace</span><span class="o">[</span><span class="n">j</span><span class="o">++]</span> <span class="o">=</span> <span class="n">theArray</span><span class="o">[</span><span class="n">lowPtr</span><span class="o">++];</span>
            <span class="o">}</span><span class="k">else</span><span class="o">{</span>
                <span class="n">workspace</span><span class="o">[</span><span class="n">j</span><span class="o">++]</span> <span class="o">=</span> <span class="n">theArray</span><span class="o">[</span><span class="n">highPtr</span><span class="o">++];</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="k">while</span><span class="o">(</span><span class="n">lowPtr</span> <span class="o">&lt;=</span> <span class="n">mid</span><span class="o">){</span> <span class="c1">//upper side are gone, some lower side left</span>
            <span class="n">workspace</span><span class="o">[</span><span class="n">j</span><span class="o">++]</span> <span class="o">=</span> <span class="n">theArray</span><span class="o">[</span><span class="n">lowPtr</span><span class="o">++];</span>
        <span class="o">}</span>
        <span class="k">while</span><span class="o">(</span><span class="n">highPtr</span><span class="o">&lt;=</span><span class="n">upperBound</span><span class="o">){</span> <span class="c1">//lower side are gone, some upperside left</span>
            <span class="n">workspace</span><span class="o">[</span><span class="n">j</span><span class="o">++]</span> <span class="o">=</span> <span class="n">theArray</span><span class="o">[</span><span class="n">highPtr</span><span class="o">++];</span>
        <span class="o">}</span>

        <span class="k">for</span><span class="o">(</span><span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">n</span><span class="o">;</span> <span class="n">j</span><span class="o">++){</span><span class="c1">//copy back</span>
            <span class="n">theArray</span><span class="o">[</span><span class="n">lowerBound</span><span class="o">+</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">workspace</span><span class="o">[</span><span class="n">j</span><span class="o">];</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">maxSize</span> <span class="o">=</span> <span class="mi">100</span><span class="o">;</span>
        <span class="n">MergeSort</span> <span class="n">arr</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MergeSort</span><span class="o">(</span><span class="n">maxSize</span><span class="o">);</span>
        <span class="n">arr</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="mi">72</span><span class="o">);</span>
        <span class="n">arr</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="mi">90</span><span class="o">);</span>
        <span class="n">arr</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="mi">45</span><span class="o">);</span>
        <span class="n">arr</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="mi">126</span><span class="o">);</span>
        <span class="n">arr</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="mi">54</span><span class="o">);</span>
        <span class="n">arr</span><span class="o">.</span><span class="na">display</span><span class="o">();</span>

        <span class="n">arr</span><span class="o">.</span><span class="na">mergeSort</span><span class="o">();</span>
        <span class="n">arr</span><span class="o">.</span><span class="na">display</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre>


<h4>Binary Search</h4>
<pre class="code literal-block"><span></span><span class="cm">/**</span>
<span class="cm">Output:</span>
<span class="cm">    45 54 72 90 126</span>
<span class="cm">    Found 54</span>
<span class="cm">**/</span>
<span class="kd">class</span> <span class="nc">BinarySearch</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kt">long</span><span class="o">[]</span> <span class="n">a</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">nElems</span><span class="o">;</span> <span class="c1">//count how many existing elements in array</span>

    <span class="kd">public</span> <span class="nf">BinarySearch</span><span class="o">(</span><span class="kt">int</span> <span class="n">max</span><span class="o">){</span>
        <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">long</span><span class="o">[</span><span class="n">max</span><span class="o">];</span>
        <span class="n">nElems</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">size</span><span class="o">(){</span>
        <span class="k">return</span> <span class="n">nElems</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">find</span><span class="o">(</span><span class="kt">long</span> <span class="n">searchKey</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">recFind</span><span class="o">(</span><span class="n">searchKey</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">nElems</span><span class="o">-</span><span class="mi">1</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="nf">recFind</span><span class="o">(</span><span class="kt">long</span> <span class="n">searchKey</span><span class="o">,</span> <span class="kt">int</span> <span class="n">lowerBound</span><span class="o">,</span> <span class="kt">int</span> <span class="n">upperBound</span><span class="o">){</span>
        <span class="kt">int</span> <span class="n">curIn</span><span class="o">;</span>

        <span class="n">curIn</span> <span class="o">=</span> <span class="o">(</span><span class="n">lowerBound</span> <span class="o">+</span> <span class="n">upperBound</span><span class="o">)/</span><span class="mi">2</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="n">a</span><span class="o">[</span><span class="n">curIn</span><span class="o">]</span> <span class="o">==</span> <span class="n">searchKey</span><span class="o">){</span>
            <span class="k">return</span> <span class="n">curIn</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">lowerBound</span> <span class="o">&gt;</span> <span class="n">upperBound</span><span class="o">){</span>
            <span class="k">return</span> <span class="n">nElems</span><span class="o">;</span> <span class="c1">//cannot find</span>
        <span class="o">}</span>
        <span class="k">else</span><span class="o">{</span>
            <span class="k">if</span><span class="o">(</span><span class="n">a</span><span class="o">[</span><span class="n">curIn</span><span class="o">]&lt;</span><span class="n">searchKey</span><span class="o">)</span>
                <span class="k">return</span> <span class="n">recFind</span><span class="o">(</span><span class="n">searchKey</span><span class="o">,</span> <span class="n">curIn</span><span class="o">+</span><span class="mi">1</span><span class="o">,</span> <span class="n">upperBound</span><span class="o">);</span> <span class="c1">//check larger half</span>
            <span class="k">else</span>
                <span class="k">return</span> <span class="n">recFind</span><span class="o">(</span><span class="n">searchKey</span><span class="o">,</span> <span class="n">lowerBound</span><span class="o">,</span> <span class="n">curIn</span><span class="o">-</span><span class="mi">1</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">insert</span><span class="o">(</span><span class="kt">long</span> <span class="n">value</span><span class="o">){</span>
        <span class="kt">int</span> <span class="n">j</span><span class="o">;</span>
        <span class="k">for</span><span class="o">(</span><span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">nElems</span><span class="o">;</span> <span class="n">j</span><span class="o">++){</span>
            <span class="k">if</span><span class="o">(</span><span class="n">a</span><span class="o">[</span><span class="n">j</span><span class="o">]&gt;</span><span class="n">value</span><span class="o">){</span>
                <span class="k">break</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">k</span><span class="o">=</span><span class="n">nElems</span><span class="o">;</span> <span class="n">k</span><span class="o">&gt;</span><span class="n">j</span><span class="o">;</span> <span class="n">k</span><span class="o">--){</span>
            <span class="n">a</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">=</span> <span class="n">a</span><span class="o">[</span><span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="o">];</span>
        <span class="o">}</span>
        <span class="n">a</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
        <span class="n">nElems</span> <span class="o">++;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">display</span><span class="o">(){</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">nElems</span><span class="o">;</span> <span class="n">j</span><span class="o">++){</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">a</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">+</span> <span class="s">" "</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">" "</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">maxSize</span> <span class="o">=</span> <span class="mi">100</span><span class="o">;</span>
        <span class="n">BinarySearch</span> <span class="n">arr</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BinarySearch</span><span class="o">(</span><span class="n">maxSize</span><span class="o">);</span>
        <span class="n">arr</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="mi">72</span><span class="o">);</span>
        <span class="n">arr</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="mi">90</span><span class="o">);</span>
        <span class="n">arr</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="mi">45</span><span class="o">);</span>
        <span class="n">arr</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="mi">126</span><span class="o">);</span>
        <span class="n">arr</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="mi">54</span><span class="o">);</span>
        <span class="n">arr</span><span class="o">.</span><span class="na">display</span><span class="o">();</span>

        <span class="kt">int</span> <span class="n">searchKey</span> <span class="o">=</span> <span class="mi">54</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="n">arr</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">searchKey</span><span class="o">)</span> <span class="o">!=</span> <span class="n">arr</span><span class="o">.</span><span class="na">size</span><span class="o">())</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Found "</span> <span class="o">+</span> <span class="n">searchKey</span><span class="o">);</span>
        <span class="k">else</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Can't find "</span> <span class="o">+</span> <span class="n">searchKey</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre>


<h4>Word Recursion (Anagram)</h4>
<h5>Idea</h5>
<p>Assume a word has <code>n</code> letters:</p>
<ol>
<li>
<p>List right-most <code>n-1</code> letters</p>
</li>
<li>
<p>Rotate all <code>n</code> letters</p>
</li>
<li>
<p>Do two steps above <code>n</code> times</p>
</li>
</ol>
<h5>Code</h5>
<pre class="code literal-block"><span></span><span class="cm">/**</span>
<span class="cm">If you input 'test', you will get:</span>
<span class="cm">  1 test</span>
<span class="cm">  2 tets</span>
<span class="cm">  3 tste</span>
<span class="cm">  4 tset</span>
<span class="cm">  5 ttes</span>
<span class="cm">  6 ttse</span>
<span class="cm">  7 estt</span>
<span class="cm">  8 estt</span>
<span class="cm">  9 etts</span>
<span class="cm"> 10 etst</span>
<span class="cm"> 11 etst</span>
<span class="cm"> 12 etts</span>
<span class="cm"> 13 stte</span>
<span class="cm"> 14 stet</span>
<span class="cm"> 15 stet</span>
<span class="cm"> 16 stte</span>
<span class="cm"> 17 sett</span>
<span class="cm"> 18 sett</span>
<span class="cm"> 19 ttes</span>
<span class="cm"> 20 ttse</span>
<span class="cm"> 21 test</span>
<span class="cm"> 22 tets</span>
<span class="cm"> 23 tste</span>
<span class="cm"> 24 tset</span>
<span class="cm">**/</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WordRecurtion</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">int</span> <span class="n">size</span><span class="o">;</span>
    <span class="kd">static</span> <span class="kt">int</span> <span class="n">count</span><span class="o">;</span>
    <span class="kd">static</span> <span class="kt">char</span><span class="o">[]</span> <span class="n">arrChar</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="o">[</span><span class="mi">100</span><span class="o">];</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"Enter a word: "</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">input</span> <span class="o">=</span> <span class="n">getString</span><span class="o">();</span>
        <span class="n">size</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">size</span><span class="o">;</span> <span class="n">j</span><span class="o">++){</span>
            <span class="n">arrChar</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">j</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">doAnagram</span><span class="o">(</span><span class="n">size</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">doAnagram</span><span class="o">(</span><span class="kt">int</span> <span class="n">newSize</span><span class="o">){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">newSize</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
          <span class="k">return</span><span class="o">;</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">newSize</span><span class="o">;</span> <span class="n">j</span><span class="o">++){</span>
          <span class="n">doAnagram</span><span class="o">(</span><span class="n">newSize</span><span class="o">-</span><span class="mi">1</span><span class="o">);</span>
          <span class="k">if</span><span class="o">(</span><span class="n">newSize</span><span class="o">==</span><span class="mi">2</span><span class="o">)</span>
            <span class="n">displayWord</span><span class="o">();</span>
          <span class="c1">//Starting from every two words, rotate after each recursion</span>
          <span class="n">rotate</span><span class="o">(</span><span class="n">newSize</span><span class="o">);</span>
        <span class="o">}</span>
      <span class="o">}</span>

      <span class="c1">//Rotate word one position to right</span>
      <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">rotate</span><span class="o">(</span><span class="kt">int</span> <span class="n">newSize</span><span class="o">){</span>
        <span class="kt">int</span> <span class="n">j</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">position</span> <span class="o">=</span> <span class="n">size</span> <span class="o">-</span> <span class="n">newSize</span><span class="o">;</span>
        <span class="kt">char</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">arrChar</span><span class="o">[</span><span class="n">position</span><span class="o">];</span>
        <span class="k">for</span><span class="o">(</span><span class="n">j</span><span class="o">=</span><span class="n">position</span><span class="o">+</span><span class="mi">1</span><span class="o">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">size</span><span class="o">;</span> <span class="n">j</span><span class="o">++){</span>
          <span class="n">arrChar</span><span class="o">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="n">arrChar</span><span class="o">[</span><span class="n">j</span><span class="o">];</span>
        <span class="o">}</span>
        <span class="n">arrChar</span><span class="o">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">;</span>
      <span class="o">}</span>

      <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">displayWord</span><span class="o">(){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">count</span><span class="o">&lt;</span><span class="mi">99</span><span class="o">)</span>
          <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">" "</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(</span><span class="n">count</span><span class="o">&lt;</span><span class="mi">9</span><span class="o">)</span>
          <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">" "</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(++</span><span class="n">count</span> <span class="o">+</span> <span class="s">" "</span><span class="o">);</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">size</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span>
          <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">arrChar</span><span class="o">[</span><span class="n">j</span><span class="o">]);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">" "</span><span class="o">);</span>
      <span class="o">}</span>

      <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">getString</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">{</span>
        <span class="n">InputStreamReader</span> <span class="n">isr</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">);</span>
        <span class="n">BufferedReader</span> <span class="n">br</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="n">isr</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">s</span><span class="o">;</span>
      <span class="o">}</span>
<span class="o">}</span>
</pre>


<h4>Height of B-Tree</h4>
<h5>Code</h5>
<p>This is my code from hankerrank.com:</p>
<pre class="code literal-block"><span></span>    <span class="cm">/*</span>
<span class="cm">    class Node</span>
<span class="cm">       int data;</span>
<span class="cm">       Node left;</span>
<span class="cm">       Node right;</span>
<span class="cm">    */</span>
   <span class="kt">int</span> <span class="nf">height</span><span class="o">(</span><span class="n">Node</span> <span class="n">root</span><span class="o">)</span>
    <span class="o">{</span>
         <span class="n">Node</span> <span class="n">current</span> <span class="o">=</span> <span class="n">root</span><span class="o">;</span>
         <span class="k">if</span><span class="o">(</span><span class="n">current</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>
            <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
         <span class="o">}</span>
         <span class="k">if</span><span class="o">(</span><span class="n">height</span><span class="o">(</span><span class="n">current</span><span class="o">.</span><span class="na">left</span><span class="o">)&gt;</span><span class="n">height</span><span class="o">(</span><span class="n">current</span><span class="o">.</span><span class="na">right</span><span class="o">))</span>
             <span class="k">return</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">height</span><span class="o">(</span><span class="n">current</span><span class="o">.</span><span class="na">left</span><span class="o">);</span>
         <span class="k">else</span>
             <span class="k">return</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">height</span><span class="o">(</span><span class="n">current</span><span class="o">.</span><span class="na">right</span><span class="o">);</span>
    <span class="o">}</span>
</pre>


<h4>Decide if B-Tree is Balanced</h4>
<p>Following method is taken from <a href="http://www.nowamagic.net/librarys/veda/detail/2314">this post</a>:</p>
<pre class="code literal-block"><span></span><span class="cm">/*</span>
<span class="cm">class Node</span>
<span class="cm">   int data;</span>
<span class="cm">   Node left;</span>
<span class="cm">   Node right;</span>
<span class="cm">*/</span>
<span class="c1">//Return depth of tree if tree is balanced. Otherwise return -1</span>
<span class="kt">int</span> <span class="nf">isBalenced</span><span class="o">(</span><span class="n">Node</span> <span class="n">root</span><span class="o">)</span>
<span class="o">{</span>
     <span class="n">Node</span> <span class="n">current</span> <span class="o">=</span> <span class="n">root</span><span class="o">;</span>
     <span class="k">if</span><span class="o">(</span><span class="n">current</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>
        <span class="k">return</span> <span class="mi">0</span><span class="o">;</span> <span class="c1">//return 0 for null node</span>
     <span class="o">}</span>

     <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="n">isBalenced</span><span class="o">(</span><span class="n">current</span><span class="o">.</span><span class="na">left</span><span class="o">);</span>
     <span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="n">isBalenced</span><span class="o">(</span><span class="n">current</span><span class="o">.</span><span class="na">right</span><span class="o">);</span>

     <span class="k">if</span><span class="o">(</span><span class="n">left</span><span class="o">&gt;=</span><span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">right</span><span class="o">&gt;=</span><span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">left</span><span class="o">-</span><span class="n">right</span><span class="o">&lt;=</span><span class="mi">1</span> <span class="o">||</span> <span class="n">left</span><span class="o">-</span><span class="n">right</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="mi">1</span><span class="o">){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">left</span><span class="o">&lt;</span><span class="n">right</span><span class="o">)</span>
            <span class="k">return</span> <span class="n">right</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
        <span class="k">else</span>
            <span class="k">return</span> <span class="n">left</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span><span class="k">else</span><span class="o">{</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/2015/Algorithm%20Data%20Structure/algorithm-and-data-structure-basics-linkedlist.html">Algorithm and Data Structure Basics - Linked List</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-09-02T00:00:00-04:00">2015-09-02 00:00</time>
</div>
                <div class="stats">
                                <a href="posts/2015/Algorithm%20Data%20Structure/algorithm-and-data-structure-basics-linkedlist.html#disqus_thread" data-disqus-identifier="cache/posts/2015/Algorithm Data Structure/algorithm-and-data-structure-basics-linkedlist.html">Comments</a>


                </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/algorithm.html" rel="tag">Algorithm</a></li>
           <li><a class="tag p-category" href="categories/data-structure.html" rel="tag">Data Structure</a></li>
           <li><a class="tag p-category" href="categories/java.html" rel="tag">Java</a></li>
           <li><a class="tag p-category" href="categories/linked-list.html" rel="tag">Linked List</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<h4>Reference List</h4>
<ul>
<li>
<p><a href="http://www.linuxidc.com/Linux/2014-04/99926.htm">Merge Sort for Single Linked List Java (Chinese)</a></p>
</li>
<li>
<p><em>Data Structures and Algorithms in Java (Second Edition)</em>, written by <em>Robert Lafore</em>, Chinese Version</p>
</li>
</ul>
<h4>Efficiency of Linked List</h4>
<p>Insertion and Deletion <strong>at the head of linked list</strong> is really quick. It need <code>O(1)</code> time complexity.</p>
<h5>Compare with Array</h5>
<p>Both array and linked list need <code>O(N)</code> time complexity for searching and insertion/deletion to certain node. However, linked list may still be a better option, because it <strong>does not need to move</strong> anything when it does these operations. Linked list can save lots of time expecially if there exists a large amount of elements.</p>
<p>Linked list is also better at saving space. Linked list also gives flexibility of expanding size.</p>
<p>So if we don't know exact size of data, linked list can be a better option comparing to array.</p>
<h4>ADT</h4>
<p>You can create <code>stack</code> using linked list. When you create <code>push</code> and <code>pop</code> method, just insert/remove first element from head of linked list.</p>
<h4>Insertion Sort for Sorted Linked List</h4>
<p>If you have a un-sorted array, you can take all elements out, and insert them to a sorted linked list. Then after you deleting all elements and re-put them to array, this array will become a sorted one.</p>
<pre class="code literal-block"><span></span><span class="cm">/*</span>
<span class="cm">  Insert Node at the end of a linked list</span>
<span class="cm">  head pointer input could be NULL as well for empty list</span>
<span class="cm">  Node is defined as</span>
<span class="cm">  class Node {</span>
<span class="cm">     int data;</span>
<span class="cm">     Node next;</span>
<span class="cm">  }</span>
<span class="cm">*/</span>
<span class="kd">class</span> <span class="nc">SortedList</span><span class="o">{</span>
  <span class="kd">private</span> <span class="n">Node</span> <span class="n">head</span><span class="o">;</span> <span class="c1">//head of linked list</span>

  <span class="kd">public</span> <span class="nf">SortedList</span><span class="o">(){</span>
    <span class="n">head</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="c1">//constructor for empty list</span>
  <span class="o">}</span>

  <span class="c1">//Constructor for taking a array of nodes as parameter</span>
  <span class="kd">public</span> <span class="nf">SortedList</span><span class="o">(</span><span class="n">Node</span><span class="o">[]</span> <span class="n">nodearray</span><span class="o">){</span>
    <span class="n">head</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">nodearray</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">j</span><span class="o">++){</span>
      <span class="n">insert</span><span class="o">(</span><span class="n">nodearray</span><span class="o">[</span><span class="n">j</span><span class="o">]);</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">insert</span><span class="o">(</span><span class="n">Node</span> <span class="n">insertNode</span><span class="o">){</span>
    <span class="n">Node</span> <span class="n">currentNode</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Node</span><span class="o">();</span>
    <span class="n">currentNode</span> <span class="o">=</span> <span class="n">head</span><span class="o">;</span>

    <span class="k">if</span><span class="o">(</span><span class="n">currentNode</span><span class="o">.</span><span class="na">next</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>
      <span class="c1">//Skip this process. Insert insertNode if there is only one node in linked list</span>
    <span class="o">}</span>

    <span class="c1">//Do insertion sort. Left most is always the largest one</span>
    <span class="k">while</span><span class="o">(</span><span class="n">currentNode</span><span class="o">.</span><span class="na">next</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">insertNode</span><span class="o">.</span><span class="na">data</span> <span class="o">&gt;</span> <span class="n">currentNode</span><span class="o">.</span><span class="na">next</span><span class="o">.</span><span class="na">data</span><span class="o">){</span>
      <span class="n">Node</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">currentNode</span><span class="o">.</span><span class="na">next</span><span class="o">;</span>
      <span class="n">currentNode</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">insertNode</span><span class="o">;</span>
      <span class="n">insertNode</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">temp</span><span class="o">;</span>
      <span class="n">currentNode</span> <span class="o">=</span> <span class="n">currentNode</span><span class="o">.</span><span class="na">next</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre>


<h4>Iterator</h4>
<p>Iterator is used as a reference so that it can point to any node in linked list, in order to find and change certain node.</p>
<h5>Class of Iterator</h5>
<pre class="code literal-block"><span></span><span class="kd">class</span> <span class="nf">ListIterator</span><span class="o">(){</span>
  <span class="kd">private</span> <span class="n">Node</span> <span class="n">current</span><span class="o">;</span> <span class="c1">//current node in linked list that iterator is pointing to</span>
  <span class="c1">//private Node previous;  for doubly linked list</span>
  <span class="kd">private</span> <span class="n">LinkedList</span> <span class="n">currentList</span><span class="o">;</span> <span class="c1">//current linked list</span>
<span class="o">}</span>
</pre>


<h5>Main Class</h5>
<p>You may have different iterators for one linked list. Each iterator points to a certain node.</p>
<pre class="code literal-block"><span></span><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(...){</span>
  <span class="n">LinkedList</span> <span class="n">l</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedList</span><span class="o">();</span>
  <span class="n">ListIterator</span> <span class="n">iter</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="na">getIterator</span><span class="o">();</span>
  <span class="n">Node</span> <span class="n">point</span> <span class="o">=</span> <span class="n">iter</span><span class="o">.</span><span class="na">getCurrent</span><span class="o">();</span> <span class="c1">//get current node in iterator</span>
  <span class="c1">//point.next...</span>
<span class="o">}</span>
</pre>


<h5>Possible Methods</h5>
<p>You can add following possible methods to your iterator:</p>
<ul>
<li>
<p>reset(): Make iterator point to head of linked list</p>
</li>
<li>
<p>nextLink(): Make iterator point to next node</p>
</li>
<li>
<p>getCurrent(): return current node</p>
</li>
<li>
<p>atEnd(): return <code>true</code> if iterator is pointing to end of linked list</p>
</li>
<li>
<p>insertAfter()/insertBefore()/deletCurretn(): operation for insertion/deletion</p>
</li>
</ul>
<h4>Merge Two Sorted Linked Lists/Merge Sort Single Linked List</h4>
<p>You can check <strong>Merge Two Sorted Linked Lists</strong> on <a href="https://www.hackerrank.com/challenges/merge-two-sorted-linked-lists/submissions/code/13529242">hackerrank.com</a>.</p>
<h5>Idea</h5>
<p>To merge two sorted linked lists, you just need to create a new node and always get the smaller node from two source linked lists. Every time a node is passed, move <code>header</code> to next node.</p>
<p>To merge sort a single linked list, you need to have two pointer: <code>p</code> and <code>f</code>. Every time if <code>p</code> points to next node, <code>f</code> should point to the node after the next one. In this case, when <code>f</code> finish walking through <strong>a certain part of linked list</strong>, <code>p</code> is <strong>on the half</strong> of that linked list.</p>
<p>Recursively call the method above for first part(start from origin head) of linked list and second part(start from <code>p</code>) for division process. Then merge result using same method as merging two sorted linked lists</p>
<h5>Code</h5>
<h6>Code for merging two sorted linked list, on hackerrank.com:</h6>
<pre class="code literal-block"><span></span><span class="cm">/*</span>
<span class="cm">  Insert Node at the end of a linked list</span>
<span class="cm">  head pointer input could be NULL as well for empty list</span>
<span class="cm">  Node is defined as</span>
<span class="cm">  class Node {</span>
<span class="cm">     int data;</span>
<span class="cm">     Node next;</span>
<span class="cm">  }</span>
<span class="cm">*/</span>

<span class="n">Node</span> <span class="nf">MergeLists</span><span class="o">(</span><span class="n">Node</span> <span class="n">headA</span><span class="o">,</span> <span class="n">Node</span> <span class="n">headB</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Node</span> <span class="n">c</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Node</span><span class="o">();</span>
        <span class="n">Node</span> <span class="n">result</span> <span class="o">=</span> <span class="n">c</span><span class="o">;</span>

        <span class="k">while</span> <span class="o">(</span><span class="n">headA</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">headB</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">){</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">headA</span><span class="o">.</span><span class="na">data</span> <span class="o">&lt;=</span> <span class="n">headB</span><span class="o">.</span><span class="na">data</span><span class="o">){</span>
                <span class="n">c</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">headA</span><span class="o">;</span>
                <span class="n">headA</span> <span class="o">=</span> <span class="n">headA</span><span class="o">.</span><span class="na">next</span><span class="o">;</span>
            <span class="o">}</span><span class="k">else</span> <span class="o">{</span>
                <span class="n">c</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">headB</span><span class="o">;</span>
                <span class="n">headB</span> <span class="o">=</span> <span class="n">headB</span><span class="o">.</span><span class="na">next</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">next</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="k">if</span><span class="o">(</span><span class="n">headA</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>
            <span class="n">c</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">headB</span><span class="o">;</span>
        <span class="o">}</span><span class="k">else</span><span class="o">{</span>
            <span class="n">c</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">headA</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="na">next</span><span class="o">;</span>
        <span class="c1">//result is a empty node. result.next (i.e. c.next) is the start of new linked list</span>
    <span class="o">}</span>
</pre>


<h6>Code for merging single linked list, divide part:</h6>
<pre class="code literal-block"><span></span><span class="cm">/*</span>
<span class="cm">  Insert Node at the end of a linked list</span>
<span class="cm">  head pointer input could be NULL as well for empty list</span>
<span class="cm">  Node is defined as</span>
<span class="cm">  class Node {</span>
<span class="cm">     int data;</span>
<span class="cm">     Node next;</span>
<span class="cm">  }</span>
<span class="cm">*/</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Solution</span> <span class="o">{</span>
<span class="kd">public</span> <span class="n">Node</span> <span class="nf">sortList</span><span class="o">(</span><span class="n">Node</span> <span class="n">head</span><span class="o">)</span> <span class="o">{</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">head</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">head</span><span class="o">.</span><span class="na">next</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">head</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="n">ListNode</span> <span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="o">;</span>
    <span class="n">ListNode</span> <span class="n">f</span> <span class="o">=</span> <span class="n">head</span><span class="o">.</span><span class="na">next</span><span class="o">;</span>

    <span class="k">while</span> <span class="o">(</span> <span class="n">f</span><span class="o">.</span><span class="na">next</span> <span class="o">!=</span><span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">f</span><span class="o">.</span><span class="na">next</span><span class="o">.</span><span class="na">next</span> <span class="o">!=</span><span class="kc">null</span> <span class="o">){</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">next</span><span class="o">;</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="na">next</span><span class="o">.</span><span class="na">next</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">//Perform division to second half of linked list</span>
    <span class="n">ListNode</span> <span class="n">h2</span> <span class="o">=</span> <span class="n">sortList</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">next</span><span class="o">);</span>
    <span class="n">p</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

    <span class="cm">/*</span>
<span class="cm">    Perform divide to first half of linked list (starting from head),then merge division result.</span>
<span class="cm">    'MergeLists' method is the code in first part</span>
<span class="cm">    */</span>
    <span class="k">return</span> <span class="n">MergeLists</span><span class="o">(</span><span class="n">sortList</span><span class="o">(</span><span class="n">head</span><span class="o">),</span><span class="n">h2</span><span class="o">);</span>
<span class="o">}</span>
</pre>


<h4>Flatten a Doubly Linked List</h4>
<p>This is a question from the book <em>Programming Interview Exposed</em>. Following graph is a example of a doubly linked list, from <a href="http://www.geeksforgeeks.org/flatten-a-linked-list-with-next-and-child-pointers/">this post</a>:</p>
<p>../images/articles/2015/algorithm/double_linkedlist.png </p>
<h5>Idea</h5>
<p>Generally, each child linked list can be flattened as a single linked list, which can be appended to the end of result linked list. Each time you encounter a node with a child, append the child (and thus the child list) to the <strong>end of the first level</strong> and update the <strong>tail pointer</strong>.</p>
<p>This is a description of algorithm:</p>
<pre class="code literal-block"><span></span>Start at the beginning of the first level
While you are not at the end of the first level
    If the current node has a child
        Append the child to the end of the first level
        Update the tail pointer
    Advance to next node
</pre>


<h5>Code</h5>
<pre class="code literal-block"><span></span><span class="cm">/*</span>
<span class="cm">  Insert Node at the end of a linked list</span>
<span class="cm">  head pointer input could be NULL as well for empty list</span>
<span class="cm">  Node is defined as</span>
<span class="cm">  class Node {</span>
<span class="cm">     int data;</span>
<span class="cm">     Node next;</span>
<span class="cm">     Node prev;</span>
<span class="cm">     Node child;</span>
<span class="cm">  }</span>
<span class="cm">*/</span>
<span class="kt">void</span> <span class="nf">flattenList</span><span class="o">(</span><span class="n">Node</span> <span class="n">head</span><span class="o">,</span> <span class="n">Node</span> <span class="n">tail</span><span class="o">){</span>
    <span class="n">Node</span> <span class="n">currentNode</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Node</span><span class="o">();</span>
    <span class="n">currentNode</span> <span class="o">=</span> <span class="n">head</span><span class="o">;</span>

    <span class="k">while</span><span class="o">(</span><span class="n">currentNode</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">currentNode</span><span class="o">.</span><span class="na">child</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
            <span class="n">append</span><span class="o">(</span><span class="n">currentNode</span><span class="o">.</span><span class="na">child</span><span class="o">,</span> <span class="n">tail</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="n">currentNode</span> <span class="o">=</span> <span class="n">currentNode</span><span class="o">.</span><span class="na">next</span>
<span class="o">}</span>

<span class="cm">/*</span>
<span class="cm">Append the child list to the end of the tail and update the tail;</span>
<span class="cm">*/</span>
<span class="kt">void</span> <span class="nf">append</span><span class="o">(</span><span class="n">Node</span> <span class="n">child</span><span class="o">,</span> <span class="n">Node</span> <span class="n">tail</span><span class="o">){</span>
    <span class="n">Node</span> <span class="n">currentNode</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Node</span><span class="o">();</span>

    <span class="c1">//Append child list to tail</span>
    <span class="n">tail</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">child</span><span class="o">;</span>
    <span class="n">child</span><span class="o">.</span><span class="na">prev</span> <span class="o">=</span> <span class="n">tail</span><span class="o">;</span>

    <span class="c1">//Find the new tail, which should be the end of the child list</span>
    <span class="n">currentNode</span> <span class="o">=</span> <span class="n">child</span><span class="o">;</span>
    <span class="k">while</span><span class="o">(</span><span class="n">currentNode</span><span class="o">.</span><span class="na">next</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
        <span class="n">currentNode</span> <span class="o">=</span> <span class="n">currentNode</span><span class="o">.</span><span class="na">next</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">//Update the tail pointer now that currentNode is the new tail</span>
    <span class="n">tail</span> <span class="o">=</span> <span class="n">currentNode</span><span class="o">;</span>
<span class="o">}</span>
</pre>


<h4>Unflatten Previous Linked List</h4>
<h5>Idea</h5>
<p>To unflatten previous linked list, you can do following:</p>
<pre class="code literal-block"><span></span>Explore Path:
    While not at the end
        If current node has a child
            Separate the child from its previous node
            Explore path beginning with the child
        Go onto the next node
</pre>


<h5>Code</h5>
<pre class="code literal-block"><span></span><span class="cm">/*</span>
<span class="cm">  Insert Node at the end of a linked list</span>
<span class="cm">  head pointer input could be NULL as well for empty list</span>
<span class="cm">  Node is defined as</span>
<span class="cm">  class Node {</span>
<span class="cm">     int data;</span>
<span class="cm">     Node next;</span>
<span class="cm">     Node prev;</span>
<span class="cm">     Node child;</span>
<span class="cm">  }</span>
<span class="cm">*/</span>
<span class="kt">void</span> <span class="nf">unflattenList</span><span class="o">(</span><span class="n">Node</span> <span class="n">start</span><span class="o">,</span> <span class="n">Node</span> <span class="n">tail</span><span class="o">){</span>
    <span class="n">Node</span> <span class="n">currentNode</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Node</span><span class="o">();</span>

    <span class="n">exploreAndSeparate</span><span class="o">(</span><span class="n">start</span><span class="o">);</span>

    <span class="c1">//Update the tail pointer</span>
    <span class="n">currentNode</span> <span class="o">=</span> <span class="n">start</span><span class="o">;</span>
    <span class="k">while</span><span class="o">(</span><span class="n">currentNode</span><span class="o">.</span><span class="na">next</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
        <span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="na">next</span>
    <span class="n">tail</span> <span class="o">=</span> <span class="n">currentNode</span><span class="o">;</span>
<span class="o">}</span>

<span class="c1">//exploreAndSeparate actually does the recursion and separation</span>
<span class="kt">void</span> <span class="nf">exploreAndSeparate</span><span class="o">(</span><span class="n">Node</span> <span class="n">childListStart</span><span class="o">){</span>
    <span class="n">Node</span> <span class="n">currentNode</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Node</span><span class="o">();</span>
    <span class="n">currentNode</span> <span class="o">=</span> <span class="n">childListStart</span><span class="o">;</span>

    <span class="k">while</span><span class="o">(</span><span class="n">currentNode</span><span class="o">.</span><span class="na">next</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
        <span class="c1">//Check if currentNode is a start of a child list</span>
        <span class="k">if</span><span class="o">(</span><span class="n">currentNode</span><span class="o">.</span><span class="na">child</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
            <span class="c1">//Broken child list from origin list. i.e. original prev node should point to null now</span>
            <span class="n">currentNode</span><span class="o">.</span><span class="na">child</span><span class="o">.</span><span class="na">prev</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
            <span class="c1">//Split new child list out. Remember original parent can still do node.child to get this child list</span>
            <span class="n">currentNode</span><span class="o">.</span><span class="na">child</span><span class="o">.</span><span class="na">prev</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

            <span class="c1">//Run recursion so that all childs from child node can be split</span>
            <span class="n">exploreAndSeparate</span><span class="o">(</span><span class="n">currentNode</span><span class="o">.</span><span class="na">child</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">currentNode</span> <span class="o">=</span> <span class="n">currentNode</span><span class="o">.</span><span class="na">next</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/2015/Algorithm%20Data%20Structure/algorithm-and-data-structure-basics-dynamic-programming.html">Algorithm and Data Structure Basics - Dynamic Programming</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-09-01T00:00:00-04:00">2015-09-01 00:00</time>
</div>
                <div class="stats">
                                <a href="posts/2015/Algorithm%20Data%20Structure/algorithm-and-data-structure-basics-dynamic-programming.html#disqus_thread" data-disqus-identifier="cache/posts/2015/Algorithm Data Structure/algorithm-and-data-structure-basics-dynamic-programming.html">Comments</a>


                </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/algorithm.html" rel="tag">Algorithm</a></li>
           <li><a class="tag p-category" href="categories/data-structure.html" rel="tag">Data Structure</a></li>
           <li><a class="tag p-category" href="categories/dynamic-programming.html" rel="tag">Dynamic Programming</a></li>
           <li><a class="tag p-category" href="categories/java.html" rel="tag">Java</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<h4>Reference List</h4>
<ul>
<li>
<p><a href="http://www.th7.cn/Program/java/2011-07-07/29801.shtml">Dynamic Programming (Chinese)</a></p>
</li>
<li>
<p><a href="http://www.cnblogs.com/pengyingh/articles/2396427.html">Dynamic Programming (Chinese)</a></p>
</li>
<li>
<p><a href="http://blog.csdn.net/biangren/article/details/8038605">Java Dynamic Programming: Longest Common Sequence (Chinese)</a></p>
</li>
<li>
<p><a href="http://www.programcreek.com/2013/02/leetcode-maximum-subarray-java/">LeetCode - Maximum Subarray (Java)</a></p>
</li>
</ul>
<h4>Basic Idea</h4>
<p><strong>Dynamic Programming (DP)</strong> is used to get the <strong>best result</strong> in the process of making decisions. It is for a problem with <strong>multiple stages</strong> of decision making.</p>
<p>For one problem, A decision of <strong>best solution</strong> may depend on the best solutions in smaller problems.</p>
<p>In this case, DP suggests to get the best solution for <strong>all</strong> small stages <strong>only once</strong>, and <strong>store</strong> these solutions, no matter if they'll be useful in the future or not.</p>
<p>Finally, user can combine small best solutions to get the final solution. <em>Never repeat the process of getting same small solution.</em></p>
<h5>Four Steps of Dynamic Programming</h5>
<ol>
<li>
<p>Describe the structure of the best solution.</p>
</li>
<li>
<p>Use <strong>recursion</strong> to define the value of best solution</p>
</li>
<li>
<p><strong>From bottom to top</strong>, calculate the value of best solution</p>
</li>
<li>
<p>Combine all results to get the final solution</p>
</li>
</ol>
<h4>Longest Common Sequence, LCS</h4>
<blockquote>
<p>Assume you have two strings. Output their longest common sub-string. Sub-string has two cases: continuous from origin string or non-continuous from original string.
For example, you have two string: <code>BDCABA</code> and <code>ABCBDAB</code>. You can output BCBA or BDAB for non-continuous longest sub-string, with length of 4.</p>
</blockquote>
<h5>Idea</h5>
<p>Assume we have two input strings: <code>A="a0,a1,...,am-1"</code>, <code>B="b0,b1,...bn-1"</code>.</p>
<p>Assume we have a LCS <code>Z="z0,z1,...zk-1"</code>.</p>
<p>There are three possibilities for this assumption:</p>
<ol>
<li>
<p>if <code>am-1 = bn-1</code>, we can conclude <code>zk-1 = am-1 = bn-1</code> (Otherwise Z cannot be LCS). And we can conclude <code>z0,z1...zk-2</code> is the LCS for <code>a0,a1,...am-2</code> and <code>b0,b1,...bn-2</code></p>
</li>
<li>
<p>if <code>am-1 != bn-1</code>, we can conclude <em>if <code>zk-1 != am-1</code></em>, then <code>z0,z1,...zk-2</code> is the LCS for <code>a0,a1,...am-2</code> and <code>b0,b1,...bn-1</code>.</p>
</li>
<li>
<p>if <code>am-1 != bn-1</code>, we can conclude <em>if <code>zk-2 != bn-1</code></em>, then <code>z0,z1,...zk-2</code> is the LCS for <code>a0,a1,...am-1</code> and <code>b0,b1,...bn-2</code></p>
</li>
</ol>
<p>Based on rules above, we can divide this problem to many smaller problem. For example, if we want to get LCS for <code>a0,a1,...am-2</code> and <code>b0,b1,...bn-2</code>, then we need to apply rules above to get <code>z0,z1z...zk-3</code> for <code>a0,a1,...am-3</code> and <code>b0,b1,...bn-3</code>, assuming <code>am-2 = bm-2</code>.</p>
<h5>Create Array to Store Solutions</h5>
<p>We want to create a two-dimensional array <code>c[i][j]</code>. It is used to record the length of LCS for <code>X[i]</code> and <code>Y[j]</code>.</p>
<blockquote>
<p>Since we are calculating <strong>from bottom to top</strong>, we already get <code>c[i-1][j-1]</code>, <code>c[i-1][j]</code> and <code>c[i][j-1]</code> before we get <code>c[i][j]</code>. Since we can know if <code>X[i]=Y[j]</code> or not, we can calculate the value of <code>c[i][j]</code> based on three rules above.</p>
</blockquote>
<p>The graph below is from <a href="http://blog.csdn.net/biangren/article/details/8038605">this post</a>, expressing the math idea and calculation process for this problem:</p>
<p>../images/articles/2015/algorithm/lcs_math.png </p>
<p>Using two input string <code>BDCABA</code> and <code>ABCBDAB</code>:</p>
<p>../images/articles/2015/algorithm/lcs_graph.png </p>
<blockquote>
<p>You may notice only when we move to left-top direction, we can find a character for LCS. So we need to create another two-dimensional array to record moving direction</p>
</blockquote>
<h5>Code for Non-continuous LCS</h5>
<p>Following code is from <a href="http://blog.sina.com.cn/s/blog_5d4646fd0100qitg.html">this post</a>, written by <em>BirdMan</em>:</p>
<pre class="code literal-block"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">LCS</span><span class="o">{</span>

    <span class="kt">int</span><span class="o">[][]</span> <span class="nf">lcsLength</span><span class="o">(</span><span class="kt">char</span><span class="o">[]</span> <span class="n">x</span><span class="o">,</span><span class="kt">char</span><span class="o">[]</span> <span class="n">y</span><span class="o">){</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">y</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">i</span><span class="o">,</span><span class="n">j</span><span class="o">;</span>

        <span class="kt">int</span><span class="o">[][]</span> <span class="n">c</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">m</span><span class="o">][</span><span class="n">n</span><span class="o">];</span>
        <span class="kt">int</span><span class="o">[][]</span> <span class="n">b</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">m</span><span class="o">][</span><span class="n">n</span><span class="o">];</span>
        <span class="k">for</span><span class="o">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="o">;</span><span class="n">i</span><span class="o">++)</span>
            <span class="n">c</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="k">for</span><span class="o">(</span><span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span><span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span><span class="n">j</span><span class="o">++)</span>
            <span class="n">c</span><span class="o">[</span><span class="mi">0</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

        <span class="k">for</span><span class="o">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="o">;</span><span class="n">i</span><span class="o">++){</span>
            <span class="k">for</span><span class="o">(</span><span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span><span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span><span class="n">j</span><span class="o">++){</span>
                <span class="c1">//Case with same character</span>
                <span class="k">if</span><span class="o">(</span><span class="n">x</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">==</span> <span class="n">y</span><span class="o">[</span><span class="n">j</span><span class="o">]){</span>
                    <span class="n">c</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">c</span><span class="o">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="o">][</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="o">]</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
                    <span class="n">b</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="c1">//in graph, this means going to left-top</span>
                <span class="o">}</span>
                <span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">c</span><span class="o">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">&gt;=</span> <span class="n">c</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="o">]){</span>
                    <span class="n">c</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">c</span><span class="o">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="o">][</span><span class="n">j</span><span class="o">];</span>
                    <span class="n">b</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span> <span class="c1">//in graph, this means going to top</span>
                <span class="o">}</span><span class="k">else</span><span class="o">{</span>
                    <span class="n">c</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">c</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="o">];</span>
                    <span class="n">b</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span> <span class="c1">//in graph, this means going to left</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">b</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kt">void</span> <span class="nf">printLCS</span><span class="o">(</span><span class="kt">int</span><span class="o">[][]</span> <span class="n">b</span><span class="o">,</span><span class="kt">char</span><span class="o">[]</span> <span class="n">x</span><span class="o">,</span><span class="kt">int</span> <span class="n">i</span><span class="o">,</span><span class="kt">int</span> <span class="n">j</span><span class="o">){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">j</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="n">b</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">==</span> <span class="mi">1</span><span class="o">){</span>
            <span class="c1">//Only want the left-top direction. i.e. b[i][j]=1</span>
            <span class="n">printLCS</span><span class="o">(</span><span class="n">b</span><span class="o">,</span><span class="n">x</span><span class="o">,</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="o">,</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">i</span> <span class="o">+</span> <span class="s">":"</span> <span class="o">+</span> <span class="n">x</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">+</span> <span class="s">"\t"</span><span class="o">);</span>
        <span class="o">}</span><span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">b</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">==</span> <span class="mi">2</span><span class="o">)</span>
            <span class="n">printLCS</span><span class="o">(</span><span class="n">b</span><span class="o">,</span><span class="n">x</span><span class="o">,</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="o">,</span><span class="n">j</span><span class="o">);</span>
        <span class="k">else</span>
            <span class="n">printLCS</span><span class="o">(</span><span class="n">b</span><span class="o">,</span><span class="n">x</span><span class="o">,</span><span class="n">i</span><span class="o">,</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="cm">/*Important: here we need a empty string/char at the beginning of each input, because if you check the graph, position (0,0) has no character. Out matrix with character start from position 1.</span>
<span class="cm">        */</span>
        <span class="kt">char</span><span class="o">[]</span> <span class="n">x</span> <span class="o">=</span> <span class="o">{</span><span class="sc">' '</span><span class="o">,</span><span class="sc">'A'</span><span class="o">,</span><span class="sc">'B'</span><span class="o">};</span>
        <span class="kt">char</span><span class="o">[]</span> <span class="n">y</span> <span class="o">=</span> <span class="o">{</span><span class="sc">' '</span><span class="o">,</span><span class="sc">'B'</span><span class="o">,</span><span class="sc">'D'</span><span class="o">};</span>
        <span class="n">LCS</span> <span class="n">lcs</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LCS</span><span class="o">();</span>
        <span class="n">lcs</span><span class="o">.</span><span class="na">printLCS</span><span class="o">(</span><span class="n">lcs</span><span class="o">.</span><span class="na">lcsLength</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">),</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="o">.</span><span class="na">length</span><span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="n">y</span><span class="o">.</span><span class="na">length</span><span class="o">-</span><span class="mi">1</span><span class="o">);</span>
    <span class="o">}</span>
</pre>


<p>}</p>
<h4>Maximum Subarray</h4>
<p>I learned this problem main from <a href="http://www.programcreek.com/2013/02/leetcode-maximum-subarray-java/">LeetCode - Maximum Subarray (Java)</a>.</p>
<blockquote>
<p>You have a array of integers(may include negative number). You want to find a continuous subarray so that the sum of subarray is maximized. For example, assume you have <code>{-12, 1, -3, 4, -1, 2, 1, -5, 4}</code>. The maximum subarray is <code>6</code>.</p>
</blockquote>
<p>Rules we need to follow:</p>
<ul>
<li>We should ignore the sum of the previous <code>n-1</code> elements if <code>nth</code> element is greater than the sum.</li>
</ul>
<p>Code from same post:</p>
<pre class="code literal-block"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MaxSubarray</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">test</span> <span class="o">=</span> <span class="o">{</span> <span class="o">-</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">5</span><span class="o">,</span> <span class="mi">4</span><span class="o">};</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"result: "</span> <span class="o">+</span> <span class="n">maxSubArray</span><span class="o">(</span><span class="n">test</span><span class="o">));</span>

    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">int</span> <span class="nf">maxSubArray</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">A</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">max</span> <span class="o">=</span> <span class="n">A</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">sum</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">A</span><span class="o">.</span><span class="na">length</span><span class="o">];</span>
        <span class="n">sum</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="n">A</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>

        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">A</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="cm">/*Compare current value with the sum of previous sum and this value.</span>
<span class="cm">            Two cases:</span>
<span class="cm">            1. Assume current value is non-negative.</span>
<span class="cm">                1.1 If the new sum of previous sum and current value is larger than current value, previous sum must be non-negative. In this case, take the new sum.</span>
<span class="cm">                1.2 If the new sum of previous sum and current value is smaller than current value, previous sum must be negative value. In this case, drop previous sum and re-start from current value (because current value is larger).</span>
<span class="cm">            2. if current value is negative, we still want to keep previous sum because new sum must be smaller than previous sum</span>
<span class="cm">            */</span>
            <span class="n">sum</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">A</span><span class="o">[</span><span class="n">i</span><span class="o">],</span> <span class="n">sum</span><span class="o">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="o">]</span> <span class="o">+</span> <span class="n">A</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
            <span class="c1">//max is the maximum subarray value</span>
            <span class="n">max</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">max</span><span class="o">,</span> <span class="n">sum</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="n">max</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre>


<p>There can be a similar solution, using a <code>temp</code> variable. Following code is my full solution on <a href="https://www.hackerrank.com/challenges/maxsubarray">HackerRank</a> :</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.text.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.regex.*</span><span class="o">;</span>

<span class="cm">/*</span>
<span class="cm">test case input:</span>
<span class="cm">6</span>
<span class="cm">1</span>
<span class="cm">1</span>
<span class="cm">6</span>
<span class="cm">-1 -2 -3 -4 -5 -6</span>
<span class="cm">2</span>
<span class="cm">1 -2</span>
<span class="cm">3</span>
<span class="cm">1 2 3</span>
<span class="cm">1</span>
<span class="cm">-10</span>
<span class="cm">6</span>
<span class="cm">1 -1 -1 -1 -1 5</span>

<span class="cm">test case output:</span>

<span class="cm">1 1</span>
<span class="cm">-1 -1</span>
<span class="cm">1 1</span>
<span class="cm">6 6</span>
<span class="cm">-10 -10</span>
<span class="cm">5 6</span>
<span class="cm">*/</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Solution</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">{</span>
        <span class="n">BufferedReader</span> <span class="n">bd</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">));</span>
        <span class="kt">int</span> <span class="n">cases</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">bd</span><span class="o">.</span><span class="na">readLine</span><span class="o">());</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">cases</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
            <span class="n">String</span> <span class="n">line</span> <span class="o">=</span> <span class="n">bd</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
            <span class="k">if</span><span class="o">(</span><span class="n">line</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
                <span class="kt">int</span> <span class="n">howmany</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
                <span class="kt">float</span><span class="o">[]</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">float</span><span class="o">[</span><span class="n">howmany</span><span class="o">];</span>
                <span class="n">String</span> <span class="n">nums</span> <span class="o">=</span> <span class="n">bd</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
                <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">a</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">j</span><span class="o">++){</span>
                    <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">nums</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">" "</span><span class="o">);</span>
                    <span class="k">if</span><span class="o">(</span><span class="n">index</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">index</span><span class="o">&lt;</span><span class="n">a</span><span class="o">.</span><span class="na">length</span><span class="o">){</span>
                        <span class="c1">//Use parseFloat for passing negative numbers</span>
                        <span class="n">a</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">Float</span><span class="o">.</span><span class="na">parseFloat</span><span class="o">(</span><span class="n">nums</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="n">index</span><span class="o">));</span>
                        <span class="n">nums</span> <span class="o">=</span> <span class="n">nums</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="o">,</span> <span class="n">nums</span><span class="o">.</span><span class="na">length</span><span class="o">());</span>
                    <span class="o">}</span>
                    <span class="k">else</span>
                        <span class="n">a</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">Float</span><span class="o">.</span><span class="na">parseFloat</span><span class="o">(</span><span class="n">nums</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="kt">int</span> <span class="n">first</span> <span class="o">=</span> <span class="n">getMaxCon</span><span class="o">(</span><span class="n">a</span><span class="o">);</span>
                <span class="kt">int</span> <span class="n">second</span> <span class="o">=</span> <span class="n">getMaxNonCon</span><span class="o">(</span><span class="n">a</span><span class="o">);</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">first</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> <span class="n">second</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">""</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">int</span> <span class="nf">getMaxCon</span><span class="o">(</span><span class="kt">float</span><span class="o">[]</span> <span class="n">a</span><span class="o">){</span>
        <span class="kt">float</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">a</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
        <span class="kt">float</span> <span class="n">max</span> <span class="o">=</span> <span class="n">a</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">a</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">temp</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span>
                <span class="n">temp</span> <span class="o">=</span> <span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
            <span class="k">else</span><span class="o">{</span>
                <span class="n">temp</span> <span class="o">+=</span> <span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
            <span class="o">}</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">temp</span> <span class="o">&gt;</span> <span class="n">max</span><span class="o">){</span>
                <span class="n">max</span> <span class="o">=</span> <span class="n">temp</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span><span class="n">max</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">int</span> <span class="nf">getMaxNonCon</span><span class="o">(</span><span class="kt">float</span><span class="o">[]</span> <span class="n">a</span><span class="o">){</span>
        <span class="c1">//For non-continous option, no need to add replace part</span>
        <span class="kt">float</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">a</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">a</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
            <span class="k">if</span><span class="o">(</span><span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">+</span> <span class="n">temp</span> <span class="o">&gt;</span> <span class="n">temp</span><span class="o">)</span>
                <span class="n">temp</span> <span class="o">+=</span> <span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span><span class="n">temp</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre>


<blockquote>
<p>My current problem is both methods above has time complexity of O(n), which is not very efficient if there exists lot of numbers. Is there any way to improve it?</p>
</blockquote>
<h4>Stock Problem</h4>
<p><em>This problem can be done by DP or Non-DP method.</em></p>
<p>Stock problem can be concluded to a <strong>finding maximum sum of array elements' differences</strong>, with different constrains.</p>
<p>Following problems assume you cannot sell and buy stock on the same day:</p>
<h5>What if you can sell/maintain/buy stocks with unlimited time?</h5>
<p>I met this problem on <a href="https://www.hackerrank.com/challenges/stockmax">hackerank.com</a>. In this problem, you can only buy one stock once per day, but you can choose to sell all your current stocks in one day.</p>
<p>So far I figured a solution with <code>O(n)</code> runtime complexity:</p>
<pre class="code literal-block"><span></span><span class="cm">/*</span>
<span class="cm">Example Input:</span>
<span class="cm">3</span>
<span class="cm">3</span>
<span class="cm">5 3 2</span>
<span class="cm">3</span>
<span class="cm">1 2 100</span>
<span class="cm">4</span>
<span class="cm">1 3 1 2</span>
<span class="cm">Example Output:</span>
<span class="cm">0</span>
<span class="cm">197</span>
<span class="cm">3</span>
<span class="cm">*/</span>

<span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.text.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.regex.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Solution</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">{</span>
            <span class="n">BufferedReader</span> <span class="n">bd</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">));</span>
            <span class="kt">int</span> <span class="n">cases</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">bd</span><span class="o">.</span><span class="na">readLine</span><span class="o">());</span>
            <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">cases</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
                <span class="n">String</span> <span class="n">line</span> <span class="o">=</span> <span class="n">bd</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
                <span class="k">if</span><span class="o">(</span><span class="n">line</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
                    <span class="kt">int</span> <span class="n">howmany</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
                    <span class="kt">int</span><span class="o">[]</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">howmany</span><span class="o">];</span>
                    <span class="n">String</span> <span class="n">nums</span> <span class="o">=</span> <span class="n">bd</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
                    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">a</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">j</span><span class="o">++){</span>
                        <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">nums</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">" "</span><span class="o">);</span>
                        <span class="k">if</span><span class="o">(</span><span class="n">index</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">index</span><span class="o">&lt;</span><span class="n">a</span><span class="o">.</span><span class="na">length</span><span class="o">){</span>
                            <span class="c1">//Use parseFloat for passing negative numbers</span>
                            <span class="n">a</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">nums</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="n">index</span><span class="o">));</span>
                            <span class="n">nums</span> <span class="o">=</span> <span class="n">nums</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="o">,</span> <span class="n">nums</span><span class="o">.</span><span class="na">length</span><span class="o">());</span>
                        <span class="o">}</span>
                        <span class="k">else</span>
                            <span class="n">a</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">nums</span><span class="o">);</span>
                    <span class="o">}</span>
                    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">countStock</span><span class="o">(</span><span class="n">a</span><span class="o">));</span>
                <span class="o">}</span>
            <span class="o">}</span>
    <span class="o">}</span>

    <span class="cm">/*</span>
<span class="cm">    This solution assume two pointers from the end of array.</span>
<span class="cm">    Last pointer try to find positive benefit, counting difference with the value of first pointer.</span>
<span class="cm">    O(n) running time</span>
<span class="cm">    */</span>
    <span class="kd">static</span> <span class="kt">int</span> <span class="nf">countStock</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">a</span><span class="o">){</span>
        <span class="kt">int</span> <span class="n">last</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="na">length</span><span class="o">-</span><span class="mi">1</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">first</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="na">length</span><span class="o">-</span><span class="mi">2</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="k">while</span><span class="o">(</span><span class="n">first</span><span class="o">&gt;=</span><span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">last</span><span class="o">&gt;=</span><span class="mi">0</span><span class="o">){</span>
            <span class="k">if</span><span class="o">(</span><span class="n">a</span><span class="o">[</span><span class="n">last</span><span class="o">]-</span><span class="n">a</span><span class="o">[</span><span class="n">first</span><span class="o">]&gt;</span><span class="mi">0</span><span class="o">){</span>
                <span class="n">sum</span> <span class="o">+=</span> <span class="n">a</span><span class="o">[</span><span class="n">last</span><span class="o">]-</span><span class="n">a</span><span class="o">[</span><span class="n">first</span><span class="o">];</span>
                <span class="n">first</span> <span class="o">--;</span>
            <span class="o">}</span><span class="k">else</span><span class="o">{</span>
                <span class="n">first</span> <span class="o">--;</span>
                <span class="n">last</span> <span class="o">=</span> <span class="n">first</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">if</span><span class="o">(</span><span class="n">sum</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">)</span>
            <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="k">return</span> <span class="n">sum</span><span class="o">;</span>
    <span class="o">}</span>
</pre>


<h5>What if you can only buy stock once and sell stock once?</h5>
<p>Then the problem is turning to <em>finding out the largest different between two elements in array</em>. i.e.Find smallest and largest elements in array, while smallest element should in the front of the largest element. Following is my code:</p>
<pre class="code literal-block"><span></span><span class="kd">static</span> <span class="kt">int</span> <span class="nf">countStock</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">a</span><span class="o">){</span>
    <span class="kt">int</span> <span class="n">smallest</span> <span class="o">=</span> <span class="n">a</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
    <span class="kt">int</span> <span class="n">largest</span> <span class="o">=</span> <span class="n">a</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
    <span class="kt">int</span> <span class="n">diff</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">a</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>

        <span class="c1">//Count diff. Reset smallest and largest if a[i]&lt;a[i-1]</span>
        <span class="k">if</span><span class="o">(</span><span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="o">]&gt;</span><span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">]){</span>
            <span class="n">diff</span> <span class="o">=</span> <span class="n">max</span><span class="o">(</span><span class="n">diff</span><span class="o">,</span> <span class="n">largest</span> <span class="o">-</span> <span class="n">smallest</span><span class="o">);</span>
            <span class="n">smallest</span> <span class="o">=</span> <span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
            <span class="n">largest</span> <span class="o">=</span> <span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
        <span class="o">}</span>
        <span class="k">else</span><span class="o">{</span>
            <span class="k">if</span><span class="o">(</span><span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">]&lt;</span><span class="n">smallest</span><span class="o">){</span>
                <span class="n">smallest</span> <span class="o">=</span> <span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
            <span class="o">}</span>
            <span class="k">if</span><span class="o">(</span><span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">]&gt;</span><span class="n">largest</span><span class="o">){</span>
                <span class="n">largest</span> <span class="o">=</span> <span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="k">if</span><span class="o">(</span><span class="n">diff</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">)</span>
        <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
    <span class="k">else</span>
        <span class="k">return</span> <span class="n">diff</span><span class="o">;</span>
<span class="o">}</span>
</pre>


<h5>What if you can only trade stock with a maximum of n times?</h5>
<p>My idea is that we can use same idea as the first stock problem (2 pointers). Since we can only count <code>n</code> times of benefits, we can store all benefits in a sorted array (in descending order), then get the sum of first <code>n</code> elements.</p>
<pre class="code literal-block"><span></span> <span class="c1">//O(mn): m is the size of input array, n is the size of times</span>
 <span class="kd">static</span> <span class="kt">int</span> <span class="nf">countStockNTimes</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">n</span><span class="o">){</span>
        <span class="kt">int</span> <span class="n">last</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="na">length</span><span class="o">-</span><span class="mi">1</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">first</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="na">length</span><span class="o">-</span><span class="mi">2</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">max</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">sums</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
        <span class="k">while</span><span class="o">(</span><span class="n">first</span><span class="o">&gt;=</span><span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">last</span><span class="o">&gt;=</span><span class="mi">0</span><span class="o">){</span>
            <span class="k">if</span><span class="o">(</span><span class="n">a</span><span class="o">[</span><span class="n">last</span><span class="o">]-</span><span class="n">a</span><span class="o">[</span><span class="n">first</span><span class="o">]&gt;</span><span class="mi">0</span><span class="o">){</span>
                <span class="n">addToSortedArray</span><span class="o">(</span><span class="n">sum</span><span class="o">,</span> <span class="n">a</span><span class="o">[</span><span class="n">last</span><span class="o">]-</span><span class="n">a</span><span class="o">[</span><span class="n">first</span><span class="o">]);</span>
                <span class="n">first</span> <span class="o">--;</span>
            <span class="o">}</span><span class="k">else</span><span class="o">{</span>
                <span class="n">first</span> <span class="o">--;</span>
                <span class="n">last</span> <span class="o">=</span> <span class="n">first</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
            <span class="n">max</span> <span class="o">+=</span> <span class="n">sum</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
        <span class="o">}</span>
        <span class="k">if</span><span class="o">(</span><span class="n">max</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">)</span>
            <span class="n">max</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="k">return</span> <span class="n">max</span><span class="o">;</span>
<span class="o">}</span>

<span class="c1">//O(n) time complexity</span>
<span class="kt">void</span> <span class="nf">addToSortedArray</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">sum</span><span class="o">,</span> <span class="kt">int</span> <span class="n">diff</span><span class="o">){</span>
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">sum</span><span class="o">.</span><span class="na">length</span><span class="o">-</span><span class="mi">1</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">diff</span><span class="o">&lt;</span><span class="n">sum</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="n">diff</span><span class="o">&gt;</span><span class="n">sum</span><span class="o">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="o">])</span>
            <span class="n">sum</span><span class="o">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="n">diff</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/2015/JavaScript/jasmine-basics.html">Jasmine Basics</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-08-25T00:00:00-04:00">2015-08-25 00:00</time>
</div>
                <div class="stats">
                                <a href="posts/2015/JavaScript/jasmine-basics.html#disqus_thread" data-disqus-identifier="cache/posts/2015/JavaScript/jasmine-basics.html">Comments</a>


                </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/jasmine.html" rel="tag">Jasmine</a></li>
           <li><a class="tag p-category" href="categories/javascript.html" rel="tag">JavaScript</a></li>
           <li><a class="tag p-category" href="categories/jquery.html" rel="tag">jQuery</a></li>
           <li><a class="tag p-category" href="categories/software-testing.html" rel="tag">Software Testing</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p>You can find Jasmine <a href="http://jasmine.github.io/2.3/introduction.html">here</a>. I choose it because:</p>
<ol>
<li>
<p>It's a JavaScript framework which does not depend on any other JavaScript frameworks, and it does not require a DOM. So I can apply it on different web apps and platforms.</p>
</li>
<li>
<p>Jasmine (and its syntax) is really popular. In the future, I can also use Jasmine to test AngularJS code and other JavaScript frameworks.</p>
</li>
<li>
<p>Jasmine has good object-oriented support, making code being modular.</p>
</li>
</ol>
<h3>Describe</h3>
<p><code>describe</code> keyword represents the beginning of a <strong>test suite</strong>.</p>
<p>It takes two parameters: a <code>string</code> and a <code>function</code>.</p>
<p>The content of string represents the content of the test suite.</p>
<p>There can be nested test suites/nested specs exist.</p>
<h3>Specs</h3>
<p><code>it</code> keyword represents the beginning of a spec.</p>
<p>It takes two parameters: a <code>string</code> and a <code>function</code>.</p>
<p>The content of string represents that title/introduction of the spec.</p>
<p>A spec contains one or more <code>expectation</code>s that test the state of the code.</p>
<p>A spec with all true expectations is a <code>passing spec</code>. A spec with one or more false expectations is a <code>failing spec</code>.</p>
<h4>Fail a Spec</h4>
<p>You can use <code>fail</code> function to manually fail a spec. This function takes a failure message or a Error object as a parameter:</p>
<table class="codehilitetable"><tr>
<td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td>
<td class="code">
<pre class="code literal-block"><span></span>  <span class="nx">describe</span><span class="p">(</span><span class="s2">"A spec using the fail function"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">callBack</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">callBack</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="nx">it</span><span class="p">(</span><span class="s2">"should not call the callBack"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">foo</span><span class="p">(</span><span class="kc">false</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">fail</span><span class="p">(</span><span class="s2">"Callback has been called"</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre>
</td>
</tr></table>
<h4>Setups</h4>
<p><code>beforeEach</code>, <code>afterEach</code>, <code>beforeAll</code>, <code>afterAll</code> can be used to setup environment before/after test suites/specs.</p>
<p><code>beforeEach</code> function is called once before <strong>each</strong> spec run in test suite.</p>
<p><code>afterEach</code> function is called once after <strong>each</strong> spec run.</p>
<blockquote>
<p>i.e. For each spec in a test suite, <code>beforeEach</code> function run first, then the spec function, then <code>afterEach</code> function. So if a test suite has multiple specs, <code>beforeEach</code> function and <code>afterEach</code> function should be run multiple times.</p>
</blockquote>
<p><code>beforeAll</code> function is called *<em>only once</em> before all the specs run.</p>
<p><code>afterAll</code> function is called <strong>only once</strong> after all the specs run.</p>
<blockquote>
<p>Remember if you have a variable which is share between <code>beforeAll</code> function, spec function and <code>afterAll</code> function, this variable will be continuously modified until all specs are done.</p>
</blockquote>
<p>Example:</p>
<table class="codehilitetable"><tr>
<td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td>
<td class="code">
<pre class="code literal-block"><span></span> <span class="nx">describe</span><span class="p">(</span><span class="s2">"A spec using beforeEach and afterEach"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">foo</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">});</span>
  <span class="nx">afterEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">foo</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">});</span>
  <span class="c1">//Here foo will be reset to 0 everytime after a spec running, because of afterEach()</span>
  <span class="nx">it</span><span class="p">(</span><span class="s2">"is just a function, so it can contain any code"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">foo</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="nx">it</span><span class="p">(</span><span class="s2">"can have more than one expectation"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">foo</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="kc">true</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre>
</td>
</tr></table>
<blockquote>
<p>For nested <code>describe</code> blocks, before one spec running, <code>beforeEach</code> function <strong>for all describes</strong> will be run. Similarly, after one spec running, <code>afterEach</code> function <strong>for all describes</strong> will be run.</p>
</blockquote>
<h5>Use <code>this</code> in Setup</h5>
<p><code>this</code> variable can be shared between <code>beforeEach</code>, <code>it</code> and <code>afterEach</code> function.</p>
<p><code>this</code> will be <strong>reset</strong> every time a spec run.</p>
<p>Example:</p>
<table class="codehilitetable"><tr>
<td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td>
<td class="code">
<pre class="code literal-block"><span></span>  <span class="nx">describe</span><span class="p">(</span><span class="s2">"A spec"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">});</span>
  <span class="nx">it</span><span class="p">(</span><span class="s2">"can use the `this` to share state"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">expect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">foo</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">bar</span> <span class="o">=</span> <span class="s2">"test pollution?"</span><span class="p">;</span>
  <span class="p">});</span>
  <span class="nx">it</span><span class="p">(</span><span class="s2">"prevents test pollution by having an empty `this` created for the next spec"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">expect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">foo</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">bar</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">undefined</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre>
</td>
</tr></table>
<h4>Disable Suites and Specs</h4>
<p>Instead of <code>describe</code> and <code>it</code>, you can use <code>xdescribe</code> and <code>xit</code> to skip this test suite or spec.</p>
<h3>Expectations</h3>
<p>An expectation in Jasmine is an <strong>assertion</strong> that is either <code>true</code> or <code>false</code>.</p>
<p>Syntax Example:</p>
<pre class="code literal-block"><span></span><span class="nx">expect</span><span class="p">(</span><span class="nx">a</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</pre>


<p><code>expect</code> takes a value, called <code>actual</code>.</p>
<p><code>expect</code> take a <code>matcher function</code> on second part, which takes the <strong>expected value</strong>.</p>
<h4>Matcher</h4>
<p>You can always add a <code>not</code> in front of any matcher to turn it to a negative assertion.</p>
<p>Example:</p>
<pre class="code literal-block"><span></span><span class="nx">expect</span><span class="p">(</span><span class="nx">a</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">9</span><span class="p">);</span>
<span class="nx">expect</span><span class="p">(</span><span class="nx">a</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">9</span><span class="p">);</span>
</pre>


<h4>List of Matcher</h4>
<ul>
<li>
<p><code>toBe</code></p>
</li>
<li>
<p><code>toEqual</code></p>
</li>
<li>
<p><code>toBeDefined</code></p>
</li>
<li>
<p><code>toBeUndefined</code></p>
</li>
<li>
<p><code>toBeNull</code></p>
</li>
<li>
<p><code>toBeTruthy</code></p>
</li>
<li>
<p><code>toBeFalsy</code></p>
</li>
<li>
<p><code>toContain</code></p>
</li>
<li>
<p><code>toBeLessThan</code></p>
</li>
<li>
<p><code>toBeGreaterThan</code></p>
</li>
<li>
<p><code>toBeCloseTo</code></p>
</li>
<li>
<p><code>toThrow</code></p>
</li>
<li>
<p><code>toThrowError</code></p>
</li>
</ul>
<h4>Custom Matchers</h4>
<p>A custom matcher at its root is a <strong>comparison function</strong> that takes an <strong>actual value</strong> and <strong>expected value</strong>.</p>
<h5>Structure of Custom Matcher</h5>
<p>Create a object, which contains one to many custom matchers.</p>
<p>Each custom matcher is a function, which takes <code>util</code> and <code>customEqualityTesters</code> as parameters.</p>
<p><code>util</code>: contains a set of <strong>utility functions</strong> for matchers to use. For example:</p>
<pre class="code literal-block"><span></span><span class="c1">//this utility function test hyuk property of actual object</span>
<span class="nx">result</span><span class="p">.</span><span class="nx">pass</span> <span class="o">=</span> <span class="nx">util</span><span class="p">.</span><span class="nx">equals</span><span class="p">(</span><span class="nx">actual</span><span class="p">.</span><span class="nx">hyuk</span><span class="p">,</span> <span class="s2">"gawrsh"</span> <span class="o">+</span> <span class="nx">expected</span><span class="p">,</span> <span class="nx">customEqualityTesters</span><span class="p">);</span>
</pre>


<blockquote>
<p>Check <a href="https://github.com/jasmine/jasmine/blob/master/src/core/matchers/matchersUtil.js">matchersUtil.js</a> for all utility functions.</p>
</blockquote>
<ul>
<li>
<code>customEqualityTesters</code>: You may or maynot need customEqualityTester, depending on your choice of utility function.</li>
</ul>
<p><em>You custom matcher method must return an object with a <code>compare</code> function.</em> The <code>compare</code> function takes <code>actual</code> and <code>expected</code> as parameter.</p>
<p>In following code, a <code>result</code> object is returned. <em>This <code>result</code> object must have a <code>pass</code> property, which is <code>true</code> or <code>false</code></em>:</p>
<pre class="code literal-block"><span></span><span class="kd">var</span> <span class="nx">customMatchers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">sample_custom_method</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">util</span><span class="p">,</span> <span class="nx">customEqualityTesters</span><span class="p">){</span>
        <span class="k">return</span><span class="p">{</span>
            <span class="nx">compare</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">actual</span><span class="p">,</span><span class="nx">expected</span><span class="p">){</span>
                <span class="c1">//You may or maynot use expected variable. If not, you can skip parameter when you call this method</span>
                <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">{};</span>
                <span class="nx">result</span><span class="p">.</span><span class="nx">pass</span> <span class="o">=</span> <span class="nx">util</span><span class="p">.</span><span class="nx">utility_function</span><span class="p">();</span> <span class="c1">//see code above</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">pass</span><span class="p">){</span>
                    <span class="nx">result</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="s2">"custom your pass message"</span><span class="p">;</span>
                <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                    <span class="nx">result</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="s2">"custom your fail message"</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>


<blockquote>
<p>You can add <code>.not</code> in utility function for result.pass</p>
<p>You can skip defining result.message. jasmine will try to craft one for your custom matcher.</p>
<p>If you have too many negative comparison (<code>.not</code>), you can add <code>negativeCompare</code> function alongside <code>compare</code>, using similar structure to include all <code>.not</code> methods.</p>
</blockquote>
<h5>How to Use Custom Matcher</h5>
<p>You should register you custom matchers in <code>beforeEach</code> block, using a function <code>jasmine.addMatchers</code>:</p>
<pre class="code literal-block"><span></span><span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//You can get all matcher methods in customMatchers</span>
    <span class="nx">jasmine</span><span class="p">.</span><span class="nx">addMatchers</span><span class="p">(</span><span class="nx">customMatchers</span><span class="p">);</span>
<span class="p">});</span>
</pre>


<p>To use it, just call matcher method in expectations:</p>
<pre class="code literal-block"><span></span><span class="nx">it</span><span class="p">(</span><span class="s2">"test custom matcher"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">your_varaible</span><span class="p">).</span><span class="nx">sample_custom_method</span><span class="p">(</span><span class="nx">expected_varaible_in_custom_method</span><span class="p">);</span>
    <span class="p">})</span>
</pre>


<h3>Spy</h3>
<p>A <code>spy</code> can stub any function and tracks calls to it and all arguments.</p>
<p>A spy only exists in the <code>describe</code> or <code>it</code> block it is defined, and will be <strong>removed</strong> after each spec.</p>
<blockquote>
<p>When you put spy <code>spyOn()</code> in <code>beforeEach()</code> block, based on how <code>beforeEach()</code> work, your spy call will be called before each spec function run.</p>
</blockquote>
<h4>toHaveBeenCalled and toHaveBeenCalledWith</h4>
<p><code>toHaveBeenCalled</code> will return <code>true</code> if the spy was called.</p>
<p><code>toHaveBeenCalledWith</code> will return <code>true</code> if the argument list matches any of the <strong>recorded calls</strong> to the spy.</p>
<p>Example:</p>
<pre class="code literal-block"><span></span>  <span class="nx">describe</span><span class="p">(</span><span class="s2">"A spy"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">foo</span><span class="p">,</span> <span class="nx">bar</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">foo</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">setBar</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">bar</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">};</span>
    <span class="nx">spyOn</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="s1">'setBar'</span><span class="p">);</span>
    <span class="nx">foo</span><span class="p">.</span><span class="nx">setBar</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span>
    <span class="nx">foo</span><span class="p">.</span><span class="nx">setBar</span><span class="p">(</span><span class="mi">456</span><span class="p">,</span> <span class="s1">'another param'</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="nx">it</span><span class="p">(</span><span class="s2">"tracks that the spy was called"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">foo</span><span class="p">.</span><span class="nx">setBar</span><span class="p">).</span><span class="nx">toHaveBeenCalled</span><span class="p">();</span> <span class="c1">//this spec will call spy function</span>
  <span class="p">});</span>
  <span class="nx">it</span><span class="p">(</span><span class="s2">"tracks all the arguments of its calls"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">foo</span><span class="p">.</span><span class="nx">setBar</span><span class="p">).</span><span class="nx">toHaveBeenCalledWith</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">foo</span><span class="p">.</span><span class="nx">setBar</span><span class="p">).</span><span class="nx">toHaveBeenCalledWith</span><span class="p">(</span><span class="mi">456</span><span class="p">,</span> <span class="s1">'another param'</span><span class="p">);</span>
    <span class="c1">//this spec detect if spy function has worked. i.e. if the variables which were spied have been modified</span>
  <span class="p">});</span>
  <span class="nx">it</span><span class="p">(</span><span class="s2">"stops all execution on a function"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">bar</span><span class="p">).</span><span class="nx">toBeNull</span><span class="p">();</span>
    <span class="c1">//this spec make sure spy should be removed after each spec function</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre>


<h4>callThrough</h4>
<p>You can add <code>and.callThrough()</code> after spy function to make sure spy will <strong>track all spec calls</strong>, instead of being removed after each spec call:</p>
<pre class="code literal-block"><span></span><span class="nx">spyOn</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="s1">'getBar'</span><span class="p">).</span><span class="nx">and</span><span class="p">.</span><span class="nx">callThrough</span><span class="p">();</span>
</pre>


<h4>returnValue</h4>
<p>You can add <code>and.returnValue(value)</code> after spy function to make sure your desired call in spy function will return a value:</p>
<pre class="code literal-block"><span></span><span class="nx">spyOn</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="s2">"getBar"</span><span class="p">).</span><span class="nx">and</span><span class="p">.</span><span class="nx">returnValue</span><span class="p">(</span><span class="mi">745</span><span class="p">);</span> <span class="c1">//getBar method for foo object will return value `745`</span>
</pre>


<h4>callFake</h4>
<p>You can add <code>and.callFake(function(){})</code> to create a fake function which can replace the content of your spied function:</p>
<pre class="code literal-block"><span></span>  <span class="nx">describe</span><span class="p">(</span><span class="s2">"A spy, when configured with an alternate implementation"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">foo</span><span class="p">,</span> <span class="nx">bar</span><span class="p">,</span> <span class="nx">fetchedBar</span><span class="p">;</span>
  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">foo</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">setBar</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">bar</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="nx">getBar</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">bar</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">};</span>
    <span class="c1">//force `getBar` to return 1001, but notice `bar` variable is not affected by this fake call</span>
    <span class="nx">spyOn</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="s2">"getBar"</span><span class="p">).</span><span class="nx">and</span><span class="p">.</span><span class="nx">callFake</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="mi">1001</span><span class="p">;</span>
    <span class="p">});</span>
    <span class="nx">foo</span><span class="p">.</span><span class="nx">setBar</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span>
    <span class="nx">fetchedBar</span> <span class="o">=</span> <span class="nx">foo</span><span class="p">.</span><span class="nx">getBar</span><span class="p">();</span>
  <span class="p">});</span>
  <span class="nx">it</span><span class="p">(</span><span class="s2">"tracks that the spy was called"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">foo</span><span class="p">.</span><span class="nx">getBar</span><span class="p">).</span><span class="nx">toHaveBeenCalled</span><span class="p">();</span>
  <span class="p">});</span>
  <span class="nx">it</span><span class="p">(</span><span class="s2">"should not effect other functions"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//fake function does not impact other real function</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">bar</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="nx">it</span><span class="p">(</span><span class="s2">"when called returns the requested value"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//fake function should work</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">fetchedBar</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">1001</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre>


<h4>stub</h4>
<p>To remember the state of any spy calling method above, use <code>and.stub()</code> to get the original stubbing behavior:</p>
<pre class="code literal-block"><span></span><span class="nx">describe</span><span class="p">(</span><span class="s2">"A spy"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">foo</span><span class="p">,</span> <span class="nx">bar</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">foo</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">setBar</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">bar</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">};</span>
    <span class="nx">spyOn</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="s1">'setBar'</span><span class="p">).</span><span class="nx">and</span><span class="p">.</span><span class="nx">callThrough</span><span class="p">();</span>
  <span class="p">});</span>
  <span class="nx">it</span><span class="p">(</span><span class="s2">"can call through and then stub in the same spec"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">foo</span><span class="p">.</span><span class="nx">setBar</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">bar</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span>
    <span class="c1">//use .and.stub() for the spied method</span>
    <span class="nx">foo</span><span class="p">.</span><span class="nx">setBar</span><span class="p">.</span><span class="nx">and</span><span class="p">.</span><span class="nx">stub</span><span class="p">();</span>
    <span class="nx">bar</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="c1">//Now bar should always be null</span>
    <span class="nx">foo</span><span class="p">.</span><span class="nx">setBar</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">bar</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre>


<h4>Tracking Properties</h4>
<p>After you having <code>spayOn(obj, spied_method)</code>, following tracking properties can be used when you call the spied method in <code>expect</code>:</p>
<ul>
<li>
<p><code>.calls.any()</code>: return <code>false</code> if spy has not been called at all. return <code>true</code> once <strong>at least</strong> one call happens.</p>
</li>
<li>
<p><code>.calls.count()</code>: returns the number of times the spy was called.</p>
</li>
<li>
<p><code>.calls.argsFor(index)</code>: assume you call a method a few times. Use <code>index</code> to get different <code>expect</code> function results:</p>
</li>
</ul>
<blockquote>
<p>Example:</p>
</blockquote>
<pre class="code literal-block"><span></span><span class="nx">it</span><span class="p">(</span><span class="s2">"tracks the arguments of each call"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">foo</span><span class="p">.</span><span class="nx">setBar</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span>
    <span class="nx">foo</span><span class="p">.</span><span class="nx">setBar</span><span class="p">(</span><span class="mi">456</span><span class="p">,</span> <span class="s2">"baz"</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">foo</span><span class="p">.</span><span class="nx">setBar</span><span class="p">.</span><span class="nx">calls</span><span class="p">.</span><span class="nx">argsFor</span><span class="p">(</span><span class="mi">0</span><span class="p">)).</span><span class="nx">toEqual</span><span class="p">([</span><span class="mi">123</span><span class="p">]);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">foo</span><span class="p">.</span><span class="nx">setBar</span><span class="p">.</span><span class="nx">calls</span><span class="p">.</span><span class="nx">argsFor</span><span class="p">(</span><span class="mi">1</span><span class="p">)).</span><span class="nx">toEqual</span><span class="p">([</span><span class="mi">456</span><span class="p">,</span> <span class="s2">"baz"</span><span class="p">]);</span>
<span class="p">});</span>
</pre>


<ul>
<li>
<code>.calls.allArgs()</code>: assume you call a method a few times, and return all results from these calls in <code>expect</code> functions:</li>
</ul>
<blockquote>
<p>Example:</p>
</blockquote>
<pre class="code literal-block"><span></span>    <span class="nx">it</span><span class="p">(</span><span class="s2">"tracks the arguments of all calls"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">foo</span><span class="p">.</span><span class="nx">setBar</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span>
        <span class="nx">foo</span><span class="p">.</span><span class="nx">setBar</span><span class="p">(</span><span class="mi">456</span><span class="p">,</span> <span class="s2">"baz"</span><span class="p">);</span>
        <span class="nx">expect</span><span class="p">(</span><span class="nx">foo</span><span class="p">.</span><span class="nx">setBar</span><span class="p">.</span><span class="nx">calls</span><span class="p">.</span><span class="nx">allArgs</span><span class="p">()).</span><span class="nx">toEqual</span><span class="p">([[</span><span class="mi">123</span><span class="p">],[</span><span class="mi">456</span><span class="p">,</span> <span class="s2">"baz"</span><span class="p">]]);</span>
    <span class="p">});</span>
</pre>


<ul>
<li>
<p><code>calls.all()</code>: use this to check all context and argument(i.e. <code>this</code> variable) in <code>expect</code> function: <code>expect(foo.setBar.calls.all()).toEqual([{object: foo, args: [123], returnValue: undefined}]);</code></p>
</li>
<li>
<p><code>.calls.mostRecent()</code>: similar as above, but just return context and arguments for <strong>the most recent call</strong>.</p>
</li>
<li>
<p><code>.calls.first()</code>: similar as above, but just return context and arguments for <strong>the first call</strong>.</p>
</li>
<li>
<p><code>.calls.reset()</code>: clears all tracking for a spy</p>
</li>
</ul>
<h4>jasmine method</h4>
<h5>createSpy</h5>
<p><code>jasmine.createSpy()</code> is a function with <strong>no implementation</strong>. It acts as other spies:</p>
<pre class="code literal-block"><span></span><span class="kd">var</span> <span class="nx">whatAmI</span><span class="p">;</span>
<span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">whatAmI</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">createSpy</span><span class="p">(</span><span class="s1">'whatAmI'</span><span class="p">);</span>
    <span class="nx">whatAmI</span><span class="p">(</span><span class="s2">"I"</span><span class="p">,</span> <span class="s2">"am"</span><span class="p">,</span> <span class="s2">"a"</span><span class="p">,</span> <span class="s2">"spy"</span><span class="p">);</span> <span class="c1">//it does not have implementation. Only with arguments</span>
  <span class="p">});</span>
  <span class="c1">//expect(whatAmI).toHaveBeenCalledWith("I", "am", "a", "spy");</span>
  <span class="c1">//expect(whatAmI.calls.mostRecent().args[0]).toEqual("I");</span>
</pre>


<h5>createSpyObj</h5>
<p>Similar as above, <code>jasmine.createSpyObj</code> accept an <strong>array of strings</strong>, and return a object that has a <strong>property</strong> for each string of the spy:</p>
<pre class="code literal-block"><span></span><span class="kd">var</span> <span class="nx">tape</span><span class="p">;</span>
 <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">tape</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">createSpyObj</span><span class="p">(</span><span class="s1">'tape'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'play'</span><span class="p">,</span> <span class="s1">'pause'</span><span class="p">,</span> <span class="s1">'stop'</span><span class="p">,</span> <span class="s1">'rewind'</span><span class="p">]);</span>
    <span class="nx">tape</span><span class="p">.</span><span class="nx">play</span><span class="p">();</span>
    <span class="nx">tape</span><span class="p">.</span><span class="nx">pause</span><span class="p">();</span>
    <span class="nx">tape</span><span class="p">.</span><span class="nx">rewind</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="p">});</span>
</pre>


<h5>anything</h5>
<p><code>jasmine.anything</code> returns <code>true</code> if the actual value is <strong>not</strong> <code>null</code> or <code>undefined</code>: <code>expect(1).toEqual(jasmine.anything());</code></p>
<h5>objectContaining</h5>
<p><code>jasmine.objectContaining</code> tests objects with <strong>key-value</strong> pairs:</p>
<pre class="code literal-block"><span></span>  <span class="nx">describe</span><span class="p">(</span><span class="s2">"jasmine.objectContaining"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">foo</span><span class="p">;</span>
  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">foo</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">a</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="nx">b</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
      <span class="nx">bar</span><span class="o">:</span> <span class="s2">"baz"</span>
    <span class="p">};</span>
  <span class="p">});</span>
  <span class="nx">it</span><span class="p">(</span><span class="s2">"matches objects with the expect key/value pairs"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">foo</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">objectContaining</span><span class="p">({</span>
      <span class="nx">bar</span><span class="o">:</span> <span class="s2">"baz"</span>
    <span class="p">}));</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">foo</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toEqual</span><span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">objectContaining</span><span class="p">({</span>
      <span class="nx">c</span><span class="o">:</span> <span class="mi">37</span>
    <span class="p">}));</span>
  <span class="p">});</span>
</pre>


<h5>arrayContaining</h5>
<p><code>jasmine.arrayContaining</code> test objects with <strong>values in array</strong>:</p>
<pre class="code literal-block"><span></span>  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">foo</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">];</span>
  <span class="p">});</span>
  <span class="nx">it</span><span class="p">(</span><span class="s2">"matches arrays with some of the values"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">foo</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">arrayContaining</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]));</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">foo</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toEqual</span><span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">arrayContaining</span><span class="p">([</span><span class="mi">6</span><span class="p">]));</span>
  <span class="p">});</span>
</pre>


<h5>stringMatching</h5>
<p><code>jasmine.stringMatching()</code> test if you want match <strong>a string in a object</strong> or <strong>regular expression</strong> pattern:</p>
<pre class="code literal-block"><span></span><span class="nx">describe</span><span class="p">(</span><span class="s1">'jasmine.stringMatching'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">it</span><span class="p">(</span><span class="s2">"matches as a regexp"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">expect</span><span class="p">({</span><span class="nx">foo</span><span class="o">:</span> <span class="s1">'bar'</span><span class="p">}).</span><span class="nx">toEqual</span><span class="p">({</span><span class="nx">foo</span><span class="o">:</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">stringMatching</span><span class="p">(</span><span class="sr">/^bar$/</span><span class="p">)});</span>
    <span class="nx">expect</span><span class="p">({</span><span class="nx">foo</span><span class="o">:</span> <span class="s1">'foobarbaz'</span><span class="p">}).</span><span class="nx">toEqual</span><span class="p">({</span><span class="nx">foo</span><span class="o">:</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">stringMatching</span><span class="p">(</span><span class="s1">'bar'</span><span class="p">)});</span>
<span class="p">});</span>
</pre>


<h4>Custom Equality Tester</h4>
<p>You can create your own equality tester for your test criteria, using <code>asymmetricMatch</code> function name:</p>
<pre class="code literal-block"><span></span>  <span class="kd">var</span> <span class="nx">tester</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">//Use asymmetricMatch as function. No returns</span>
    <span class="nx">asymmetricMatch</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">actual</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">secondValue</span> <span class="o">=</span> <span class="nx">actual</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">','</span><span class="p">)[</span><span class="mi">1</span><span class="p">];</span>
      <span class="k">return</span> <span class="nx">secondValue</span> <span class="o">===</span> <span class="s1">'bar'</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="nx">it</span><span class="p">(</span><span class="s2">"dives in deep"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">expect</span><span class="p">(</span><span class="s2">"foo,bar,baz,quux"</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="nx">tester</span><span class="p">);</span>
  <span class="p">});</span>
</pre>


<h3>Clock</h3>
<p><code>jasmine.clock().install()</code> can be used to setup time dependent testing. To do this, you can put <code>jasmine.clock().install</code> in <code>beforeEach()</code> block and <code>jasmine.clock().uninstall()</code> in <code>afterEach()</code> block.</p>
<h4>Timeout</h4>
<p>Use <code>jasmine.clock().tick(milliseconds)</code> function to simulate timeout in JavaScript: <code>jasmine.clock().tick(1000)</code>;</p>
<h4>Date</h4>
<p>You can create a <code>Date</code> object in JavaScript, then use <code>jasmine.clock().mockDate(date_object)</code> to simulate date:</p>
<pre class="code literal-block"><span></span><span class="kd">var</span> <span class="nx">baseTime</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2014</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">23</span><span class="p">);</span>
<span class="nx">jasmine</span><span class="p">.</span><span class="nx">clock</span><span class="p">().</span><span class="nx">mockDate</span><span class="p">(</span><span class="nx">baseTime</span><span class="p">);</span>
</pre>


<blockquote>
<p>If you don't provide a time object, jasmine will use current Date.</p>
</blockquote>
<h3>Ajax</h3>
<p>You need to include <code>mock-ajax.js</code> from <a href="https://github.com/jasmine/jasmine-ajax">here</a> to test Ajax using jasmine.</p>
<p>Make sure you have <code>jasmine.Ajax.install()</code> in <code>beforeEach()</code> block and <code>jasmine.Ajax.uninstall()</code> in <code>afterEach()</code> to install and uninstall jasmine-ajax.</p>
<h4>Define Mock Response</h4>
<p>You may want to define a mock response to test your Ajax call response. A good place to define this is in <code>spec/javascripts/helpers/test_responses</code>.</p>
<p>Example:</p>
<pre class="code literal-block"><span></span><span class="kd">var</span> <span class="nx">TestResponses</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">search</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">success</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">status</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>
      <span class="c1">//Make responseText to be your response data</span>
      <span class="nx">responseText</span><span class="o">:</span> <span class="s1">'{"response":{"groups":[{"type":"nearby","name":"Nearby","items":[{"id":"4bb9fd9f3db7b7138dbd229a","name":"Pivotal Labs","contact":{"twitter":"pivotalboulder"}'</span><span class="p">}]}]}}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre>


<h4>Trigger Request</h4>
<p>You need to trigger request before you test your Ajax response. You can set a function call, such as:</p>
<pre class="code literal-block"><span></span>  <span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
  <span class="nx">xhr</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">args</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">==</span> <span class="k">this</span><span class="p">.</span><span class="nx">DONE</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">doneFn</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">"GET"</span><span class="p">,</span> <span class="s2">"/some/cool/url"</span><span class="p">);</span>
  <span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
</pre>


<p>Or:</p>
<pre class="code literal-block"><span></span><span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Ajax</span><span class="p">.</span><span class="nx">install</span><span class="p">();</span>
<span class="nx">onSuccess</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">createSpy</span><span class="p">(</span><span class="s1">'onSuccess'</span><span class="p">);</span>
<span class="nx">onFailure</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">createSpy</span><span class="p">(</span><span class="s1">'onFailure'</span><span class="p">);</span>
<span class="nx">foursquare</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FoursquareVenueSearch</span><span class="p">();</span>
<span class="nx">foursquare</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="s1">'40.019461,-105.273296'</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">onSuccess</span><span class="o">:</span> <span class="nx">onSuccess</span><span class="p">,</span>
  <span class="nx">onFailure</span><span class="o">:</span> <span class="nx">onFailure</span>
<span class="p">});</span>
<span class="nx">request</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Ajax</span><span class="p">.</span><span class="nx">requests</span><span class="p">.</span><span class="nx">mostRecent</span><span class="p">();</span>
<span class="c1">//create a request object. This request will not be triggered until you set response</span>
<span class="nx">expect</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">url</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">'venues/search'</span><span class="p">);</span>
<span class="nx">expect</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">method</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">'POST'</span><span class="p">);</span>
<span class="nx">expect</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">data</span><span class="p">()).</span><span class="nx">toEqual</span><span class="p">({</span><span class="nx">latLng</span><span class="o">:</span> <span class="p">[</span><span class="s1">'40.019461, -105.273296'</span><span class="p">]});</span>
<span class="p">});</span>
</pre>


<h4>Set Response</h4>
<p>Use <code>.respondWith()</code> to set response. You need to tell jasmine which response you want to test. For example, based on the code in <strong>Define Mock Response</strong> part, you can test <code>success</code> response:</p>
<pre class="code literal-block"><span></span>  <span class="nx">describe</span><span class="p">(</span><span class="s2">"on success"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">request</span><span class="p">.</span><span class="nx">respondWith</span><span class="p">(</span><span class="nx">TestResponses</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">success</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre>


<p>You can also set the object that you want to have as response:</p>
<pre class="code literal-block"><span></span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Ajax</span><span class="p">.</span><span class="nx">requests</span><span class="p">.</span><span class="nx">mostRecend</span><span class="p">().</span><span class="nx">respondWith</span><span class="p">({</span>
    <span class="s2">"status"</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>
    <span class="s2">"contentType"</span><span class="p">,</span><span class="s1">'text/plain'</span><span class="p">,</span>
    <span class="s2">"responseText"</span><span class="o">:</span> <span class="s1">'test response'</span>
    <span class="p">});</span>
</pre>


<h4>Full Steps</h4>
<p>After these step, you can create <code>it</code> blocks to test your Ajax call. Here is a full example for <code>post</code> from jasmine-ajax Github repo:</p>
<pre class="code literal-block"><span></span>  <span class="nx">describe</span><span class="p">(</span><span class="s2">"FoursquareVenueSearch"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">foursquare</span><span class="p">,</span> <span class="nx">request</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onFailure</span><span class="p">;</span>
  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Ajax</span><span class="p">.</span><span class="nx">install</span><span class="p">();</span>
    <span class="nx">onSuccess</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">createSpy</span><span class="p">(</span><span class="s1">'onSuccess'</span><span class="p">);</span>
    <span class="nx">onFailure</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">createSpy</span><span class="p">(</span><span class="s1">'onFailure'</span><span class="p">);</span>
    <span class="nx">foursquare</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FoursquareVenueSearch</span><span class="p">();</span>
    <span class="nx">foursquare</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="s1">'40.019461,-105.273296'</span><span class="p">,</span> <span class="p">{</span>
      <span class="nx">onSuccess</span><span class="o">:</span> <span class="nx">onSuccess</span><span class="p">,</span>
      <span class="nx">onFailure</span><span class="o">:</span> <span class="nx">onFailure</span>
    <span class="p">});</span>
    <span class="nx">request</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Ajax</span><span class="p">.</span><span class="nx">requests</span><span class="p">.</span><span class="nx">mostRecent</span><span class="p">();</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">url</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">'venues/search'</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">method</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">'POST'</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">data</span><span class="p">()).</span><span class="nx">toEqual</span><span class="p">({</span><span class="nx">latLng</span><span class="o">:</span> <span class="p">[</span><span class="s1">'40.019461, -105.273296'</span><span class="p">]});</span>
  <span class="p">});</span>
  <span class="nx">describe</span><span class="p">(</span><span class="s2">"on success"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">request</span><span class="p">.</span><span class="nx">respondWith</span><span class="p">(</span><span class="nx">TestResponses</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">success</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="nx">it</span><span class="p">(</span><span class="s2">"calls onSuccess with an array of Locations"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">onSuccess</span><span class="p">).</span><span class="nx">toHaveBeenCalled</span><span class="p">();</span>
      <span class="kd">var</span> <span class="nx">successArgs</span> <span class="o">=</span> <span class="nx">onSuccess</span><span class="p">.</span><span class="nx">calls</span><span class="p">.</span><span class="nx">mostRecent</span><span class="p">().</span><span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">successArgs</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">successArgs</span><span class="p">[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">toEqual</span><span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">any</span><span class="p">(</span><span class="nx">Venue</span><span class="p">));</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre>


<p>Other <code>get</code> Ajax call examples can be found on <a href="http://jasmine.github.io/2.3/ajax.html">jasmine website</a>.</p>
<h3>Jasmine-jQuery</h3>
<p><a href="https://github.com/velesin/jasmine-jquery">jasmine-jquery</a> is great to combine Jasmine with jQuery. It provides:</p>
<ul>
<li>
<p>a set of <strong>custom matchers</strong> for jQuery framework</p>
</li>
<li>
<p>an API for handling HTML, CSS, and JSON fixtures in your specs</p>
</li>
</ul>
<h4>Custom Matcher</h4>
<p>You can find a list of useful custom matchers, such as <code>toBeCheck()</code> or <code>toBeSelected()</code> <a href="https://github.com/velesin/jasmine-jquery">here</a>.</p>
<h4>HTML Fixture</h4>
<p>I'm still trying to figure out the best practice to apply HTML Fixture for my working project. HTML Fixture can be used to load HTML content to be used by your tests.</p>
<p>You can find more detailed information about HTML Fixture <a href="https://github.com/velesin/jasmine-jquery">here</a>. For most of my working projects, I need to limit the complexity of all my JavaScript test. Also, instead of <code>html</code>, my work is more involved in <code>jsp</code>, which is really hard to be transferred to pure HTML code for fixture content. Personally I prefer not to write too many fixtures for to simplify my test.</p>
<p>I'll continue to research for the best practice of using HTML Fixture.</p>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/2015/Web%20Development%20Tips/regular-expression.html">Regular Expression</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-08-20T00:00:00-04:00">2015-08-20 00:00</time>
</div>
                <div class="stats">
                                <a href="posts/2015/Web%20Development%20Tips/regular-expression.html#disqus_thread" data-disqus-identifier="cache/posts/2015/Web Development Tips/regular-expression.html">Comments</a>


                </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/javascript.html" rel="tag">JavaScript</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p>A JavaScript Regex Cheatsheet <a href="https://www.debuggex.com/cheatsheet/regex/javascript">online</a>.</p>
<h3>JavaScript Regular Expression</h3>
<h4>Method</h4>
<h5>search</h5>
<p><code>search()</code> uses an expression to search for a match, and returns the position of the match. Return <code>-1</code> if regular expression not match:</p>
<pre class="code literal-block"><span></span><span class="kd">var</span> <span class="nx">str</span> <span class="o">=</span> <span class="s2">"test"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="sr">/^(test)+$/i</span><span class="p">);</span> <span class="c1">//n=0</span>
</pre>


<h5>replace</h5>
<p><code>replace</code>: search pattern and replace it</p>
<pre class="code literal-block"><span></span><span class="kd">var</span> <span class="nx">str</span> <span class="o">=</span> <span class="s2">"test"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/test/i</span><span class="p">,</span> <span class="s2">"new-test"</span><span class="p">);</span>
</pre>


<h5>test</h5>
<p><code>test()</code> searches a string for a pattern, and returns <code>true</code> or <code>false</code>, depending on the result.</p>
<p>Example code from w3cschool:</p>
<pre class="code literal-block"><span></span><span class="kd">var</span> <span class="nx">patt</span> <span class="o">=</span> <span class="sr">/e/</span><span class="p">;</span>
<span class="nx">patt</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="s2">"The best things in life are free!"</span><span class="p">);</span> <span class="c1">//true</span>
</pre>


<h5>exec</h5>
<p><code>exec()</code> searches a string for a specified pattern, and returns <strong>the found text</strong>. If nothing is founded, return <code>null</code>.</p>
<p>Example code from w3cschool:</p>
<pre class="code literal-block"><span></span><span class="sr">/e/</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="s2">"The best things in life are free!"</span><span class="p">);</span> <span class="c1">//e</span>
</pre>


<h4>Modifiers</h4>
<ul>
<li>
<p><code>i</code>: Perform case-insensitive matching</p>
</li>
<li>
<p><code>g</code>: Perform a global match (find all matches rather than stopping after the first match)</p>
</li>
<li>
<p><code>m</code>: Perform a mutiline matching</p>
</li>
</ul>
<h4>Escape</h4>
<p>Use <code>\</code> to <strong>escape</strong> to following items in regular expression: <code>^</code>, <code>$</code>, <code>.</code>, <code>*</code>, <code>+</code>, <code>?</code>, <code>=</code>, <code>!</code>, <code>:</code>, <code>|</code>, <code>\</code>, <code>/</code>, <code>(</code>, <code>)</code>, <code>[</code>, <code>]</code>, <code>{</code>, <code>}</code></p>
<h4>OR</h4>
<p><code>[]</code>: <code>/[abc]/</code> means <code>a</code> or <code>b</code> or <code>c</code></p>
<h4>Except</h4>
<p><code>[^]</code>: <code>/[^abc]/</code> anything except <code>a</code> or <code>b</code> or <code>c</code></p>
<h4>Character</h4>
<p><code>.</code>: any single character <em>except next-line and white-space</em>. i.e. <code>[^\n\r]</code></p>
<p><code>\w</code>: any ASCII single character. i.e. <code>[a-zA-Z0-9]</code></p>
<p><code>\W</code>: any non-ASCII single character. i.e. <code>[^a-zA-Z0-9]</code></p>
<p><code>\d</code>: any digital singe character. i.e. <code>[0-9]</code></p>
<p><code>\D</code>: any non-digital single character. i.e.e <code>[^0-9]</code></p>
<p><code>\s</code>: white-space</p>
<p><code>\S</code>: non-white-space</p>
<h4>Meta Character</h4>
<p><code>\r</code>: Assume you hit <code>Enter</code> key</p>
<p><code>\t</code>: Tab</p>
<p><code>\n</code>: change new line</p>
<p><code>\f</code>: change page</p>
<p><code>\0</code>: empty character</p>
<h4>Repeat</h4>
<p><code>{min, max}</code>: Repeat from min times to max times. Example: <code>/[test]{4,6}/</code> means 't' or <code>e</code> or <code>s</code> or <code>t</code> should be repeated at least 4 times and as most 6 times.</p>
<p><code>{min,}</code> or <code>{,max}</code>: Repeat at least <code>min</code> or at most <code>max</code> times. Example: <code>/[test]{4,}</code> means 't' or <code>e</code> or <code>s</code> or <code>t</code> should be repeated at least 4 times. No maximum times.</p>
<p><code>{n}</code>: Repeat exactly n times.</p>
<p><code>?</code>: Repeat 0 or 1 times</p>
<p><code>+</code>: Repeat 1 or more times</p>
<p><code>*</code>: Repeat 0 or more times</p>
<blockquote>
<p>when we use <code>{min,max}</code>, we may fine more than one corresponding pattern in string. By default result string should be as long as possible. If you want result to be shortest case, add <code>?</code> after <code>{min,max}</code></p>
</blockquote>
<p>Example from: http://www.cnblogs.com/dolphinX/p/3486214.html:</p>
<pre class="code literal-block"><span></span><span class="s1">'123456789'</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\d{3,5}/g</span><span class="p">);</span> <span class="c1">//["12345", "6789"]</span>
<span class="s1">'123456789'</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\d{3,5}?/g</span><span class="p">);</span> <span class="c1">//["123", "456", "789"]</span>
</pre>


<h4>Group and Border</h4>
<p><code>^</code>: Mark start point</p>
<p><code>$</code>: Mark end point</p>
<p><code>\b</code>: all characters except <code>[a-zA-Z0-9]</code></p>
<p>Example from http://www.cnblogs.com/dolphinX/p/3486214.html:</p>
<pre class="code literal-block"><span></span><span class="p">(</span><span class="sr">/\w+\b Byron/</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="s1">'Hi Byron'</span><span class="p">);</span> <span class="c1">//true</span>
<span class="p">(</span><span class="sr">/\w+\b Byron/</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="s1">'Welcome Byron'</span><span class="p">);</span> <span class="c1">//true</span>
<span class="p">(</span><span class="sr">/\w+\b Byron/</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="s1">'HiByron'</span><span class="p">);</span> <span class="c1">//false</span>
</pre>


<p><code>\B</code>: opposite from above</p>
<p><code>()</code>: AND. Example: <code>/(abc)+/</code> means <code>abc</code> or <code>abcabc</code> or more.</p>
<p><code>|</code>: OR. Example: <code>/a|b/</code> means <code>a</code> or <code>b</code></p>
<h4>Frequently Used Regular Expressions</h4>
<p>Examples below are taken from <a href="http://kb.cnblogs.com/page/80965/">this post</a>:</p>
<ul>
<li>
<p>Non-negative Integer: <code>^\d+$</code></p>
</li>
<li>
<p>Positive Integer: <code>^[0-9]*[1-9][0-9]*$</code></p>
</li>
<li>
<p>Non-positive Integer: <code>^((-\d+)|(0+))$</code></p>
</li>
<li>
<p>Negative Integer: <code>^-[0-9]*[1-9][0-9]*$</code></p>
</li>
<li>
<p>Integer: <code>^-?\d+$</code></p>
</li>
<li>
<p>Non-negative Float: <code>^\d+(\.\d+)?$</code></p>
</li>
<li>
<p>Positive Float: <code>^(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$</code></p>
</li>
<li>
<p>Non-positive Float: <code>^((-\d+(\.\d+)?)|(0+(\.0+)?))$</code></p>
</li>
<li>
<p>Negative Float: <code>^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$</code></p>
</li>
<li>
<p>Float: <code>^(-?\d+)(\.\d+)?$</code></p>
</li>
<li>
<p>String with all letters: <code>^[A-Za-z]+$</code></p>
</li>
<li>
<p>String with all upper case letters: <code>^[A-Z]+$</code></p>
</li>
<li>
<p>String with all lower case letters: <code>^[a-z]+$</code></p>
</li>
<li>
<p>String with number and letters: <code>^[A-Za-z0-9]+$</code></p>
</li>
<li>
<p>String with number, letters and underline: <code>^\w+$</code></p>
</li>
<li>
<p><strong>Email Address</strong> validation: <code>^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$</code></p>
</li>
<li>
<p><strong>URL</strong> Validation: <code>^[a-zA-z]+://</code> <code>(\w+(-\w+)*)(\.(\w+(-\w+)*))*(\?\S*)?$</code></p>
</li>
<li>
<p><strong>HTML Tag</strong>: <code>&lt;\s*(\S+)(\s[^&gt;]*)?&gt;(.*?)&lt;\s*\/\1\s*&gt;</code></p>
</li>
</ul>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/2015/JavaScript/javascript-tips.html">JavaScript Tips</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-08-17T00:00:00-04:00">2015-08-17 00:00</time>
</div>
                <div class="stats">
                                <a href="posts/2015/JavaScript/javascript-tips.html#disqus_thread" data-disqus-identifier="cache/posts/2015/JavaScript/javascript-tips.html">Comments</a>


                </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/javascript.html" rel="tag">JavaScript</a></li>
           <li><a class="tag p-category" href="categories/jquery.html" rel="tag">jQuery</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<h3>JavaScript String</h3>
<h4>Substring</h4>
<p>There are two ways in JavaScript to get substring:</p>
<h5>
<code>substr(StartIndex, Length)</code>:</h5>
<p>Takes two parameter: <strong>StartIndex</strong> and <strong>Length of Substring (Optional)</strong></p>
<h5><code>substring(StartIndex, EndIndex)</code></h5>
<p>Takes two parameter: <strong>StartIndex (inclusive)</strong> and <strong>EndIndex (exclusive)</strong>. EndIndex is optional.</p>
<p>If "start" is greater than "end", this method will swap the two arguments, meaning str.substring(1,4) == str.substring(4,1).</p>
<p>If either "start" or "stop" is less than 0, it is treated as if it were 0.</p>
<blockquote>
<p>Note: Both methods do not change the original string.</p>
</blockquote>
<h5>Special Cases</h5>
<p>The two methods above have difference usage for following spceial cases:</p>
<p><strong>Negative Value</strong></p>
<p><code>substr()</code> and <code>substring()</code> can both take negative value parameters as <code>StartIndex</code>, which means starting to count from end of string.</p>
<p><code>substr()</code> can take <code>Length</code> parameter as negative number, but it will return a <strong>empty String</strong>.</p>
<p><code>substring()</code> can take <code>EndIndex</code> as negative value, but <strong>this value will be ignored, and substring will start from position 0, has same length as Start Index</strong>.</p>
<blockquote>
<p>If you only have one negative index, whole string will be returned, If you have a negative Start Index, nothing will be returned</p>
</blockquote>
<p>So, if you want to <strong>take substring from the end of string</strong>, using <code>substr()</code>. Start from where your substring start, and length is what you need, or <code>str.length - startIndex</code> if you want rest of string.</p>
<blockquote>
<p>Remember you substring has same sequence as original string. It's not reversed.</p>
</blockquote>
<h3>JavaScript KeyCode and Related Information</h3>
<h4>Two Way of Event Binding</h4>
<pre class="code literal-block"><span></span><span class="nx">$</span><span class="p">(</span><span class="s1">'#inputbox_id'</span><span class="p">).</span><span class="nx">bind</span><span class="p">(</span><span class="s1">'input'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
    <span class="c1">//event.keyCode...</span>
<span class="p">}</span>
<span class="c1">//Second way: you may want keydown/keypress event also</span>
<span class="nx">$</span><span class="p">(</span><span class="s1">'#inputbox_id'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'keyup'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
<span class="cm">/*</span>
<span class="cm">*When you use copy and paster instead of key input, this way may cause double event trigger, so I prefer the way above</span>
<span class="cm">*/</span>
<span class="p">}</span>
</pre>


<h4>Common KeyCode</h4>
<ul>
<li>
<p><code>Delete</code>:46</p>
</li>
<li>
<p><code>Backspace</code>: 8</p>
</li>
<li>
<p><code>Enter</code>: 13</p>
</li>
<li>
<p><code>Tab</code>: 9</p>
</li>
</ul>
<p>You can refer this <a href="http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes">cheatsheet</a> for more keycode information.</p>
<h4>Special Cases</h4>
<p>From <a href="http://stackoverflow.com/questions/4084715/javascript-e-keycode-doesnt-catch-backspace-del-in-ie">this stackflow post</a>, IE doesn't fire <strong>keypress</strong> event for delete, end, enter, escape, function keys, home, insert, pageUp/Down and tab. So use <strong>keydown</strong> or <strong>keyup</strong> instead.</p>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/2015/JavaScript/possible-ajax-error-code-and-reasons.html">Possible Ajax Error Code and Reasons</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-08-13T00:00:00-04:00">2015-08-13 00:00</time>
</div>
                <div class="stats">
                                <a href="posts/2015/JavaScript/possible-ajax-error-code-and-reasons.html#disqus_thread" data-disqus-identifier="cache/posts/2015/JavaScript/possible-ajax-error-code-and-reasons.html">Comments</a>


                </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/ajax.html" rel="tag">Ajax</a></li>
           <li><a class="tag p-category" href="categories/java.html" rel="tag">Java</a></li>
           <li><a class="tag p-category" href="categories/jquery.html" rel="tag">jQuery</a></li>
           <li><a class="tag p-category" href="categories/json.html" rel="tag">JSON</a></li>
           <li><a class="tag p-category" href="categories/spring-mvc.html" rel="tag">Spring MVC</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<h3>400 (Bad Request)</h3>
<ul>
<li>
<p>In jQuery, no <code>JSON.stringify()</code> is used to parse JavaScript object to JSON object</p>
</li>
<li>
<p>Use <code>$.ajax()</code> but doesn't include <code>type: "GET/POST/etc"</code> in AJAX body</p>
</li>
</ul>
<h3>406 (Not Acceptable Response)</h3>
<ul>
<li>Check your authority setting. One of my Spring MVC project has requirement:  user group 1 can only access sub-URL of <code>/test/user1</code>. So if I make a URL mapping to <code>/test/</code>, AJAX call will fail and give me a <code>406</code> error</li>
</ul>
<h3>404 (Not Found Errors)</h3>
<p>Very common error. Can have different reasons:</p>
<ul>
<li>
<p><code>dataType</code>, <code>contentType</code>, <code>mimeType</code> may not corresponding to correct type.</p>
</li>
<li>
<p>In Spring MVC, no <code>@ResponseBody</code> or <code>@RequestBody</code> is added in controller. For example: <code>public @ResponseBody String test(@RequestBody final String id)</code> is good. But <code>public String test(@RequestBody final String id)</code> can generate a 404 error in client side.</p>
</li>
</ul>
<h3>No response (Back-end finsih processing but front-end give no response)</h3>
<ul>
<li>Check your jQuery version and check if you are using <code>$.ajax({done: function(data../){}, fail: function(jqXHR...){}});</code>. If so, try to check your jQuery to later version, or replace with <code>$.ajax({success: function(data...){}, error: function(jqXHR...) })</code>
</li>
</ul>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/2015/Web%20Development%20Tips/setting-up-ror-hydra-environment-problems-and-solutions.html">Setting up RoR/Hydra Environment - Problems and Solutions</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-08-12T00:00:00-04:00">2015-08-12 00:00</time>
</div>
                <div class="stats">
                                <a href="posts/2015/Web%20Development%20Tips/setting-up-ror-hydra-environment-problems-and-solutions.html#disqus_thread" data-disqus-identifier="cache/posts/2015/Web Development Tips/setting-up-ror-hydra-environment-problems-and-solutions.html">Comments</a>


                </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/hydra.html" rel="tag">Hydra</a></li>
           <li><a class="tag p-category" href="categories/linux.html" rel="tag">Linux</a></li>
           <li><a class="tag p-category" href="categories/ruby-on-rails.html" rel="tag">Ruby on Rails</a></li>
           <li><a class="tag p-category" href="categories/ubuntu.html" rel="tag">Ubuntu</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<h3>Ubuntu 15.10</h3>
<p>If you want to setup your RoR environment on Ubuntu 14/15, <a href="https://gorails.com/setup/ubuntu/15.04">this post</a> is the best choice for you. I used <code>rvm</code> to install Ruby on my two Ubuntu 15.10 machine, and it worked like a charm.</p>
<h4>Problem</h4>
<p>When I tried to run <code>\curl -L https://get.rvm.io | bash -s stable --ruby</code> in terminal to install both RVM and Ruby, I got following error message:</p>
<pre class="code literal-block"><span></span><span class="nv">Error</span> <span class="s s-Atom">running</span> <span class="s s-Atom">'requirements_debian_update_system ruby-2.2.1'</span><span class="p">,</span>
<span class="s s-Atom">showing</span> <span class="s s-Atom">last</span> <span class="mi">15</span> <span class="s s-Atom">lines</span> <span class="s s-Atom">of</span> <span class="o">/</span><span class="s s-Atom">usr</span><span class="o">/</span><span class="s s-Atom">local</span><span class="o">/</span><span class="s s-Atom">rvm</span><span class="o">/</span><span class="s s-Atom">log</span><span class="o">/</span><span class="mi">1439385591</span><span class="k">_</span><span class="s s-Atom">ruby</span><span class="o">-</span><span class="mf">2.2.1</span><span class="o">/</span><span class="s s-Atom">update_system</span><span class="p">.</span><span class="s s-Atom">log</span>
<span class="s s-Atom">++</span> <span class="o">/</span><span class="s s-Atom">scripts</span><span class="o">/</span><span class="s s-Atom">functions</span><span class="o">/</span><span class="s s-Atom">logging</span> <span class="s s-Atom">:</span> <span class="nf">rvm_pretty_print</span><span class="p">()</span>  <span class="mi">78</span> <span class="o">&gt;</span> <span class="s s-Atom">case</span> <span class="s2">"${TERM:-dumb}"</span> <span class="s s-Atom">in</span>
<span class="s s-Atom">++</span> <span class="o">/</span><span class="s s-Atom">scripts</span><span class="o">/</span><span class="s s-Atom">functions</span><span class="o">/</span><span class="s s-Atom">logging</span> <span class="s s-Atom">:</span> <span class="nf">rvm_pretty_print</span><span class="p">()</span>  <span class="mi">81</span> <span class="o">&gt;</span> <span class="s s-Atom">case</span> <span class="s2">"$1"</span> <span class="s s-Atom">in</span>
<span class="s s-Atom">++</span> <span class="o">/</span><span class="s s-Atom">scripts</span><span class="o">/</span><span class="s s-Atom">functions</span><span class="o">/</span><span class="s s-Atom">logging</span> <span class="s s-Atom">:</span> <span class="nf">rvm_pretty_print</span><span class="p">()</span>  <span class="mi">83</span> <span class="o">&gt;</span> <span class="p">[[</span> <span class="o">-</span><span class="s s-Atom">t</span> <span class="mi">2</span> <span class="p">]]</span>
<span class="s s-Atom">++</span> <span class="o">/</span><span class="s s-Atom">scripts</span><span class="o">/</span><span class="s s-Atom">functions</span><span class="o">/</span><span class="s s-Atom">logging</span> <span class="s s-Atom">:</span> <span class="nf">rvm_pretty_print</span><span class="p">()</span>  <span class="mi">83</span> <span class="o">&gt;</span> <span class="s s-Atom">return</span> <span class="mi">1</span>
<span class="s s-Atom">++</span> <span class="o">/</span><span class="s s-Atom">scripts</span><span class="o">/</span><span class="s s-Atom">functions</span><span class="o">/</span><span class="s s-Atom">logging</span> <span class="s s-Atom">:</span> <span class="nf">rvm_error</span><span class="p">()</span>  <span class="mi">117</span> <span class="o">&gt;</span> <span class="s s-Atom">printf</span> <span class="c1">%b 'There has been error while updating '\''apt-get'\'', please give it some time and try again later.</span>
<span class="mi">404</span> <span class="s s-Atom">errors</span> <span class="s s-Atom">should</span> <span class="s s-Atom">be</span> <span class="s s-Atom">fixed</span> <span class="s s-Atom">for</span> <span class="s s-Atom">rvm</span> <span class="s s-Atom">to</span> <span class="s s-Atom">proceed</span><span class="p">.</span> <span class="nv">Check</span> <span class="s s-Atom">your</span> <span class="s s-Atom">sources</span> <span class="s s-Atom">configured</span> <span class="nn">in</span><span class="p">:</span>
    <span class="o">/</span><span class="s s-Atom">etc</span><span class="o">/</span><span class="s s-Atom">apt</span><span class="o">/</span><span class="s s-Atom">sources</span><span class="p">.</span><span class="s s-Atom">list</span>
    <span class="o">/</span><span class="s s-Atom">etc</span><span class="o">/</span><span class="s s-Atom">apt</span><span class="o">/</span><span class="s s-Atom">sources</span><span class="p">.</span><span class="s s-Atom">list</span><span class="p">.</span><span class="s s-Atom">d</span><span class="cm">/*.list</span>
<span class="cm">\n'</span>
<span class="cm">There has been error while updating 'apt-get', please give it some time and try again later.</span>
<span class="cm">404 errors should be fixed for rvm to proceed. Check your sources configured in:</span>
<span class="cm">    /etc/apt/sources.list</span>
<span class="cm">    /etc/apt/sources.list.d/*.list</span>
<span class="cm">++ /scripts/functions/requirements/ubuntu : requirements_debian_update_system()  53 &gt; return 100</span>
<span class="cm">Requirements installation failed with status: 100.</span>
</pre>


<p>The reason of this error is because RVM will bring error if my Ubuntu machine's <code>apt-get update</code> has error in it. I used to install Ninja-IDE through <code>apt-get</code> and I had PPA error when I do <code>apt-get update</code>. You can view <a href="http://stackoverflow.com/questions/23650992/ruby-rvm-apt-get-update-error">this stackoverflow post</a>.</p>
<h4>Solution</h4>
<p>A user <strong>Avinash Raj</strong> posted a great solution in <a href="http://askubuntu.com/questions/65911/how-can-i-fix-a-404-error-when-using-a-ppa-or-updating-my-package-lists">Ubuntu community</a> for removing PPA with errors.</p>
<p>The detail of solution is: create a file called <code>ppa-remove</code> (no <code>.sh</code> extension) as following:</p>
<pre class="code literal-block"><span></span><span class="ch">#!/bin/bash</span>
sudo rm /tmp/update.txt<span class="p">;</span> tput setaf 6<span class="p">;</span> <span class="nb">echo</span> <span class="s2">"Initializing.. Please Wait"</span>
sudo apt-get update &gt;&gt; /tmp/update.txt 2&gt;<span class="p">&amp;</span>1<span class="p">;</span> awk <span class="s1">'( /W:/ &amp;&amp; /launchpad/ &amp;&amp; /404/ ) { print substr($5,26) }'</span> /tmp/update.txt &gt; /tmp/awk.txt<span class="p">;</span> awk -F <span class="s1">'/'</span> <span class="s1">'{ print $1"/"$2 }'</span> /tmp/awk.txt &gt; /tmp/awk1.txt<span class="p">;</span> sort -u /tmp/awk1.txt &gt; /tmp/awk2.txt
tput sgr0
<span class="k">if</span> <span class="o">[</span> -s /tmp/awk2.txt <span class="o">]</span>
<span class="k">then</span>
  tput setaf 1
  <span class="nb">printf</span> <span class="s2">"PPA's going to be removed\n%s\n"</span> <span class="s2">"</span><span class="k">$(</span>cat /tmp/awk2.txt<span class="k">)</span><span class="s2">"</span>
  tput sgr0
  <span class="k">while</span> <span class="nb">read</span> -r line<span class="p">;</span> <span class="k">do</span> <span class="nb">echo</span> <span class="s2">"sudo add-apt-repository -r ppa:</span><span class="nv">$line</span><span class="s2">"</span><span class="p">;</span> <span class="k">done</span> &lt; /tmp/awk2.txt &gt; out
  bash out
<span class="k">else</span>
  tput setaf 1
  <span class="nb">echo</span> <span class="s2">"No PPA's to be removed"</span>
  tput sgr0
<span class="k">fi</span>
</pre>


<p>Run <code>sudo chmod +x ppa-remove</code> after you create this file, then move this file to <code>/usr/bin</code>. Run <code>sudo ppa-remove</code>. Your PPA with errors will be removed and you can then re-run <code>\curl -L https://get.rvm.io | bash -s stable</code> or <code>\curl -L https://get.rvm.io | bash -s stable --ruby</code> to install RVM.</p>
<p><em>Note: Till Aug 2015, If you run <code>\curl -L https://get.rvm.io | bash -s stable --ruby</code>, you will automatically get Ruby 2.2.1 installed. If you run <code>\curl -L https://get.rvm.io | bash -s stable</code> then install Ruby, you can choose Ruby 2.2.2. These two versions do not have conflict.</em></p>
<h3>Mac OS Yoemite</h3>
<p>RoR installation process for Mac OS Yosemite is almost the same as Ubuntu. Make sure you have <code>xcode</code> and <code>Homebrew</code> installed first. This <a href="http://railsapps.github.io/installrubyonrails-mac.html">post</a> has very detailed description that you can follow.</p>
<h3>Project Hydra</h3>
<p>I had a <a href="http://pengyin-shan.com/blog/dive-into-hydra-and-my-thoughts">post</a> describing my thoughts about Hydra. In this post I will include detail of installation part.</p>
<p>After you finish RoR setting (make sure you have <code>Bundle</code> installed by <code>RubyGem</code>), you want to generate a basic rails app, then add <code>gem 'hydra', '9.1.0.rc1'</code> to your <code>Gemfile</code>. you can re-run <code>Bundle install</code> to install all necessary ruby gems for Hydra.</p>
<blockquote>
<p>If you are creating Hydra head for the first time, run <code>rails generate hydra:install</code> to use Hydra generator. If you done this once and you want to setup this project in a new machine, you should skip this step because your old blacklight files will be overwritten.</p>
</blockquote>
<p>You can use same Gemfile to set up Hydra environment in different machines, but <strong>make sure you run <code>rake jetty:config</code> and <code>rake db:migrate</code></strong> to prevent possible problem.</p>
<p>You can run <code>Rails.env</code> in rails console to check your current environment.</p>
<h4>Problem: Data Immigration for Existing Project</h4>
<p>How to transfer previous data (Fedora files, Solr documents and indexes) to your new environment?</p>
<h4>Solution</h4>
<p>Well, I'm working on solution now :) To figure out a way I did lots of experiments (and made a big mess) in my Hydra project. I started a new post about it <a href="http://pengyin-shan.com/blog/play-with-hydra-data">here</a>.</p>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/2015/Others/play-with-hydra-data.html">A Journal of Playing with Hydra Data</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-08-12T00:00:00-04:00">2015-08-12 00:00</time>
</div>
                <div class="stats">
                                <a href="posts/2015/Others/play-with-hydra-data.html#disqus_thread" data-disqus-identifier="cache/posts/2015/Others/play-with-hydra-data.html">Comments</a>


                </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/fedora.html" rel="tag">Fedora</a></li>
           <li><a class="tag p-category" href="categories/hydra.html" rel="tag">Hydra</a></li>
           <li><a class="tag p-category" href="categories/solr.html" rel="tag">Solr</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<h3>Data Immigration</h3>
<p><em>This part is based on the <a href="https://github.com/projecthydra/hydra/wiki/Dive-into-Hydra">dive-into-hydra</a> tutorial project.</em></p>
<p>What should I do to immigrate Hydra Data (Fedora files, Solr documents and indexes, etc) from one Hydra project to another project?</p>
<p>To figure out a way, I have explored following items:</p>
<h4>Step 1: SQLite3</h4>
<p><strong>8/12/15</strong></p>
<p>My first idea is to check database. Tutorial project uses SQLite3 as database. All files are included in <code>/db</code> folder. Before going to production, you may get <code>developer.sqlite3</code>, <code>test.sqlite3</code>.</p>
<p>I used <code>SQLiteStudio</code> to open these two SQLite3 databases. Each database has four tables, which are:</p>
<ul>
<li>
<p><code>bookmarks</code>: save information when a bookmark is created. Sample Fields: <code>user_id</code>, <code>document_id</code>, <code>title</code>, <code>created_at</code>, etc</p>
</li>
<li>
<p><code>schema_migrations</code>: version of query schema</p>
</li>
<li>
<p><code>searches</code>: save information when a search operation is performed. Sample Fields: <code>user_id</code>, <code>query_params</code>, <code>created_at</code>, etc</p>
</li>
<li>
<p><code>users</code>: user information. Sample Fields: <code>email</code>, <code>current_sign_in_ip</code>, <code>encrpted_password</code>, etc.</p>
</li>
</ul>
<p>It seems that database(SQLite3) here is used to record information in search process, after all previous data has been immigrated.</p>
<p>Now my question is: <em>Does Hydra have a solution?</em></p>
<h4>Step 2: Hydra</h4>
<p><strong>8/12/15</strong></p>
<p>I did some research about a full immigration solution in Hydra. I didn't find any result, which is nature because Hydra includes so many components: Fedora, Solr, Blacklight, etc. It would be extremely hard to transfer all data from these components once, without any error.</p>
<p>After I re-think my requirement, I realize this is what I want: <strong>Get all data from Fedora in old project -&gt; Put it to Fedora in new project, with same structure -&gt; Solr in new project re-indexing -&gt; Blacklight can find new documents</strong></p>
<p>Now I want to start the process of <em>export and import Fedora data</em>.</p>
<h4>Step 3: Fedora</h4>
<p><strong>8/12/15</strong></p>
<h5>Data Export</h5>
<p>Fedora4 provides a <a href="https://wiki.duraspace.org/display/FEDORA40/RESTful+HTTP+API">RESTful HTTP API</a> for data processing.</p>
<p>To export serialized form of a resource, <strong>with all subtress and binary content</strong>, run following in your terminal (I adjust path based on my project):</p>
<pre class="code literal-block"><span></span>curl -u fedoraAdmin:fedoraAdmin http://127.0.0.1:8983/fedora/dev/fcr:export?recurse=true&amp;skipBinary=false"
</pre>


<p>Make sure to use your own fedora username and password.</p>
<p>This command will generate a group of <code>xml</code> code, save it to a <code>xml</code> file, such as <code>FedoraExport.xml</code>.</p>
<h5>Data Import</h5>
<p>Now go to your new project and get a copy of your exported xml file. Run following command to import:</p>
<pre class="code literal-block"><span></span>curl -u fedoraAdmin:fedoraAdmin -X POST --data-binary "@FedoraExport.xml" "http://127.0.0.1:8983/fedora/rest/dev/fcr:import?format=jcr/xml"
</pre>


<p>Now restart jetty and navigate to <code>http://127.0.0.1:8983/fedora/rest/dev</code>. I'll be able to see all data, includes all subtrees, in the Fedora of new project.</p>
<p>I also noticed Fedora UI can import and export xml files. However, there is no recursive export feature there.</p>
<blockquote>
<p>Problem: When I followed tutorial project, I made all the book nodes under /fedora/rest/dev. When I did export, I had to export dev node to make sure it includes book childnodes. After I imported dev node to new /fedora/rest/dev, I realized I had two dev nodes now. Another solution is to replace new fedora's dev node. However after I imported dev node directly to /fedora/rest, the new dev node will show as 'dev%5B2%5D' instead of 'dev'.</p>
<p>Possible Solution: I should create a summary node, which includes all my books data. I export this summary node and import it to /fedora/rest/dev. Now I can have exactly same structure as old fedora.</p>
</blockquote>
<p>Now I want to start the process of <em>Solr re-indexing</em>.</p>
<h4>Step 4: Solr</h4>
<p>Working in process :)</p>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/2015/JavaScript/angularjs-basics.html">AngularJS Basics</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-08-11T00:00:00-04:00">2015-08-11 00:00</time>
</div>
                <div class="stats">
                                <a href="posts/2015/JavaScript/angularjs-basics.html#disqus_thread" data-disqus-identifier="cache/posts/2015/JavaScript/angularjs-basics.html">Comments</a>


                </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/angularjs.html" rel="tag">AngularJS</a></li>
           <li><a class="tag p-category" href="categories/javascript.html" rel="tag">JavaScript</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<h3>Resouce List</h3>
<ul>
<li>
<p><a href="http://www.tutorialspoint.com/angularjs">AngularJS Tutorial on tutorialspoint.com</a></p>
</li>
<li>
<p><a href="https://docs.angularjs.org">AngularJS Official API Doc</a></p>
</li>
</ul>
<h3>Core Features</h3>
<ul>
<li>
<p><code>Data-binding</code>: Two-way data-binding between model and view components.</p>
</li>
<li>
<p><code>Scope</code>: Objects that refer to the model</p>
</li>
<li>
<p><code>Controller</code>: The controller for a specific scope</p>
</li>
<li>
<p><code>Services</code>: Built-in services for functions such as <code>XMLHttpRequests</code>.</p>
</li>
<li>
<p><code>Filters</code>: Generate a new array from a subset of items in an old array.</p>
</li>
<li>
<p><code>Directives</code>: Create custom HTML tags as new widgets.</p>
</li>
<li>
<p><code>Templates</code>: The "View" part in MV* structure</p>
</li>
<li>
<p><code>Routing</code>: Switching between different views</p>
</li>
<li>
<p><code>MVVM</code>: Instead of purse MVC structure, AngularJS is a <code>MVVM</code> (Model-View-ViewModel) structure.</p>
</li>
<li>
<p><code>Deep Linking</code>: Bookmark current state of application in URL so that this state can be restored later.</p>
</li>
<li>
<p><code>Dependency Injection</code>: The DI system in AngularJS</p>
</li>
</ul>
<p>A description graph from tutorialspoint.com:</p>
<p>../images/articles/2015/javascript/angularjs_concepts.jpg </p>
<h3>Three Major Parts</h3>
<ul>
<li>
<p><code>ng-app</code>: Link a AngularJS application to HTML.</p>
</li>
<li>
<p><code>ng-model</code>: Bind the value of AngularJS application data to HTML input controls</p>
</li>
<li>
<p><code>ng-bind</code>: Bind angularJS application to HTML tags.</p>
</li>
</ul>
<h3>Controller</h3>
<p>HTML:</p>
<pre class="code literal-block"><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-app</span><span class="o">=</span><span class="s">""</span> <span class="na">ng-controller</span><span class="o">=</span><span class="s">"testController"</span><span class="p">&gt;</span>
    Test Name 1: {{names.name1}}
    Test Name 2: {{names.name2}}
    Test Name 3: {{names.name3()}}
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre>


<p>JS:</p>
<pre class="code literal-block"><span></span><span class="kd">function</span> <span class="nx">testController</span><span class="p">(</span><span class="nx">$scope</span><span class="p">){</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">names</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">name1</span><span class="o">:</span> <span class="s1">'a'</span><span class="p">,</span>
        <span class="nx">name2</span><span class="o">:</span> <span class="s1">'b'</span><span class="p">,</span>
        <span class="nx">name3</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
            <span class="k">return</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">name1</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>


<h3>Type of Filters</h3>
<ul>
<li>
<p><code>uppercase</code></p>
</li>
<li>
<p><code>lowercase</code></p>
</li>
<li>
<p><code>currency</code></p>
</li>
<li>
<p><code>filter</code>: example <code>ng-repeat='name in names | filter: firstname'</code></p>
</li>
<li>
<p><code>orderby</code></p>
</li>
</ul>
<h3>HTML DOM Control</h3>
<ul>
<li>
<p><code>ng-disabled</code>: disable a given control.</p>
</li>
<li>
<p><code>ng-show</code>: show a given control.</p>
</li>
<li>
<p><code>ng-hide</code>: hide a give control.</p>
</li>
<li>
<p><code>ng-click</code>: a AngularJS click event.</p>
</li>
</ul>
<p>Example:</p>
<pre class="code literal-block"><span></span><span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"checkbox"</span> <span class="na">ng-model</span><span class="o">=</span><span class="s">"checkboxmodel"</span><span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">ng-disabled</span><span class="o">=</span><span class="s">'checkboxmodel'</span><span class="p">&gt;</span>Disable/Enable this Button<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</pre>


<h3>Module</h3>
<ul>
<li>
<p><code>Application Module</code>: Initialize application with controller</p>
<ul>
<li>Example: <code>var myApp = angular.module('myApp, []);</code>
</li>
</ul>
</li>
<li>
<p><code>Controller Module</code>: Define the controller. Example is in "Controller" section</p>
</li>
</ul>
<h3>ng-events</h3>
<ul>
<li>
<p><code>ng-click</code></p>
</li>
<li>
<p><code>ng-dbl-click</code></p>
</li>
<li>
<p><code>ng-mousedown</code></p>
</li>
<li>
<p><code>ng-mouseup</code></p>
</li>
<li>
<p><code>ng-mousenter</code></p>
</li>
<li>
<p><code>ng-mouseleave</code></p>
</li>
<li>
<p><code>ng-mousemove</code></p>
</li>
<li>
<p><code>ng-mouseover</code></p>
</li>
<li>
<p><code>ng-keydown</code></p>
</li>
<li>
<p><code>ng-keyup</code></p>
</li>
<li>
<p><code>ng-keypress</code></p>
</li>
<li>
<p><code>ng-change</code></p>
</li>
</ul>
<h3>Forms</h3>
<h4>Data Validation</h4>
<ul>
<li>
<p><code>$dirty</code>: Notify when a value is changed</p>
</li>
<li>
<p><code>$invalid</code>: Notify when a value is invalided</p>
</li>
<li>
<p><code>$error</code>: Point out the error</p>
</li>
</ul>
<p>Example from tutorspoint:</p>
<pre class="code literal-block"><span></span><span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Enter last name: <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">name</span><span class="o">=</span><span class="s">"lastname"</span>  <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">ng-model</span><span class="o">=</span><span class="s">"lastName"</span> <span class="na">required</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">style</span><span class="o">=</span><span class="s">"color:red"</span> <span class="na">ng-show</span><span class="o">=</span><span class="s">"studentForm.lastname.$dirty &amp;&amp; studentForm.lastname.$invalid"</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">span</span> <span class="na">ng-show</span><span class="o">=</span><span class="s">"studentForm.lastname.$error.required"</span><span class="p">&gt;</span>Last Name is required.<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
       <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</pre>


<h3>ng-includes</h3>
<p><code>ng-includes</code> is used to include partial views, which is similar to
<code>&lt;jsp:include page = "../../test.jsp"/&gt;</code> in JSP page.</p>
<p>Example from tutorialspoint.com:</p>
<pre class="code literal-block"><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-app</span><span class="o">=</span><span class="s">""</span> <span class="na">ng-controller</span><span class="o">=</span><span class="s">"studentController"</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-include</span><span class="o">=</span><span class="s">"'main.htm'"</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-include</span><span class="o">=</span><span class="s">"'subjects.htm'"</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre>


<h3>AJAX in AngularJS</h3>
<p>Similar as jQuery, the format of AJAX is following:</p>
<pre class="code literal-block"><span></span><span class="nx">$http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/someUrl'</span><span class="p">).</span>
  <span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// this callback will be called asynchronously</span>
    <span class="c1">// when the response is available</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// called asynchronously if an error occurs</span>
    <span class="c1">// or server returns response with an error status.</span>
  <span class="p">});</span>

<span class="o">:::</span><span class="nx">javascript</span>
<span class="c1">// Simple POST request example (passing data) :</span>
<span class="nx">$http</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">'/someUrl'</span><span class="p">,</span> <span class="p">{</span><span class="nx">msg</span><span class="o">:</span><span class="s1">'hello word!'</span><span class="p">}).</span>
  <span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// this callback will be called asynchronously</span>
    <span class="c1">// when the response is available</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// called asynchronously if an error occurs</span>
    <span class="c1">// or server returns response with an error status.</span>
  <span class="p">});</span>
</pre>


<p>Since AngularJS Ajax involves in some other knowledge, I will write extra post about this.</p>
<h3>Views</h3>
<h4>ng-view</h4>
<p>Just create a placeholder for easier configuration:</p>
<pre class="code literal-block"><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-view</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre>


<h4>ng-template</h4>
<p>Create a view with <code>id</code>. This view will be map to a controller using <code>$routeProvider</code>.</p>
<p>Example from tutorialspoint.com:</p>
<pre class="code literal-block"><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-app</span><span class="o">=</span><span class="s">"mainApp"</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">"text/ng-template"</span> <span class="na">id</span><span class="o">=</span><span class="s">"addStudent.htm"</span><span class="p">&gt;</span>
      <span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span> <span class="nx">Add</span> <span class="nx">Student</span> <span class="o">&lt;</span><span class="err">/h2&gt;</span>
         <span class="p">{{</span><span class="nx">message</span><span class="p">}}</span>
   <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre>


<h4>$routeProvider</h4>
<p><code>$routeProvider</code> configure urls and map to corresponding views. The controller for that corresponding view will also be attached. It works similar to <code>@RequestMapping(value='...')</code> function in Spring MVC framework.</p>
<p>Example from tutorialspoint.com:</p>
<pre class="code literal-block"><span></span><span class="c1">//You need to add ngRoute to application controller</span>
<span class="kd">var</span> <span class="nx">mainApp</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">"mainApp"</span><span class="p">,</span> <span class="p">[</span><span class="s1">'ngRoute'</span><span class="p">]);</span>
<span class="c1">//templateUrl maps the id defined in ng-template</span>
<span class="nx">mainApp</span><span class="p">.</span><span class="nx">config</span><span class="p">([</span><span class="s1">'$routeProvider'</span><span class="p">,</span>
     <span class="kd">function</span><span class="p">(</span><span class="nx">$routeProvider</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$routeProvider</span><span class="p">.</span>
           <span class="nx">when</span><span class="p">(</span><span class="s1">'/addStudent'</span><span class="p">,</span> <span class="p">{</span>
              <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'addStudent.htm'</span><span class="p">,</span>
              <span class="c1">//addStudent.htm should be the same path as main.htm</span>
              <span class="nx">controller</span><span class="o">:</span> <span class="s1">'AddStudentController'</span>
           <span class="p">}).</span>
           <span class="nx">when</span><span class="p">(</span><span class="s1">'/viewStudents'</span><span class="p">,</span> <span class="p">{</span>
              <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'viewStudents.htm'</span><span class="p">,</span>
              <span class="nx">controller</span><span class="o">:</span> <span class="s1">'ViewStudentsController'</span>
           <span class="p">}).</span>
           <span class="nx">otherwise</span><span class="p">({</span>
              <span class="c1">//Default View</span>
              <span class="nx">redirectTo</span><span class="o">:</span> <span class="s1">'/addStudent'</span>
           <span class="p">});</span>
<span class="p">}]);</span>
</pre>


<h3>Scope</h3>
<p><code>$scope</code> is passed as first argument to controller during its constructor definition.</p>
<ul>
<li>
<p><strong>Scope is controller specific.</strong></p>
</li>
<li>
<p><strong>Child controller can inherit scope from parent controller.</strong></p>
</li>
<li>
<p><strong>Scope in parent controller can be overwritten by child controller</strong>.</p>
</li>
</ul>
<p>Example from tutorialspoint.com:</p>
<pre class="code literal-block"><span></span><span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
  <span class="kd">var</span> <span class="nx">mainApp</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">"mainApp"</span><span class="p">,</span> <span class="p">[]);</span>
  <span class="nx">mainApp</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s2">"shapeController"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">$scope</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="s2">"In shape controller"</span><span class="p">;</span>
     <span class="nx">$scope</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s2">"Shape"</span><span class="p">;</span>
  <span class="p">});</span>
  <span class="nx">mainApp</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s2">"circleController"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">$scope</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="s2">"In circle controller"</span><span class="p">;</span>  <span class="c1">//Overwritten</span>
  <span class="p">});</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>
</pre>


<h3>Service</h3>
<p>Services are JavaScript functions and are responsible to do a <strong>specific tasks</strong> **only.</p>
<p>Services are normally injected using <strong>dependency injection</strong> mechanism of AngularJS.</p>
<p>There are two types of service.</p>
<h4>Factory</h4>
<p>Define a factory then assign method to it.</p>
<p>Example from tutorialspoint.com:</p>
<pre class="code literal-block"><span></span> <span class="kd">var</span> <span class="nx">mainApp</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">"mainApp"</span><span class="p">,</span> <span class="p">[]);</span>
  <span class="c1">//Define a MathService factory</span>
  <span class="nx">mainApp</span><span class="p">.</span><span class="nx">factory</span><span class="p">(</span><span class="s1">'MathService'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
     <span class="kd">var</span> <span class="nx">factory</span> <span class="o">=</span> <span class="p">{};</span>
     <span class="nx">factory</span><span class="p">.</span><span class="nx">multiply</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">b</span>
     <span class="p">}</span>
     <span class="c1">//return factory object</span>
     <span class="k">return</span> <span class="nx">factory</span><span class="p">;</span>
  <span class="p">});</span>
</pre>


<h4>Service</h4>
<p>Call Factory and perform methods defined in Factory:</p>
<pre class="code literal-block"><span></span><span class="c1">//take MathService factory as a parameter</span>
<span class="nx">mainApp</span><span class="p">.</span><span class="nx">service</span><span class="p">(</span><span class="s1">'CalcService'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">MathService</span><span class="p">){</span>
        <span class="c1">//CalService define a squre method</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">square</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">MathService</span><span class="p">.</span><span class="nx">multiply</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span>
        <span class="c1">//call MathService factory 'multiply' method</span>
     <span class="p">}</span>
  <span class="p">});</span>
</pre>


<p>Finally, you can call service in your controller method:</p>
<pre class="code literal-block"><span></span><span class="c1">//take CalcService service as a parameter</span>
<span class="nx">mainApp</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'CalcController'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">CalcService</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">square</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">result</span> <span class="o">=</span> <span class="nx">CalcService</span><span class="p">.</span><span class="nx">square</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">number</span><span class="p">);</span>
        <span class="c1">//Call square method from CalcService</span>
     <span class="p">}</span>
  <span class="p">});</span>
</pre>


<h3>Dependency Injection</h3>
<p>Following component of AngulaJS can be injected into other components:</p>
<ul>
<li>
<p><code>value</code></p>
</li>
<li>
<p><code>factory</code>: Example above injecting MathService factory to CalcService service</p>
</li>
<li>
<p><code>service</code></p>
</li>
<li>
<p><code>provider</code>: <code>Provider</code> is a special factory method with a method <code>get()</code>which is used to return the <code>value</code>/<code>service</code>/<code>factory</code>.</p>
</li>
<li>
<p><code>constant</code></p>
</li>
</ul>
<p>Example for value/constnat from tutorialspoint.com:</p>
<pre class="code literal-block"><span></span><span class="nx">mainApp</span><span class="p">.</span><span class="nx">value</span><span class="p">(</span><span class="s2">"defaultInput"</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="nx">mainApp</span><span class="p">.</span><span class="nx">constant</span><span class="p">(</span><span class="s2">"configParam"</span><span class="p">,</span> <span class="s2">"constant value"</span><span class="p">);</span>
<span class="nx">mainApp</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'CalcController'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">defaultInput</span><span class="p">,</span> <span class="nx">configParam</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//...</span>
<span class="p">}</span>
</pre>


<p>Example for provider from tutorialspoint.com:</p>
<pre class="code literal-block"><span></span><span class="c1">//create a service using provider which defines a method square to return square of a number.</span>
<span class="nx">mainApp</span><span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$provide</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">$provide</span><span class="p">.</span><span class="nx">provider</span><span class="p">(</span><span class="s1">'MathService'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">//This provider gets MathService factory</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">$get</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">factory</span> <span class="o">=</span> <span class="p">{};</span>
         <span class="nx">factory</span><span class="p">.</span><span class="nx">multiply</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">b</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="k">return</span> <span class="nx">factory</span><span class="p">;</span>
      <span class="p">};</span>
   <span class="p">});</span>
<span class="p">});</span>
</pre>


<h3>Custom Directives</h3>
<p>Custom directives are defined using <code>directive</code> function. <strong>A custom directive simply replaces the element for which it is activated</strong>.</p>
<p>AngularJS use its <code>compile()</code> method of the custom directive then process the element using <code>link()</code> method of the custom directive based on the scope of the directive.</p>
<p>You can create custom directives for following type of elements:</p>
<ul>
<li>
<p><code>Element directives</code>: Directive activates when a <strong>matching element</strong> is encountered.</p>
</li>
<li>
<p><code>Attribute</code>: Directive activates when a <strong>matching attribute</strong> is encountered.</p>
</li>
<li>
<p><code>CSS</code>: Directive activates when a <strong>matching css</strong> style is encountered.</p>
</li>
<li>
<p><code>Comment</code>: Directive activates when a <strong>matching comment</strong> is encountered.</p>
</li>
</ul>
<p>Example custom HTML tags from tutorialspoint.com:</p>
<p>View:</p>
<pre class="code literal-block"><span></span><span class="c">&lt;!-- This controller includes custom directive necessary information --&gt;</span>
 <span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-app</span><span class="o">=</span><span class="s">"mainApp"</span> <span class="na">ng-controller</span><span class="o">=</span><span class="s">"StudentController"</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">student</span> <span class="na">name</span><span class="o">=</span><span class="s">"Mahesh"</span><span class="p">&gt;&lt;/</span><span class="nt">student</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">student</span> <span class="na">name</span><span class="o">=</span><span class="s">"Piyush"</span><span class="p">&gt;&lt;/</span><span class="nt">student</span><span class="p">&gt;</span>
</pre>




<p>Controller:</p>
<pre class="code literal-block"><span></span><span class="nx">mainApp</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'StudentController'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">Mahesh</span> <span class="o">=</span> <span class="p">{};</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">Mahesh</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">"Mahesh Parashar"</span><span class="p">;</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">Mahesh</span><span class="p">.</span><span class="nx">rollno</span>  <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">Piyush</span> <span class="o">=</span> <span class="p">{};</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">Piyush</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">"Piyush Parashar"</span><span class="p">;</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">Piyush</span><span class="p">.</span><span class="nx">rollno</span>  <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="p">});</span>
</pre>


<p>Create Directive:</p>
<pre class="code literal-block"><span></span><span class="err">/Create a directive, first parameter is the html element to be attached.</span>
<span class="c1">//This directive will be activated as soon as any student element is encountered in html</span>
<span class="nx">mainApp</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">'student'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
   <span class="c1">//define the directive object</span>
   <span class="kd">var</span> <span class="nx">directive</span> <span class="o">=</span> <span class="p">{};</span>
   <span class="c1">//restrict = E, signifies that directive is Element directive</span>
   <span class="nx">directive</span><span class="p">.</span><span class="nx">restrict</span> <span class="o">=</span> <span class="s1">'E'</span><span class="p">;</span>
   <span class="c1">//template replaces the complete element with its text.</span>
   <span class="nx">directive</span><span class="p">.</span><span class="nx">template</span> <span class="o">=</span> <span class="s2">"Student: &lt;b&gt;{{student.name}}&lt;/b&gt; , Roll No: &lt;b&gt;{{student.rollno}}&lt;/b&gt;"</span><span class="p">;</span>
   <span class="c1">//scope is used to distinguish each student element based on criteria.</span>
   <span class="nx">directive</span><span class="p">.</span><span class="nx">scope</span> <span class="o">=</span> <span class="p">{</span>
       <span class="nx">student</span> <span class="o">:</span> <span class="s2">"=name"</span>
   <span class="p">}</span>
</pre>


<p>Compile:</p>
<pre class="code literal-block"><span></span>   <span class="c1">//compile is called during application initialization. AngularJS calls it once when html page is loaded.</span>
   <span class="nx">directive</span><span class="p">.</span><span class="nx">compile</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">attributes</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">element</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"border"</span><span class="p">,</span> <span class="s2">"1px solid #cccccc"</span><span class="p">);</span>
      <span class="c1">//linkFunction is linked with each element with scope to get the element specific data.</span>
      <span class="kd">var</span> <span class="nx">linkFunction</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">attributes</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">element</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Student: &lt;b&gt;"</span><span class="o">+</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">student</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span><span class="s2">"&lt;/b&gt; , Roll No: &lt;b&gt;"</span><span class="o">+</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">student</span><span class="p">.</span><span class="nx">rollno</span><span class="o">+</span><span class="s2">"&lt;/b&gt;&lt;br/&gt;"</span><span class="p">);</span>
          <span class="c1">//You are using the scope from controller. Note StudentController replace 'student' to a specific student name</span>
          <span class="nx">element</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"background-color"</span><span class="p">,</span> <span class="s2">"#ff00ff"</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">linkFunction</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="nx">directive</span><span class="p">;</span>
<span class="p">});</span>
</pre>


<p>In the example above, you need to create a directive, then create a corresponding compile attribute for it.</p>
</div>
            </div>
        </div>
            <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-8.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-6.html" rel="next">Older posts</a>
            </li>
        </ul></nav><script>var disqus_shortname="pengyinsnotes";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><footer id="footer"><p>Contents © 2016         <a href="mailto:shanpy901115@gmail.com">Pengyin Shan</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>
</div>
    </section><script src="assets/js/all-nocdn.js" type="text/javascript"></script><script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
