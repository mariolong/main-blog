<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is Pengyin Shan's Note">
<meta name="viewport" content="width=device-width">
<title>Pengyin's Note (old posts, page 6) | Pengyin's Note</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="http://pengyin-shan.com/index-6.html">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]--><style>
    div.input_prompt {
      display: none;
    }
    </style>
</head>
<body>
    <section class="social"><ul>
<li><a href="index.html" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="archive.html" title="Archives"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="categories/index.html" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="rss.xml" title="RSS"><i class="icon-rss"></i></a></li>
            <li><a href="https://www.linkedin.com/in/pengyinshan" title="My LinkedIn"><i class="icon-linkedin"></i></a></li>
            <li><a href="https://github.com/shanpy" title="My Github"><i class="icon-github"></i></a></li>

        </ul></section><section class="page-content"><div class="content" rel="main">
        <div class="post">
            <h1 class="title"><a href="posts/2015/Data%20Science/sparksql-basics.html">SparkSQL Basics</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-08-10T00:00:00-04:00">2015-08-10 00:00</time>
</div>
                <div class="stats">
                                <a href="posts/2015/Data%20Science/sparksql-basics.html#disqus_thread" data-disqus-identifier="cache/posts/2015/Data Science/sparksql-basics.html">Comments</a>


                </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/big-data.html" rel="tag">Big Data</a></li>
           <li><a class="tag p-category" href="categories/data-science.html" rel="tag">Data Science</a></li>
           <li><a class="tag p-category" href="categories/spark.html" rel="tag">Spark</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<h3>Resource List</h3>
<ul>
<li>
<a href="posts/2015/Data%20Science/www.sparkinchina.com">SparkSQL(Chinese)</a>, written by Junhui Ma, www.sparkinchina.com (i.e. <code>SparkSQL book</code> in my post)</li>
</ul>
<h3>Traditional SQL and RDBMS</h3>
<p>This is a graph of how traditional SQL query is processed, from SparkSQL book:</p>
<p>../images/articles/2015/data_science/regular_query.png </p>
<p>A traditional SQL query following this sequence: <code>Result</code> -&gt; <code>Data Source</code> -&gt; <code>Operation</code>.</p>
<p>Step 1: a traditional RDBMS will first <strong>parse</strong> the sql query to get tokens such as <code>select</code>, <code>where</code>, etc.</p>
<p>Step 2: RDBMS will <strong>bind</strong> sql query to data source in database system, such as <code>table</code> or <code>view</code>. If all corresponding data sources in database exists, this sql query is executable.</p>
<p>Execute tree graph from SparkSQL book:</p>
<p>../images/articles/2015/data_science/sql_execute_tree.png </p>
<p>During step2, RDBMS will also supply a few execution plan. RDBMS will choose the one with the best optimization.</p>
<p><strong>When RDBMS parse sql, it will transfer the sql to tree structure:</strong></p>
<p>../images/articles/2015/data_science/sql_tree.png </p>
<h2>SparkSQL</h2>
<p>SparkSQL(1.1) is combined by four modules:</p>
<ul>
<li>
<p><code>core</code>: I/O operation. Get data resources(<code>RDD</code>, <code>JSON</code>, etc) then transfer it to <code>schemaRDD</code>.</p>
</li>
<li>
<p><code>catalyst</code>: Process sql query. The process includes: parsing, binding, optimizing, creating logic plan, etc.</p>
</li>
<li>
<p><code>hive</code>: process hive data.</p>
</li>
<li>
<p><code>hive-Thriftserver</code>: provide <code>CLI</code> and <code>JDBC/ODBC</code> interface.</p>
</li>
</ul>
<h3>SparkSQL: Tree and Rule</h3>
<p>Similar as traditional RDBMS, SparkSQL also parse SQL query to a <strong>Tree</strong> structure. The operation to tree is <strong>Rule</strong>, which involves in using pattern matching to decide which operation show be taken for a certain tree node.</p>
<h4>Tree</h4>
<p>Tree can be used to show: <code>Logical Plans</code>, <code>Expressions</code> and <code>Physical Operators</code>.</p>
<p>The operation to tree is working on <strong>TreeNode</strong>. Just like normal tree data structure, SparkSQL can traverse whole tree or go to a certain tree node to perform operation.</p>
<h5>Three Types of Tree Node</h5>
<ul>
<li>
<p><code>UnaryNode</code>: Only one child node. Using for operations like <code>Limit</code>, <code>Filter</code></p>
</li>
<li>
<p><code>BinaryNode</code>: Has left and right child node. Using for operations like <code>Join</code>, <code>Union</code></p>
</li>
<li>
<p><code>LeafNode</code>: No child node. Using for user command, such as <code>SetCommand</code></p>
</li>
</ul>
<h4>Rule</h4>
<p><code>Rule</code> is a abstract class. It is extended by <code>RuleExecutor</code>.</p>
<p>Rule can perform <code>transform</code> operation by using <code>batch</code>es.</p>
<p>Rule can perform recursive operations by using <code>Once</code> and <code>FixedPoint</code>.</p>
<h5>Example for Rule: Analyzer</h5>
<p>Analyzer graph from SparkSQL book:</p>
<p>../images/articles/2015/data_science/sparksql_analyzer.png </p>
<p>Face in <code>RuleExcutor</code> class for Analyzer:</p>
<ul>
<li>
<p>There are multiple batches are used.</p>
</li>
<li>
<p>Each batch is combined by different rules. Some rules may be applied multiple times.</p>
</li>
<li>
<p>Each rule has its own functions</p>
</li>
</ul>
<blockquote>
<p>Tree and Rule are working together to perform: parse operation, binding operation, optimizing operation, create logical plan, etc. Finally a executable plan will be created.</p>
</blockquote>
<h3>SparkSQL: sqlContext</h3>
<p>Source Code:</p>
<pre class="code literal-block"><span></span><span class="k">def</span> <span class="n">sql</span><span class="o">(</span><span class="n">sqlText</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">SchemaRDD</span> <span class="o">=</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">dialect</span> <span class="o">==</span> <span class="s">"sql"</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">new</span> <span class="nc">SchemaRDD</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">parseSql</span><span class="o">(</span><span class="n">sqlText</span><span class="o">))</span> <span class="c1">//parse sql query</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">error</span><span class="o">(</span><span class="s">s"Unsupported SQL dialect: </span><span class="si">$dialect</span><span class="s">"</span><span class="o">)</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre>


<p><code>sqlContext.sql</code> will return a <code>new SchemaRDD(this, parseSql(sqlText))</code>, which has been parsed by <code>catalyst.SqlParser</code>. Note <code>parseSql()</code> will return a <code>Unresolved LogicalPlan</code>.</p>
<p>sqlContext Process Graph from SparkSQL book:</p>
<p>../images/articles/2015/data_science/sqlcontext_process.png </p>
<h3>SparkSQL: catalyst</h3>
<p>Design of SparkSQL(1.1) from SparkSQL Book (dash line means future feature):</p>
<p>../images/articles/2015/data_science/catalyst_design.png </p>
<p>Main modules for Catalyst:</p>
<ul>
<li>
<p><code>sqlParse</code>: Parser for SQL query.</p>
<ul>
<li>First, parse sql query to a tree, then apply rules to tree to perform transformation.</li>
</ul>
</li>
<li>
<p><code>Analyzer</code>: Bind <code>Unresolved LogicalPlan</code> and meta-data from data resources. Generate <code>Resolved LogicalPlan</code>.</p>
<ul>
<li>Use <code>Analysis Rules</code> and meta-data to generate <code>Resolved LogicalPlan</code>.</li>
</ul>
</li>
<li>
<p><code>Optimizer</code>: Optimize <code>Resolved LogicalPlan</code>. Generate <code>Optimized LogicalPlan</code>.</p>
<ul>
<li>Use <code>Optimization Rules</code> to perform a group of optimizing operations.</li>
</ul>
</li>
<li>
<p><code>Planner</code>: Transfer <code>Logical Plan</code> to <code>Physical Plan</code>.</p>
<ul>
<li>Use <code>Planning Strategies</code> to generate <code>Physical Plan</code>.</li>
</ul>
</li>
<li>
<p><code>CostModel</code>: Choose best execution plan based on previous performance statistics.</p>
</li>
</ul>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/2015/Others/dive-into-hydra-and-my-thoughts.html">Dive into Hydra and My Thoughts</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-08-09T00:00:00-04:00">2015-08-09 00:00</time>
</div>
                <div class="stats">
                                <a href="posts/2015/Others/dive-into-hydra-and-my-thoughts.html#disqus_thread" data-disqus-identifier="cache/posts/2015/Others/dive-into-hydra-and-my-thoughts.html">Comments</a>


                </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/digial-library.html" rel="tag">Digial Library</a></li>
           <li><a class="tag p-category" href="categories/hydra.html" rel="tag">Hydra</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p><em>This post is being updated while I'm learning more about Hydra</em></p>
<h4>Main Idea</h4>
<p>I used to create a small Spring MVC web app <a href="https://github.com/shanpy/RDFExperiment">RDF Experiment</a> to experiment the ideas behind Hydra. Following is a graph about my assumption of Hydra Idea:</p>
<p>../images/articles/2015/digital_library/ProjectHydra.png </p>
<p>Behind this large frame, there are lots of small classes/methods that will push through stages above.</p>
<h5>Key Concerns</h5>
<p>Following key concerns should be evaluated carefully during the processes above:</p>
<ul>
<li>
<p>When parsing RDF file to Model, what are the key properties which should be kept? What are properties that should be ignored? How client and domain expert think about your solution?</p>
</li>
<li>
<p>What's the best way of modeling Fedora and Solr such that user can use different way of searching, and getting best result? Is there any possibility to shorten result list, while not losing necessary close-results? Is there any way to shorten the searching time?</p>
</li>
<li>
<p>Is there any visualization job can be done to let user understand more about results?</p>
</li>
</ul>
<h4>Problems and Thoughts</h4>
<h5>Installation</h5>
<p>Although RubyInstaller is available in Windows, I still encountered lots of unexpected errors when setting up environment in Windows 10. I took much less time in Linux. I used to run CygWin for virtual Linux environment in Windows, but it's not work well for any environment setup process, including Python and RoR.</p>
<p>If anyone is like me who are starting a taste of Hydra, I suggest using Unix-Based system first.</p>
<p><em>Update on 8/12/15</em>: I created a <a href="http://pengyin-shan.com/blog/setting-up-ror-hydra-environment-problems-and-solutions">post</a> talking about installation of RoR and Hydra. If you need to install RoR or Hydra, feel free to use this post.</p>
<h5>RoR</h5>
<p>Since both Spring and Rails framework are holding MVC structure, it's not hard to transfer idea from Spring to RoR. Subfolders in <code>app</code> folder self-explained themselves:</p>
<ul>
<li>
<p><code>controllers</code>, <code>models</code>, <code>views</code> are folders for MVC structure.</p>
</li>
<li>
<p><code>assets</code> has static resources.</p>
</li>
<li>
<p><code>helpers</code> is special for RoR. Since <code>helper</code> is targeted to for variables talking before controller and view, they are very similar to <code>model attributes</code> in Spring MVC framework.</p>
</li>
</ul>
<p>The basic structure of Hydra-Demo is similar to the a Node.js app, and <code>Gemfile</code> is similar to <code>requirements.txt</code> file in Python.</p>
<h5>Deployment</h5>
<p>Unfortunately, although Hydra is can be deployed on development environment easily for a single developer, there's no hosting platform that fully host a production environment of it. Following problem needs to be considered:</p>
<p>First, the default database needs to be changed in <code>database.yml</code>. Obviously not a lot of institutions will use SQLite3 (Default) in production environment.</p>
<p><em>Solution</em>: I have tried to replace it by MySQL and PostgreSQL, and these two solution all work. I believe other RDBMS should also work well. Just need to change <code>Gemfile</code>. Replace <code>gem 'sqlite3'</code> to <code>gem 'pg'</code> or <code>gem 'mysql2'</code>.</p>
<p><code>database.yml</code> can be changed as following for development purpose:</p>
<pre class="code literal-block"><span></span>default: &amp;default
adapter: postgresql
pool: 5
development:
  &lt;&lt;: *default
  url: postgresql_url_or_environment_virable
  database: database_name
  username:
  pasword:
test: #...
production: #...
</pre>


<p>Second problem is the host of fedora commons. As a single developer, I cannot find a cloud-hosted fedora to make calls, which cause me the problem of hosting hydra demo on cloud.</p>
<p><em>Solution</em>: Since fedora commons has pretty good deployment guideline, I will try to deploy one on Amazon AWS, then adjust <code>fedora.yml</code> in hydra-demo when moving to cloud.</p>
<p><em>Update 08/10/15</em>: When I tried to deploy Fedora 4 on my local machine using Jetty 8, I got unexpected error message, such as  <code>Problem processing jar entry org/fcrepo/kernel/modeshape/observer/GetNamespacedProperties.class</code> <code>java.lang.ArrayIndexOutOfBoundsException: 16680</code>. It happens to lots of fedora classes, such as <code>org/fcrepo/http/commons/api/rdf/HttpTripleUtil.class</code>. I need to figure out this problem before deploying fedora to cloud platform. Tomcat 7 gave no error message, but still unable to deploy it.</p>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/2015/Java/requestdispacher-redirection-in-java.html">RequestDispacher and Redirection in Java Web App</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-08-05T00:00:00-04:00">2015-08-05 00:00</time>
</div>
                <div class="stats">
                                <a href="posts/2015/Java/requestdispacher-redirection-in-java.html#disqus_thread" data-disqus-identifier="cache/posts/2015/Java/requestdispacher-redirection-in-java.html">Comments</a>


                </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/ajax.html" rel="tag">Ajax</a></li>
           <li><a class="tag p-category" href="categories/java.html" rel="tag">Java</a></li>
           <li><a class="tag p-category" href="categories/servlet.html" rel="tag">Servlet</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p>This post only talks about <code>RequestDispacher</code> in Java web app. If you want to know more about using servlet in Java, I have another related post: <a href="http://pengyin-shan.com/blog/ajax-and-java-servlet">Ajax and Java Servlet</a>.</p>
<h4>Dispach</h4>
<p>This <a href="http://www.xyzws.com/servletfaq/what-is-the-defferent-between-getnameddispatcher-and-getrequestdispatcher/3">article</a> from www.xyzws.com is very useful.</p>
<p><code>RequestDispacher</code> is used to formard a client's request to another 'place', which including another servlet, another JSP, etc.</p>
<p>In a servlet, there are three ways to get RequestDispacher:</p>
<h5>RequestDispatcher dispatch = request.getRequestDispatcher(path);</h5>
<p>Using this, <em>path</em> can be:</p>
<ul>
<li>
<p>either a path related to your current request, such as <code>subhome.html</code></p>
</li>
<li>
<p>or a servlet name in your <code>web.xml</code> file</p>
</li>
<li>
<p>or a abosute path related to your current contaxt, such as <code>/subpage/subjome.jsp</code></p>
</li>
</ul>
<h5>RequestDispatcher dispatch = getServletContext.getRequestDispatcher(path)</h5>
<p>Using this, <em>path</em> <strong>must</strong> start with <code>/</code>, such as <code>/subpage/subjome.jsp</code></p>
<h5>RequestDispatcher dispatch = getServletContext.getNamedDispatcher("string")</h5>
<p>This method must take the servlet name as its parameter. The servlet name is definded in <code>web.xml</code> as  <servlet-name> sub-element of the <servlet> element. The request is dispatched to that corresponding servlet.</servlet></servlet-name></p>
<p>Example in <code>web.xml</code>:</p>
<pre class="code literal-block"><span></span><span class="nt">&lt;servlet&gt;</span>
    <span class="c">&lt;!-- Use testProctor for getting RequestDispatcher --&gt;</span>
    <span class="nt">&lt;servlet-name&gt;</span>testProctor<span class="nt">&lt;/servlet-name&gt;</span>
    <span class="nt">&lt;servlet-class&gt;</span>com.test.proctortest<span class="nt">&lt;/servlet-class&gt;</span>
<span class="nt">&lt;/servlet&gt;</span>
<span class="nt">&lt;servlet-mapping&gt;</span>
    <span class="nt">&lt;servlet-name&gt;</span>testProctor<span class="nt">&lt;/servlet-name&gt;</span>
    <span class="nt">&lt;url-pattern&gt;</span>/test_proctor<span class="nt">&lt;/url-pattern&gt;</span>
<span class="nt">&lt;/servlet-mapping&gt;</span>
</pre>


<p>Before/After get your RequestDispacher, you can use <code>request.addAttribute(something)</code> or other functions to add stuff to your request.</p>
<h4>Go to another place</h4>
<p>After you finish process HttpRequest or HttpResponse, there are three ways to 'leave' for another place:</p>
<h5>RequestDispatcher.forward(request, response) | RequestDispatcher.include(request, response)</h5>
<p>There is a greate <a href="http://way2java.com/servlets/difference-between-include-and-forward-in-requestdispatcher/">article</a> from way2java.com to explain the difference between <code>RequestDispatcher.forward()</code> and <code>RequestDispatcher.include()</code>.</p>
<p>These are main differences bewtween these two methods:</p>
<ul>
<li>
<p><code>include()</code> will <strong>include</strong> another file in your current file, the send back to client. This is like <code>&lt;include /footer.jsp/&gt;</code> but on server side. <code>forward()</code> will <strong>forward</strong> the client to another page/servlet.</p>
</li>
<li>
<p><code>include()</code> will return back to original servlet, but <code>forward()</code> will go directly to client.</p>
</li>
<li>
<p>So, if you need response from <em>two</em> servlet, use <code>include()</code>. If you only need reponse from last servlet, use <code>forward()</code>. <em>Note include() does have limitation for second servlet accessing information from first servlet</em>.</p>
</li>
<li>
<p><code>include()</code> will give client the response from the <strong>same</strong> servlet which he requested. <code>forward()</code> will give client the response from a different servlet.</p>
</li>
<li>
<p>Generally, you want to use <code>include()</code> when <strong>static</strong> information needs to be included, such as Banner Content or Copyright Information. <code>forward()</code> should be used to include <strong>dynamic</strong> information, or when you want to use servlet as a Controller.</p>
</li>
</ul>
<h5>HttpResponse.sendRedirect(String)</h5>
<p>The differnce between <code>forward()/include()</code> and <code>HttpResponse.sendRedirect()</code> is very obvious:</p>
<ul>
<li>
<p><code>SendRedirect</code> is just for re-direction. If you have any data, it has to be transferred by <strong>session</strong> or being included in <strong>URL</strong>. This request is <strong>visible</strong> in browser as a new request. i.e. it is a <strong>client side redirect</strong>.</p>
</li>
<li>
<p><code>forward()/include()</code> is server side operation, which is not visible to browser. You can use <code>request.getAttribute()</code> to get data.</p>
</li>
</ul>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/2015/Java/ajax-and-java-servlet.html">Ajax and Java Servlet</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-08-03T00:00:00-04:00">2015-08-03 00:00</time>
</div>
                <div class="stats">
                                <a href="posts/2015/Java/ajax-and-java-servlet.html#disqus_thread" data-disqus-identifier="cache/posts/2015/Java/ajax-and-java-servlet.html">Comments</a>


                </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/ajax.html" rel="tag">Ajax</a></li>
           <li><a class="tag p-category" href="categories/java.html" rel="tag">Java</a></li>
           <li><a class="tag p-category" href="categories/jquery.html" rel="tag">jQuery</a></li>
           <li><a class="tag p-category" href="categories/servlet.html" rel="tag">Servlet</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p>I was working on an old Java web application today. This java web app used to pass data by using URL parameter, and I wanted to change it to passing data by using AJAX with JSON object, since there will be more data being passed in the future.</p>
<p>After working a while I realized I need to write this post becasue:</p>
<ol>
<li>
<p>Pure JSP/Servlet java app is a little bit different from Spring MVC Java web app</p>
</li>
<li>
<p>I'm digging into Spring MVS so much that it's a little bit tough to change back to old way :)</p>
</li>
</ol>
<p>So, if you have a JSP/Servlet Java web app and you want to use AJAX with JSON object, you have to write code in three places:</p>
<h4>1. JSP with jQuery</h4>
<p>You want to have <code>jQuery</code> library in your JSP file to make sure you can use AJAX.</p>
<pre class="code literal-block"><span></span><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s2">"POST"</span><span class="p">,</span>
        <span class="nx">url</span><span class="o">:</span> <span class="s1">'your &lt;url-pattern&gt; in web.xml'</span>
        <span class="nx">data</span><span class="o">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">json_object</span><span class="p">),</span>
        <span class="nx">contentType</span><span class="o">:</span> <span class="s1">'application/json'</span><span class="p">,</span>
        <span class="nx">dataType</span><span class="o">:</span> <span class="s1">'json'</span><span class="p">,</span>
        <span class="c1">//mimeType: 'application/json'</span>
        <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
            <span class="c1">//Process your data that is being passed back...</span>
        <span class="p">},</span>
        <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">textStatus</span><span class="p">,</span> <span class="nx">errorThrown</span> <span class="p">){</span>
            <span class="c1">//Deal with error occation</span>
        <span class="p">}</span>
        <span class="p">});</span>
<span class="c1">//New Version:</span>
 <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s2">"POST"</span><span class="p">,</span>
        <span class="nx">url</span><span class="o">:</span> <span class="s1">'your &lt;url-pattern&gt; in web.xml'</span>
        <span class="nx">data</span><span class="o">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">json_object</span><span class="p">),</span>
        <span class="nx">contentType</span><span class="o">:</span> <span class="s1">'application/json'</span><span class="p">,</span>
        <span class="nx">dataType</span><span class="o">:</span> <span class="s1">'json'</span>
        <span class="p">}).</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
            <span class="c1">//Process your data that is being passed back...</span>
        <span class="p">}).</span><span class="nx">fail</span><span class="p">(</span><span class="nx">fuction</span><span class="p">(){</span>
            <span class="c1">//Deal with error occation</span>
        <span class="p">}).</span><span class="nx">always</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
            <span class="c1">//Same as 'complete' in old version, operate after done/fail</span>
        <span class="p">});</span>
<span class="c1">//You can also use $.post(url, data, success, dataType) as a new way</span>
</pre>


<blockquote>
<p>In the code above, <code>contentType</code> and <code>dataType</code> (and <code>mimeType</code> if exists) is very important because wrong value of these attributes can give you a <code>404</code> or <code>500</code> error.</p>
</blockquote>
<h5>contentType</h5>
<p>Default value: <code>application/x-www-form-urlencoded; charset=UTF-8</code></p>
<p>This is the data type <strong>when you send data to server</strong>.</p>
<h5>dataType</h5>
<p>Default value: Guess(<code>xml</code>, <code>json</code>, <code>script</code>, <code>html</code>)</p>
<p>This is the data type <strong>when server pass data back to you</strong>.</p>
<h5>mimeType</h5>
<p>A mime type to override the XHR mime type. This is the data type <strong>when server pass data back to you</strong>.</p>
<p>Form Mozilla, MIME types describe the media type of content either in email or served by web servers or web applications.</p>
<p>MIME types are intended to help guide a web browser in <em>how the content is to be processed and displayed</em>. Examples of MIME types are:</p>
<ul>
<li>
<code>text/html</code> for normal web pages</li>
<li>
<code>text/plain</code> for plain text</li>
<li>
<code>application/octet-stream</code> meaning "download this file"</li>
<li>
<code>application/x-java-applet</code> for Java™ applets</li>
<li>
<code>application/pdf</code> for Adobe® PDF documents.</li>
</ul>
<p>So if you want you browser to access data like <code>xml</code>, <code>json</code>, <code>script</code> or <code>html</code>, <code>dataType</code> is good enough. However, if you want to let your browser detect PDF file or other data types, you need to set <code>mimeType</code>.</p>
<h4>2. web.xml</h4>
<blockquote>
<p>After working with Spring MVC for a while, I realizae I can forget web.xml easily. Make sure you register your servlet in web.xml.</p>
</blockquote>
<p>You need to regiseter your servlet in <code>web.xml</code> file in your project. Example:</p>
<pre class="code literal-block"><span></span><span class="nt">&lt;servlet&gt;</span>
    <span class="c">&lt;!-- Give a servlet name for using in web.xml --&gt;</span>
    <span class="nt">&lt;servlet-name&gt;</span>proctorprocess<span class="nt">&lt;/servlet-name&gt;</span>
    <span class="c">&lt;!-- This is the class of your servlet --&gt;</span>
    <span class="nt">&lt;servlet-class&gt;</span>edu.fsu.odl.cat.cber2.ProctorProcessServlet<span class="nt">&lt;/servlet-class&gt;</span>
<span class="nt">&lt;/servlet&gt;</span>
<span class="nt">&lt;servlet-mapping&gt;</span>
    <span class="c">&lt;!-- Same servlet name as above --&gt;</span>
    <span class="nt">&lt;servlet-name&gt;</span>proctorprocess<span class="nt">&lt;/servlet-name&gt;</span>
    <span class="c">&lt;!-- This is the url you want to put as url --&gt;</span>
    <span class="nt">&lt;url-pattern&gt;</span>/ProctorProcess<span class="nt">&lt;/url-pattern&gt;</span>
<span class="nt">&lt;/servlet-mapping&gt;</span>
</pre>


<h4>3. Servlet</h4>
<p>If you pass JSON object to your servlet, you may want to use <code>org.json</code>, <code>com.fasterxml.jackson</code> or <code>gson</code> external library to help you dealing with JSON object in Java.</p>
<p>Example code for post operation:</p>
<pre class="code literal-block"><span></span><span class="c1">//You want your class extends HttpServlet</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProctorProcessServlet</span> <span class="kd">extends</span> <span class="n">HttpServlet</span><span class="o">{</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">doPost</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">){</span>
        <span class="k">try</span><span class="o">{</span>
            <span class="n">String</span> <span class="n">json</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>
            <span class="n">BufferedReader</span> <span class="n">br</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
            <span class="k">if</span><span class="o">(</span><span class="n">br</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
                <span class="n">json</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span> <span class="c1">//json should be the string of your JSON object</span>
                <span class="c1">//Process your JSON object</span>
            <span class="o">}</span>
            <span class="c1">//Assume you want to pass JSON object back</span>
            <span class="n">response</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">PrintWriter</span> <span class="n">out</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">();</span>
            <span class="n">JSONObject</span> <span class="n">sample</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
            <span class="c1">//Process sample</span>
             <span class="n">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">sample</span><span class="o">);</span>
             <span class="n">out</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
             <span class="c1">//Now you finish your post operation and come back to JSP</span>
        <span class="o">}</span>
        <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">){</span>
            <span class="c1">//...</span>
        <span class="o">}</span>
    <span class="o">}</span>
</pre>


<p>This post will be udpated when I learned more about AJAX in my work experience.</p>
<h4>Tips</h4>
<h5>org.apache.catalina.LifecycleException: Failed to start component</h5>
<p>If you include <code>org.json</code> jar file in your project, and you encourter <code>org.apache.catalina.LifecycleException: Failed to start component</code> exception when you try to deploy to Tomcat:</p>
<p>Make sure you add your jar files to <code>Web Deployment Assebly</code> in your project properies. Following <a href="http://stackoverflow.com/questions/16362302/java-servlet-error-with-jsonobject">this post</a> and you will be fine.</p>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/2015/Linux/ubuntu-tips.html">Ubuntu Tips</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-08-01T00:00:00-04:00">2015-08-01 00:00</time>
</div>
                <div class="stats">
                                <a href="posts/2015/Linux/ubuntu-tips.html#disqus_thread" data-disqus-identifier="cache/posts/2015/Linux/ubuntu-tips.html">Comments</a>


                </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/linux.html" rel="tag">Linux</a></li>
           <li><a class="tag p-category" href="categories/ubuntu.html" rel="tag">Ubuntu</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<h4>JAVA_HOME Errors</h4>
<p>When you final setting up <code>JAVA_HOME</code>, you are supposed to set its path in two different places:</p>
<ol>
<li>
<p><code>~/.bashrc</code>: You will see something like <code>export JAVA_HOME="/usr/lib/jvm/java-8-oracle"</code>. Note <em>there are double quote sign in path, and there is no space between JAVA_HOME and path.</em></p>
</li>
<li>
<p><code>/etc/environment</code> (Read Only): You will see something like <code>JAVA_HOME="/usr/lib/jvm/java-8-oracle". Note: *there is double quote for path, and there is no space between JAVA_HOME and path*.</code> This is a read-only file and you need to be admin if you want to modify it.</p>
</li>
</ol>
<p>If your <code>JAVA_HOME</code> is not correctly set up, you may get following error in you Ubuntu:</p>
<h5>Cannot Update/Remove Software</h5>
<p>You can find a official forum <a href="https://bugs.launchpad.net/ubuntu/+source/texinfo/+bug/993407">here</a>.</p>
<p>One of my application, <code>xpad</code>, cannot be removed because of this. When I run <code>sudo apt-get remove xpad</code>, a error message <em>install-info can fail to install due to syntax errors in /etc/environment</em> appears.</p>
<p>I check my <code>/etc/environment</code> file. It turns out I had extra spaces in my JAVA_HOME, which cause the problem.</p>
<p>Also, if your <code>software updater</code> in Ubuntu failed to download necessary packages, you may have a wrong setup of <code>JAVA_HOME</code>.</p>
<h5>Reminder in Terminal</h5>
<p>When you open terminal, you may get some error message such as <code>bash: export: ``/usr/lib/jvm/java-8-oracle': not a valid identifier</code>. In this case, you need to check your ~/.bashrc file to make sure your JAVA_HOME format is correct.</p>
<blockquote>
<p>If you forget extact format of JAVA_HOME, you can open ~/.bashrc file using gedit, then following the format of other variables. You can varify by checking the color highlight of your JAVA_HOME line should be the same as all lines above.</p>
</blockquote>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/2015/Data%20Science/sql-tips.html">SQL Tips</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-07-30T00:00:00-04:00">2015-07-30 00:00</time>
</div>
                <div class="stats">
                                <a href="posts/2015/Data%20Science/sql-tips.html#disqus_thread" data-disqus-identifier="cache/posts/2015/Data Science/sql-tips.html">Comments</a>


                </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/database.html" rel="tag">Database</a></li>
           <li><a class="tag p-category" href="categories/sql.html" rel="tag">SQL</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<h4>Using SQLProcessor in Java</h4>
<p>My current job requires me to work on some old Java web application, which involves in connecting to Oracle SQL database using <code>SQLProcesoor</code>.</p>
<h5>Basic Syntax</h5>
<pre class="code literal-block"><span></span><span class="c1">//Assume you want to return an ArrayList of 'Course' objects</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SQLProcessorExample</span><span class="o">{</span>
    <span class="kd">public</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Course</span><span class="o">&gt;</span> <span class="nf">selectSQLExample</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">anyParameter</span><span class="o">){</span>
        <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Course</span><span class="o">&gt;</span> <span class="n">courses</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Course</span><span class="o">&gt;;</span>
        <span class="k">try</span><span class="o">{</span>
            <span class="n">SQLProcessor</span> <span class="n">sProc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SQLProcessor</span><span class="o">();</span>
            <span class="n">PreparedStatementGenerator</span> <span class="n">coursePSG</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PreparedStatementGenerator</span><span class="o">()</span> <span class="o">{</span>
                    <span class="kd">public</span> <span class="n">PreparedStatement</span> <span class="nf">generatePrepareStatement</span><span class="o">(</span><span class="n">Connection</span> <span class="n">conn</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">SQLException</span> <span class="o">{</span>
                        <span class="n">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"select * from test_table where test_para = ?"</span><span class="o">;</span>
                        <span class="n">PreparedStatement</span> <span class="n">ps</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
                        <span class="c1">//Note: Index starting from 1. You can also use setInt or other setting methods</span>
                        <span class="n">ps</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">anyParameter</span><span class="o">);</span>
                        <span class="k">return</span> <span class="n">ps</span><span class="o">;</span>
                    <span class="o">}</span>
            <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">[]&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">[]&gt;();</span>
            <span class="c1">//Use MultiResultListReader if you have mutiple rows returned</span>
            <span class="n">MultiResultListReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MultiResultListReader</span><span class="o">(</span><span class="n">result</span><span class="o">);</span>
            <span class="n">sProc</span><span class="o">.</span><span class="na">query</span><span class="o">(</span><span class="n">coursePSG</span><span class="o">,</span> <span class="n">database_connection</span><span class="o">,</span> <span class="n">reader</span><span class="o">);</span>
            <span class="c1">//Deal with your results</span>
            <span class="k">for</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">row</span> <span class="o">:</span> <span class="n">result</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">Course</span> <span class="n">result_c</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Course</span><span class="o">();</span>
                <span class="n">result_c</span><span class="o">.</span><span class="na">setCourseNumber</span><span class="o">(</span><span class="n">row</span><span class="o">[</span><span class="mi">0</span><span class="o">]);</span>
                <span class="n">result_c</span><span class="o">.</span><span class="na">setSectionNumber</span><span class="o">(</span><span class="n">row</span><span class="o">[</span><span class="mi">1</span><span class="o">]);</span>
                <span class="c1">//Process results...</span>
                <span class="n">courses</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">result_c</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">){</span>
            <span class="c1">//Handle exceptions</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre>


<h5>Important Tips</h5>
<p>If you have any trouble in your query and have no idea after checking with error message, try run this query in your <strong>DB workbench</strong> first. This may help with possible syntax error.</p>
<p>If you run query sucessfully in your DB workbench, but you get a <code>Invalid Indentifer</code> or <code>Invalid Keyword</code> exception in your Java app. <strong>Make sure you check your query in code with all necessary white spaces. You may have muliple lines of query code and you forget spaces at the end of one line.</strong></p>
<p>Example:</p>
<pre class="code literal-block"><span></span>```java
String sql = "select * from table_test a, table_test2 b" +
            "where id = 1";
//Notice this sql doesn't have white_space between 'b' and 'where', which will cause trouble
</pre>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/2015/Java/junit-basics.html">JUnit Basics</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-07-24T00:00:00-04:00">2015-07-24 00:00</time>
</div>
                <div class="stats">
                                <a href="posts/2015/Java/junit-basics.html#disqus_thread" data-disqus-identifier="cache/posts/2015/Java/junit-basics.html">Comments</a>


                </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/java.html" rel="tag">Java</a></li>
           <li><a class="tag p-category" href="categories/junit.html" rel="tag">JUnit</a></li>
           <li><a class="tag p-category" href="categories/software-testing.html" rel="tag">Software Testing</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<h3>Reference</h3>
<ul>
<li><a href="http://www.tutorialspoint.com//junit/index.htm">JUnit Tutorial from Tutorialspoint.com</a></li>
</ul>
<h3>Overview</h3>
<p>A <code>Unit Test Case</code> is a part of code which ensures that the another part of code (method) works as expected. To achieve those desired results quickly, test framework is required.</p>
<p>JUnit is perfect unit test framework for java programming language.</p>
<h3>Test Framework</h3>
<h4>Features</h4>
<p>JUnit test framework provides following important features:</p>
<ul>
<li>
<p><code>Fixtures</code></p>
</li>
<li>
<p><code>Test suites</code></p>
</li>
<li>
<p><code>Test runners</code></p>
</li>
<li>
<p><code>JUnit classes</code></p>
</li>
</ul>
<h5>Fixtures</h5>
<p><code>Fixtures</code> is a fixed state of a set of <strong>objects</strong> used as a baseline for running tests.</p>
<p>The purpose of a test fixture is to ensure that there is a well known and <strong>fixed environment</strong> in which tests are run so that results are repeatable. It includes:</p>
<ul>
<li>
<p><code>setUp()</code> method which runs before every test invocation.</p>
</li>
<li>
<p><code>tearDown()</code> method which runs after every test method.</p>
</li>
</ul>
<p>Example Code from Tutorialspoint.com:</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">junit.framework.*</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JavaTest</span> <span class="kd">extends</span> <span class="n">TestCase</span> <span class="o">{</span>
   <span class="kd">protected</span> <span class="kt">int</span> <span class="n">value1</span><span class="o">,</span> <span class="n">value2</span><span class="o">;</span>
   <span class="c1">// setUp() method: assigning the values</span>
   <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">setUp</span><span class="o">(){</span>
      <span class="n">value1</span><span class="o">=</span><span class="mi">3</span><span class="o">;</span>
      <span class="n">value2</span><span class="o">=</span><span class="mi">3</span><span class="o">;</span>
   <span class="o">}</span>
   <span class="c1">// test method to add two values</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testAdd</span><span class="o">(){</span>
      <span class="kt">double</span> <span class="n">result</span><span class="o">=</span> <span class="n">value1</span> <span class="o">+</span> <span class="n">value2</span><span class="o">;</span>
      <span class="n">assertTrue</span><span class="o">(</span><span class="n">result</span> <span class="o">==</span> <span class="mi">6</span><span class="o">);</span>
   <span class="o">}</span>
   <span class="c1">//No tearDown() in this example</span>
<span class="o">}</span>
</pre>


<h5>Test Suite</h5>
<p><code>Test suite</code> means <strong>bundle</strong> a few unit test cases and run it together.</p>
<p>In JUnit, both <code>@RunWith</code> and <code>@Suite</code> annotation are used to run the suite test.</p>
<p>Here is an example which uses TestJunit1 &amp; TestJunit2 test classes from Tutorialspoint.com:</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">org.junit.runner.RunWith</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.runners.Suite</span><span class="o">;</span>
<span class="c1">//JUnit Suite Test with @Runwith and @Suite annotation</span>
<span class="nd">@RunWith</span><span class="o">(</span><span class="n">Suite</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="nd">@Suite.SuiteClasses</span><span class="o">({</span>
   <span class="n">TestJunit1</span><span class="o">.</span><span class="na">class</span> <span class="o">,</span><span class="n">TestJunit2</span><span class="o">.</span><span class="na">class</span>
<span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JunitTestSuite</span> <span class="o">{</span>
<span class="o">}</span>

<span class="o">:::</span><span class="n">java</span>
<span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.Ignore</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestJunit1</span> <span class="o">{</span>
   <span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="s">"Robert"</span><span class="o">;</span>
   <span class="n">MessageUtil</span> <span class="n">messageUtil</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MessageUtil</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
   <span class="c1">//@Test Annotation</span>
   <span class="nd">@Test</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testPrintMessage</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Inside testPrintMessage()"</span><span class="o">);</span>
      <span class="n">assertEquals</span><span class="o">(</span><span class="n">message</span><span class="o">,</span> <span class="n">messageUtil</span><span class="o">.</span><span class="na">printMessage</span><span class="o">());</span>
   <span class="o">}</span>
<span class="o">}</span>

<span class="o">:::</span><span class="n">java</span>
<span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.Ignore</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestJunit2</span> <span class="o">{</span>
   <span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="s">"Robert"</span><span class="o">;</span>
   <span class="n">MessageUtil</span> <span class="n">messageUtil</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MessageUtil</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
   <span class="nd">@Test</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testSalutationMessage</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Inside testSalutationMessage()"</span><span class="o">);</span>
      <span class="n">message</span> <span class="o">=</span> <span class="s">"Hi!"</span> <span class="o">+</span> <span class="s">"Robert"</span><span class="o">;</span>
      <span class="n">assertEquals</span><span class="o">(</span><span class="n">message</span><span class="o">,</span><span class="n">messageUtil</span><span class="o">.</span><span class="na">salutationMessage</span><span class="o">());</span>
   <span class="o">}</span>
<span class="o">}</span>
</pre>


<h5>Test Runner</h5>
<p><code>Test runner</code> is used for <strong>executing</strong> the test cases.</p>
<p>Here is an example which assumes TestJunit test class already exists, from Tutorialspoint.com:</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">org.junit.runner.JUnitCore</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.runner.Result</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.runner.notification.Failure</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestRunner</span> <span class="o">{</span>
   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">//Note this line of using exiting TestJunit.class</span>
      <span class="n">Result</span> <span class="n">result</span> <span class="o">=</span> <span class="n">JUnitCore</span><span class="o">.</span><span class="na">runClasses</span><span class="o">(</span><span class="n">TestJunit</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
      <span class="k">for</span> <span class="o">(</span><span class="n">Failure</span> <span class="n">failure</span> <span class="o">:</span> <span class="n">result</span><span class="o">.</span><span class="na">getFailures</span><span class="o">())</span> <span class="o">{</span>
         <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">failure</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
      <span class="o">}</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">wasSuccessful</span><span class="o">());</span>
   <span class="o">}</span>
<span class="o">}</span>
</pre>


<h5>JUnit Classes</h5>
<p>JUnit classes are important classes which is used in writing and testing JUnits.</p>
<p>Some of the important classes are:</p>
<ul>
<li>
<p><code>Assert</code> which contain a set of assert methods.</p>
</li>
<li>
<p><code>TestCase</code> which contain a test case defines the fixture to run multiple tests.</p>
</li>
<li>
<p><code>TestResult</code> which contain methods to collect the results of executing a test case.</p>
</li>
</ul>
<h4>JUnit Basic Usage</h4>
<h5>1. Create a Message Class</h5>
<p>Example code from Tutorialspoint.com:</p>
<pre class="code literal-block"><span></span><span class="cm">/*</span>
<span class="cm">* This class prints the given message on console.</span>
<span class="cm">*/</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MessageUtil</span> <span class="o">{</span>
   <span class="kd">private</span> <span class="n">String</span> <span class="n">message</span><span class="o">;</span>
   <span class="c1">//Constructor</span>
   <span class="c1">//@param message to be printed</span>
   <span class="kd">public</span> <span class="nf">MessageUtil</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">){</span>
      <span class="k">this</span><span class="o">.</span><span class="na">message</span> <span class="o">=</span> <span class="n">message</span><span class="o">;</span>
   <span class="o">}</span>
   <span class="c1">// prints the message</span>
   <span class="kd">public</span> <span class="n">String</span> <span class="nf">printMessage</span><span class="o">(){</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
      <span class="k">return</span> <span class="n">message</span><span class="o">;</span>
   <span class="o">}</span>
<span class="o">}</span>
</pre>


<h5>2. Create a Test Case Class</h5>
<p>Example code from Tutorialspoint.com</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestJunit</span> <span class="o">{</span>
   <span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="s">"Hello World"</span><span class="o">;</span>
   <span class="c1">//Use the message class above</span>
   <span class="n">MessageUtil</span> <span class="n">messageUtil</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MessageUtil</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
   <span class="nd">@Test</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testPrintMessage</span><span class="o">()</span> <span class="o">{</span>
      <span class="c1">//Use assestion for printing out message</span>
      <span class="n">assertEquals</span><span class="o">(</span><span class="n">message</span><span class="o">,</span><span class="n">messageUtil</span><span class="o">.</span><span class="na">printMessage</span><span class="o">());</span>
   <span class="o">}</span>
<span class="o">}</span>
</pre>


<h5>3. Create a Test Runner Class</h5>
<p>Example code from Tutorialspoint.com</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">org.junit.runner.JUnitCore</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.runner.Result</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.runner.notification.Failure</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestRunner</span> <span class="o">{</span>
   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">//User the test class created above</span>
      <span class="n">Result</span> <span class="n">result</span> <span class="o">=</span> <span class="n">JUnitCore</span><span class="o">.</span><span class="na">runClasses</span><span class="o">(</span><span class="n">TestJunit</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
      <span class="c1">//Print failure and successful messages</span>
      <span class="k">for</span> <span class="o">(</span><span class="n">Failure</span> <span class="n">failure</span> <span class="o">:</span> <span class="n">result</span><span class="o">.</span><span class="na">getFailures</span><span class="o">())</span> <span class="o">{</span>
         <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">failure</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
      <span class="o">}</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">wasSuccessful</span><span class="o">());</span>
   <span class="o">}</span>
<span class="o">}</span>
</pre>


<h4>Writing Test with POJOs</h4>
<p>To write a test for a POJO class, we need following:</p>
<ul>
<li>
<p>A <strong>POJO</strong> class which defines a object in your business login</p>
</li>
<li>
<p>A <strong>Business Logic</strong> class which includes: a. methods for testing, using the POJO class mentioned above b. test class using business login</p>
</li>
<li>
<p>A <strong>Test Runner</strong> class which is similar as what we have above for testing</p>
</li>
</ul>
<p>Example code from Tutorialspoint.com:</p>
<p>POJO class example:</p>
<pre class="code literal-block"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">EmployeeDetails</span> <span class="o">{</span>
   <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
   <span class="kd">private</span> <span class="kt">double</span> <span class="n">monthlySalary</span><span class="o">;</span>
   <span class="kd">private</span> <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>
   <span class="cm">/**</span>
<span class="cm">   - @return the name</span>
<span class="cm">   */</span>
   <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
   <span class="o">}</span>
   <span class="cm">/**</span>
<span class="cm">   - @param name the name to set</span>
<span class="cm">   */</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
   <span class="o">}</span>
   <span class="c1">//Following parts are skipped</span>
<span class="o">}</span>
</pre>


<p>Business Logic class example:</p>
<p>First, Set up a method which needs to be tested:</p>
<pre class="code literal-block"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">EmpBusinessLogic</span> <span class="o">{</span>
   <span class="c1">// Calculate the yearly salary of employee</span>
   <span class="kd">public</span> <span class="kt">double</span> <span class="nf">calculateYearlySalary</span><span class="o">(</span><span class="n">EmployeeDetails</span> <span class="n">employeeDetails</span><span class="o">){</span>
      <span class="kt">double</span> <span class="n">yearlySalary</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span>
      <span class="n">yearlySalary</span> <span class="o">=</span> <span class="n">employeeDetails</span><span class="o">.</span><span class="na">getMonthlySalary</span><span class="o">()</span> <span class="o">*</span> <span class="mi">12</span><span class="o">;</span>
      <span class="k">return</span> <span class="n">yearlySalary</span><span class="o">;</span>
   <span class="o">}</span>
<span class="o">}</span>
</pre>


<p>Then, created a test business logic class with <strong>assestion</strong> and <strong>@Test</strong> annotation:</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestEmployeeDetails</span> <span class="o">{</span>
   <span class="n">EmpBusinessLogic</span> <span class="n">empBusinessLogic</span> <span class="o">=</span><span class="k">new</span> <span class="n">EmpBusinessLogic</span><span class="o">();</span>
   <span class="n">EmployeeDetails</span> <span class="n">employee</span> <span class="o">=</span> <span class="k">new</span> <span class="n">EmployeeDetails</span><span class="o">();</span>
   <span class="c1">// test to check yearly salary</span>
   <span class="nd">@Test</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testCalculateYearlySalary</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">employee</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"Rajeev"</span><span class="o">);</span>
      <span class="n">employee</span><span class="o">.</span><span class="na">setAge</span><span class="o">(</span><span class="mi">25</span><span class="o">);</span>
      <span class="n">employee</span><span class="o">.</span><span class="na">setMonthlySalary</span><span class="o">(</span><span class="mi">8000</span><span class="o">);</span>
      <span class="kt">double</span> <span class="n">salary</span><span class="o">=</span> <span class="n">empBusinessLogic</span><span class="o">.</span><span class="na">calculateYearlySalary</span><span class="o">(</span><span class="n">employee</span><span class="o">);</span>
      <span class="n">assertEquals</span><span class="o">(</span><span class="mi">96000</span><span class="o">,</span> <span class="n">salary</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">);</span>
   <span class="o">}</span>
<span class="o">}</span>
</pre>


<p>Test Runner class example:</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">org.junit.runner.JUnitCore</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.runner.Result</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.runner.notification.Failure</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestRunner</span> <span class="o">{</span>
   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">Result</span> <span class="n">result</span> <span class="o">=</span> <span class="n">JUnitCore</span><span class="o">.</span><span class="na">runClasses</span><span class="o">(</span><span class="n">TestEmployeeDetails</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
      <span class="k">for</span> <span class="o">(</span><span class="n">Failure</span> <span class="n">failure</span> <span class="o">:</span> <span class="n">result</span><span class="o">.</span><span class="na">getFailures</span><span class="o">())</span> <span class="o">{</span>
         <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">failure</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
      <span class="o">}</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">wasSuccessful</span><span class="o">());</span>
   <span class="o">}</span>
<span class="o">}</span>
</pre>


<h4>Assertion and Annotation</h4>
<h5>Assertion</h5>
<p>This class provides a set of assertion methods useful for writing tests. <em>Only failed assertions are recorded.</em></p>
<h6>List of Assertion Methods</h6>
<ul>
<li>
<p><code>assertEquals</code>: Check that two primitives/Objectes are equal</p>
</li>
<li>
<p><code>assertTrue</code> or <code>assertFalse</code>: Check that a condition is true/false</p>
</li>
<li>
<p><strong>assertNull</strong> or <strong>assertNotNull</strong>: Check that a condition is null/not null</p>
</li>
<li>
<p><strong>assertSame</strong> or <strong>assertNotSame</strong>: Check that if two object references <em>point</em> to the same/not same object</p>
</li>
<li>
<p><strong>assertArrayEquals</strong>: Check whether two arrays are equal to each other</p>
</li>
</ul>
<h5>Annotation</h5>
<p>The annotation in JUnit gives us information about test methods, include:</p>
<ul>
<li>
<p>which methods are going to run before &amp; after test methods,</p>
</li>
<li>
<p>which methods run before &amp; after all the methods</p>
</li>
<li>
<p>which methods or class will be ignore during execution.</p>
</li>
</ul>
<h6>List of Annotations</h6>
<ul>
<li>
<p><code>@Test</code>: The Test annotation tells JUnit that the <strong>public void method</strong> to which it is attached can be run as a test case.</p>
</li>
<li>
<p><code>@Before</code>: Several tests need similar objects created before they can run. Annotating a public void method with @Before causes that method to be <strong>run before each Test method</strong>.</p>
</li>
<li>
<p><code>@After</code>: If you allocate external resources in a Before method <em>you need to release them after the test runs</em>. Annotating a public void method with @After causes that method to be run after the Test method.</p>
</li>
<li>
<p><code>@BeforeClass</code>: Annotating a public static void method with @BeforeClass causes it to be <strong>run once</strong> before any of the test methods in the class.</p>
</li>
<li>
<p><code>@AfterClass</code>: This will perform the method after all tests have finished. This can be used to perform <strong>clean-up activities</strong>.</p>
</li>
<li>
<p><code>@Ignore</code>: The Ignore annotation is used to ignore the test and that <strong>test will not be executed</strong>.</p>
</li>
</ul>
<h4>Suite Test</h4>
<p>Test suites means bundle a few unit test cases and run it together. In JUnit, both <code>@RunWith</code> and <code>@Suite</code> annotation are used to run the suite test.</p>
<h5>Step 1: Create a Message Class</h5>
<p>Example code from Tutorialspoint.com:</p>
<pre class="code literal-block"><span></span><span class="cm">/*</span>
<span class="cm">* This class prints the given message on console.</span>
<span class="cm">*/</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MessageUtil</span> <span class="o">{</span>
   <span class="kd">private</span> <span class="n">String</span> <span class="n">message</span><span class="o">;</span>
   <span class="c1">//Constructor</span>
   <span class="c1">//@param message to be printed</span>
   <span class="kd">public</span> <span class="nf">MessageUtil</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">){</span>
      <span class="k">this</span><span class="o">.</span><span class="na">message</span> <span class="o">=</span> <span class="n">message</span><span class="o">;</span>
   <span class="o">}</span>
   <span class="c1">// prints the message</span>
   <span class="kd">public</span> <span class="n">String</span> <span class="nf">printMessage</span><span class="o">(){</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
      <span class="k">return</span> <span class="n">message</span><span class="o">;</span>
   <span class="o">}</span>
   <span class="c1">// add "Hi!" to the message</span>
   <span class="kd">public</span> <span class="n">String</span> <span class="nf">salutationMessage</span><span class="o">(){</span>
      <span class="n">message</span> <span class="o">=</span> <span class="s">"Hi!"</span> <span class="o">+</span> <span class="n">message</span><span class="o">;</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
      <span class="k">return</span> <span class="n">message</span><span class="o">;</span>
   <span class="o">}</span>
<span class="o">}</span>
</pre>


<h5>Step 2: Create Business Login Class with Business Login Test Class</h5>
<p>Business Logic class with Methods for testing:</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.Ignore</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestJunit1</span> <span class="o">{</span>
   <span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="s">"Robert"</span><span class="o">;</span>
   <span class="n">MessageUtil</span> <span class="n">messageUtil</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MessageUtil</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
   <span class="nd">@Test</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testPrintMessage</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Inside testPrintMessage()"</span><span class="o">);</span>
      <span class="n">assertEquals</span><span class="o">(</span><span class="n">message</span><span class="o">,</span> <span class="n">messageUtil</span><span class="o">.</span><span class="na">printMessage</span><span class="o">());</span>
   <span class="o">}</span>
<span class="o">}</span>
</pre>


<p>Business Logic Test Class with Assertions:</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.Ignore</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestJunit2</span> <span class="o">{</span>
   <span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="s">"Robert"</span><span class="o">;</span>
   <span class="n">MessageUtil</span> <span class="n">messageUtil</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MessageUtil</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
   <span class="nd">@Test</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testSalutationMessage</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Inside testSalutationMessage()"</span><span class="o">);</span>
      <span class="n">message</span> <span class="o">=</span> <span class="s">"Hi!"</span> <span class="o">+</span> <span class="s">"Robert"</span><span class="o">;</span>
      <span class="n">assertEquals</span><span class="o">(</span><span class="n">message</span><span class="o">,</span><span class="n">messageUtil</span><span class="o">.</span><span class="na">salutationMessage</span><span class="o">());</span>
   <span class="o">}</span>
<span class="o">}</span>
</pre>


<h5>Step3: Create Test Suite Class using @RunWith and @Suite annotation</h5>
<p>Example code from Tutorialspoint.com:</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">org.junit.runner.RunWith</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.runners.Suite</span><span class="o">;</span>
<span class="c1">//@RunWith takes Suite.class parameter</span>
<span class="nd">@RunWith</span><span class="o">(</span><span class="n">Suite</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="nd">@Suite.SuiteClasses</span><span class="o">({</span>
   <span class="c1">//A list of unit tests included in this test suite</span>
   <span class="n">TestJunit1</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
   <span class="n">TestJunit2</span><span class="o">.</span><span class="na">class</span>
<span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JunitTestSuite</span> <span class="o">{</span>
<span class="o">}</span>
</pre>


<h5>Create Test Runner Classes</h5>
<p>Same code as examples above</p>
<h4>Ignore Test</h4>
<p>Sometimes it happens that our code is not ready and test case written to test that method/code will fail if run. The <code>@Ignore</code> annotation helps in this regards.</p>
<p>A test method annotated with @Ignore <strong>will not be executed</strong>.</p>
<p>If a test class is annotated with @Ignore then none of its test methods will be executed.</p>
<h5>Step 1: Create a Message Class</h5>
<p>Same as example above.</p>
<h5>Step 2: Create Business Login Class with Business Login Test Class</h5>
<p>Same as example above.</p>
<h5>Step 3: Create Test Runner Class with @Ignore Annotation</h5>
<p>Example code from Tutorialspoint.com:</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.Ignore</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">;</span>
<span class="c1">//Note @Ignore is the annotation for test runner class</span>
<span class="nd">@Ignore</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestJunit</span> <span class="o">{</span>
   <span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="s">"Robert"</span><span class="o">;</span>
   <span class="n">MessageUtil</span> <span class="n">messageUtil</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MessageUtil</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
   <span class="nd">@Test</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testPrintMessage</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Inside testPrintMessage()"</span><span class="o">);</span>
      <span class="n">message</span> <span class="o">=</span> <span class="s">"Robert"</span><span class="o">;</span>
      <span class="n">assertEquals</span><span class="o">(</span><span class="n">message</span><span class="o">,</span><span class="n">messageUtil</span><span class="o">.</span><span class="na">printMessage</span><span class="o">());</span>
   <span class="o">}</span>
   <span class="nd">@Test</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testSalutationMessage</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Inside testSalutationMessage()"</span><span class="o">);</span>
      <span class="n">message</span> <span class="o">=</span> <span class="s">"Hi!"</span> <span class="o">+</span> <span class="s">"Robert"</span><span class="o">;</span>
      <span class="n">assertEquals</span><span class="o">(</span><span class="n">message</span><span class="o">,</span><span class="n">messageUtil</span><span class="o">.</span><span class="na">salutationMessage</span><span class="o">());</span>
   <span class="o">}</span>
<span class="o">}</span>
</pre>


<p>If you run the code above, you will always pass all test because none of test with @Test annotation above is excuted.</p>
<h4>Time Test</h4>
<p>If a test case takes more time than specified number of milliseconds then JUnit will automatically mark it as failed.</p>
<p>The <code>timeout</code> parameter is used along with @Test annotation.</p>
<h5>Step 1: Create a Message Class</h5>
<p>Same as example above.</p>
<h5>Step 2: Create Test Class with Timeout Setting</h5>
<p>Example code from Tutorialspoint.com:</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.Ignore</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestJunit</span> <span class="o">{</span>
   <span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="s">"Robert"</span><span class="o">;</span>
   <span class="n">MessageUtil</span> <span class="n">messageUtil</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MessageUtil</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
   <span class="c1">//Add timeout parameter for @Test annotation</span>
   <span class="nd">@Test</span><span class="o">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">1000</span><span class="o">)</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testPrintMessage</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Inside testPrintMessage()"</span><span class="o">);</span>
      <span class="n">messageUtil</span><span class="o">.</span><span class="na">printMessage</span><span class="o">();</span>
   <span class="o">}</span>
   <span class="nd">@Test</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testSalutationMessage</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Inside testSalutationMessage()"</span><span class="o">);</span>
      <span class="n">message</span> <span class="o">=</span> <span class="s">"Hi!"</span> <span class="o">+</span> <span class="s">"Robert"</span><span class="o">;</span>
      <span class="n">assertEquals</span><span class="o">(</span><span class="n">message</span><span class="o">,</span><span class="n">messageUtil</span><span class="o">.</span><span class="na">salutationMessage</span><span class="o">());</span>
   <span class="o">}</span>
<span class="o">}</span>
</pre>


<h5>Step 3: Create Test Runner Class</h5>
<p>Same regular Test Runner class as examples above</p>
<h4>Exceptions Test</h4>
<p>You can test the code <em>whether code throws desired exception or not</em>.</p>
<p>The <strong>expected</strong> parameter is used along with @Test annotation.</p>
<h5>Step 1: Create a Message Class</h5>
<p>Same as example above.</p>
<h5>Step 2: Create Test Class with Exception Setting</h5>
<p>Example code from Tutorialspoint.com:</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.Ignore</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestJunit</span> <span class="o">{</span>
   <span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="s">"Robert"</span><span class="o">;</span>
   <span class="n">MessageUtil</span> <span class="n">messageUtil</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MessageUtil</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
   <span class="c1">//Put specific exception class as parameter</span>
   <span class="nd">@Test</span><span class="o">(</span><span class="n">expected</span> <span class="o">=</span> <span class="n">ArithmeticException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testPrintMessage</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Inside testPrintMessage()"</span><span class="o">);</span>
      <span class="n">messageUtil</span><span class="o">.</span><span class="na">printMessage</span><span class="o">();</span>
   <span class="o">}</span>
   <span class="nd">@Test</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testSalutationMessage</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Inside testSalutationMessage()"</span><span class="o">);</span>
      <span class="n">message</span> <span class="o">=</span> <span class="s">"Hi!"</span> <span class="o">+</span> <span class="s">"Robert"</span><span class="o">;</span>
      <span class="n">assertEquals</span><span class="o">(</span><span class="n">message</span><span class="o">,</span><span class="n">messageUtil</span><span class="o">.</span><span class="na">salutationMessage</span><span class="o">());</span>
   <span class="o">}</span>
<span class="o">}</span>
</pre>


<h5>Step 3: Create Test Runner Class</h5>
<p>Same regular Test Runner class as examples above</p>
<h4>Parameterized Test</h4>
<p>Parameterized tests allow developer to <em>run the same test over and over again using different values</em>.</p>
<p>Five steps to follow for parameterized test:</p>
<ol>
<li>
<p>Annotate test class with `@RunWith(Parameterized.class)``</p>
</li>
<li>
<p>Create a public static method annotated with <code>@Parameters</code> that returns a <strong>Collection of Objects</strong> (as Array) as test data set.</p>
</li>
<li>
<p>Create a public constructor that takes in what is equivalent to one "row" of test data.</p>
</li>
<li>
<p>Create an instance variable for each "column" of test data.</p>
</li>
<li>
<p>Create your tests case(s) using the instance variables as the source of the test data.</p>
</li>
</ol>
<p>The test case will be invoked once per each row of data.</p>
<h5>Step 1: Create a Business Logic class with Methods for Testing</h5>
<p>Exmaple code from Tutorialspoint.com:</p>
<pre class="code literal-block"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">PrimeNumberChecker</span> <span class="o">{</span>
   <span class="kd">public</span> <span class="n">Boolean</span> <span class="nf">validate</span><span class="o">(</span><span class="kd">final</span> <span class="n">Integer</span> <span class="n">primeNumber</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="o">(</span><span class="n">primeNumber</span> <span class="o">/</span> <span class="mi">2</span><span class="o">);</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
         <span class="k">if</span> <span class="o">(</span><span class="n">primeNumber</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
         <span class="o">}</span>
      <span class="o">}</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
   <span class="o">}</span>
<span class="o">}</span>
</pre>


<h5>Step 2: Create a Business Logic Parameterized Test Class</h5>
<p>Exmaple code from Tutorialspoint.com:</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Collection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.Before</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.runners.Parameterized</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.runners.Parameterized.Parameters</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.runner.RunWith</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">;</span>
<span class="c1">//Parameterized.class works as parameter of @RunWith</span>
<span class="nd">@RunWith</span><span class="o">(</span><span class="n">Parameterized</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PrimeNumberCheckerTest</span> <span class="o">{</span>
   <span class="kd">private</span> <span class="n">Integer</span> <span class="n">inputNumber</span><span class="o">;</span>
   <span class="kd">private</span> <span class="n">Boolean</span> <span class="n">expectedResult</span><span class="o">;</span>
   <span class="kd">private</span> <span class="n">PrimeNumberChecker</span> <span class="n">primeNumberChecker</span><span class="o">;</span>
   <span class="nd">@Before</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">primeNumberChecker</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PrimeNumberChecker</span><span class="o">();</span>
   <span class="o">}</span>
   <span class="c1">// Each parameter should be placed as an argument here</span>
   <span class="c1">// Every time runner triggers, it will pass the arguments</span>
   <span class="c1">// from parameters we defined in primeNumbers() method</span>
   <span class="kd">public</span> <span class="nf">PrimeNumberCheckerTest</span><span class="o">(</span><span class="n">Integer</span> <span class="n">inputNumber</span><span class="o">,</span>
      <span class="n">Boolean</span> <span class="n">expectedResult</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">inputNumber</span> <span class="o">=</span> <span class="n">inputNumber</span><span class="o">;</span>
      <span class="k">this</span><span class="o">.</span><span class="na">expectedResult</span> <span class="o">=</span> <span class="n">expectedResult</span><span class="o">;</span>
   <span class="o">}</span>
   <span class="c1">//Use @Parameterized.Parameters for defining collection of test data</span>
   <span class="nd">@Parameterized.Parameters</span>
   <span class="kd">public</span> <span class="kd">static</span> <span class="n">Collection</span> <span class="nf">primeNumbers</span><span class="o">()</span> <span class="o">{</span>
      <span class="c1">//Note it returns an Array as collection</span>
      <span class="k">return</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="k">new</span> <span class="n">Object</span><span class="o">[][]</span> <span class="o">{</span>
         <span class="o">{</span> <span class="mi">2</span><span class="o">,</span> <span class="kc">true</span> <span class="o">},</span>
         <span class="o">{</span> <span class="mi">6</span><span class="o">,</span> <span class="kc">false</span> <span class="o">},</span>
         <span class="o">{</span> <span class="mi">19</span><span class="o">,</span> <span class="kc">true</span> <span class="o">},</span>
         <span class="o">{</span> <span class="mi">22</span><span class="o">,</span> <span class="kc">false</span> <span class="o">},</span>
         <span class="o">{</span> <span class="mi">23</span><span class="o">,</span> <span class="kc">true</span> <span class="o">}</span>
      <span class="o">});</span>
   <span class="o">}</span>
   <span class="c1">// This test will run 4 times since we have 5 parameters defined</span>
   <span class="nd">@Test</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testPrimeNumberChecker</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Parameterized Number is : "</span> <span class="o">+</span> <span class="n">inputNumber</span><span class="o">);</span>
      <span class="n">assertEquals</span><span class="o">(</span><span class="n">expectedResult</span><span class="o">,</span> <span class="n">primeNumberChecker</span><span class="o">.</span><span class="na">validate</span> <span class="o">(</span><span class="n">inputNumber</span><span class="o">));</span>
   <span class="o">}</span>
<span class="o">}</span>
</pre>


<h5>Step 3: Create Test Runner Class</h5>
<p>Same regular Test Runner class as examples above</p>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/2015/Others/rdf-basics.html">RDF Basics</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-07-21T00:00:00-04:00">2015-07-21 00:00</time>
</div>
                <div class="stats">
                                <a href="posts/2015/Others/rdf-basics.html#disqus_thread" data-disqus-identifier="cache/posts/2015/Others/rdf-basics.html">Comments</a>


                </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/data.html" rel="tag">Data</a></li>
           <li><a class="tag p-category" href="categories/digital-library.html" rel="tag">Digital Library</a></li>
           <li><a class="tag p-category" href="categories/research.html" rel="tag">Research</a></li>
           <li><a class="tag p-category" href="categories/search-engine.html" rel="tag">Search Engine</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<h4>Resource</h4>
<p><a href="http://www.w3schools.com/webservices/ws_rdf_intro.asp">Introduction to RDF From W3C</a></p>
<h4>Intro to RDF</h4>
<p>RDF (Resource Description Framework) is standard from W3C to describe describe title, author, content, and copyright information of web pages.</p>
<p>It is really useful for search engines or digital library.</p>
<h5>Realities of RDF</h5>
<ul>
<li>
<p>RDF is designed to be read and understood by computers, instead ofbeing displayed to people. <em>RDF descriptions are not designed to be displayed on the web</em>.</p>
</li>
<li>
<p>RDF is written in <strong>XML</strong></p>
</li>
<li>
<p>RDF is a part of the W3C's Semantic Web Activity</p>
</li>
<li>
<p>RDF is a <strong>W3C Recommendation</strong></p>
</li>
</ul>
<blockquote>
<p>W3C's <strong>Semantic Web Version</strong> has following features:</p>
<ul>
<li>
<p>Web information has exact meaning</p>
</li>
<li>
<p>Web information can be understood and processed by computers</p>
</li>
<li>
<p>Computers can integrate information from the web</p>
</li>
</ul>
</blockquote>
<h4>RDF Rules</h4>
<p>RDF identifies things using <strong>Web identifiers</strong> (URIs), and describes resources with <strong>properties</strong> and <strong>property values</strong>.</p>
<ul>
<li>
<p><code>Resource</code>:  anything that can have a <code>URI</code></p>
</li>
<li>
<p><code>Property</code>: a Resource that has a <strong>name</strong>, such as "author" or "homepage"</p>
</li>
<li>
<p><code>Property value</code>: the <strong>value</strong> of a Property</p>
</li>
</ul>
<p>Example From W3C:</p>
<pre class="code literal-block"><span></span><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;RDF&gt;</span>
  <span class="nt">&lt;Description</span> <span class="na">about=</span><span class="s">"http://www.w3schools.com/rdf"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;author&gt;</span>Jan Egil Refsnes<span class="nt">&lt;/author&gt;</span>
    <span class="nt">&lt;homepage&gt;</span>http://www.w3schools.com<span class="nt">&lt;/homepage&gt;</span>
  <span class="nt">&lt;/Description&gt;</span>
<span class="nt">&lt;/RDF&gt;</span>
</pre>


<h4>RDF Statements</h4>
<p>The <strong>combination</strong> of a <code>Resource</code>, a <code>Property</code>, and a <code>Property value</code> forms a <code>Statement</code> .</p>
<ul>
<li>
<p>Resource is the <code>subject</code> of Statement</p>
</li>
<li>
<p>Property is the <code>predicate</code> of Statement</p>
</li>
<li>
<p>Property value is the <code>object</code> of Statement.</p>
</li>
</ul>
<p>Example from W3C:</p>
<ul>
<li>
<p>Statement: "The author of http://www.w3schools.com/rdf is Jan Egil Refsnes".</p>
</li>
<li>
<p>Subject: http://www.w3schools.com/rdf</p>
</li>
<li>
<p>Predict: author</p>
</li>
<li>
<p>Object: Jan Egil Refsnes</p>
</li>
</ul>
<h4>RDF Main Elements</h4>
<p>A full RDF example with from W3C:</p>
<pre class="code literal-block"><span></span><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="c">&lt;!-- Declare RDF --&gt;</span>
<span class="nt">&lt;rdf:RDF</span>
<span class="na">xmlns:rdf=</span><span class="s">"http://www.w3.org/1999/02/22-rdf-syntax-ns#"</span>
<span class="na">xmlns:cd=</span><span class="s">"http://www.recshop.fake/cd#"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- Start of a Description. rdf:about contains the description of resource --&gt;</span>
    <span class="nt">&lt;rdf:Description</span> <span class="na">rdf:about=</span><span class="s">"http://www.recshop.fake/cd/Empire Burlesque"</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- following cd items are properties of resource, with property values --&gt;</span>
          <span class="nt">&lt;cd:artist&gt;</span>Bob Dylan<span class="nt">&lt;/cd:artist&gt;</span>
          <span class="nt">&lt;cd:country&gt;</span>USA<span class="nt">&lt;/cd:country&gt;</span>
          <span class="nt">&lt;cd:company&gt;</span>Columbia<span class="nt">&lt;/cd:company&gt;</span>
          <span class="nt">&lt;cd:price&gt;</span>10.90<span class="nt">&lt;/cd:price&gt;</span>
          <span class="nt">&lt;cd:year&gt;</span>1985<span class="nt">&lt;/cd:year&gt;</span>
    <span class="nt">&lt;/rdf:Description&gt;</span>
    <span class="nt">&lt;rdf:Description</span> <span class="na">rdf:about=</span><span class="s">"http://www.recshop.fake/cd/Hide your heart"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;cd:artist&gt;</span>Bonnie Tyler<span class="nt">&lt;/cd:artist&gt;</span>
          <span class="nt">&lt;cd:country&gt;</span>UK<span class="nt">&lt;/cd:country&gt;</span>
          <span class="nt">&lt;cd:company&gt;</span>CBS Records<span class="nt">&lt;/cd:company&gt;</span>
          <span class="nt">&lt;cd:price&gt;</span>9.90<span class="nt">&lt;/cd:price&gt;</span>
          <span class="nt">&lt;cd:year&gt;</span>1988<span class="nt">&lt;/cd:year&gt;</span>
    <span class="nt">&lt;/rdf:Description&gt;</span>
<span class="nt">&lt;/rdf:RDF&gt;</span>
</pre>


<p>The main elements of RDF are:</p>
<ol>
<li>
<p><code>&lt;rdf:RDF&gt;</code> root element</p>
</li>
<li>
<p><code>&lt;RDF&gt;</code> element</p>
</li>
<li>
<p><code>&lt;Description&gt;</code> element</p>
</li>
</ol>
<h5><rdf></rdf></h5>
<p><code>&lt;rdf:RDF&gt;</code> is the root element of an RDF document.</p>
<p>It defines the XML document to be an RDF document.</p>
<p>It also contains a reference to the RDF namespace.</p>
<h5><description></description></h5>
<p>The <code>&lt;rdf:Description&gt;</code> element identifies a resource with the <code>about</code> attribute.</p>
<p>The <code>&lt;rdf:Description&gt;</code> element contains elements that <em>describe</em> the resource.</p>
<h5><cd></cd></h5>
<p>Elements with <code>&lt;cd&gt;</code> namespace is not part of RDF. RDF defines only the framework.</p>
<p>So the elements, artist, country, company, price, and year, <em>must be defined by someone else</em> (company, organization, person, etc).</p>
<p>You can also define these <strong>properties as attributes</strong> of <code>&lt;rdf:Description&gt;</code>. For example:</p>
<pre class="code literal-block"><span></span><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;rdf:RDF</span>
<span class="na">xmlns:rdf=</span><span class="s">"http://www.w3.org/1999/02/22-rdf-syntax-ns#"</span>
<span class="na">xmlns:cd=</span><span class="s">"http://www.recshop.fake/cd#"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;rdf:Description</span>
    <span class="na">rdf:about=</span><span class="s">"http://www.recshop.fake/cd/Empire Burlesque"</span>
    <span class="na">cd:artist=</span><span class="s">"Bob Dylan"</span> <span class="na">cd:country=</span><span class="s">"USA"</span>
    <span class="na">cd:company=</span><span class="s">"Columbia"</span> <span class="na">cd:price=</span><span class="s">"10.90"</span>
    <span class="na">cd:year=</span><span class="s">"1985"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/rdf:RDF&gt;</span>
</pre>


<p>You can also define these <strong>properties as resources</strong> of <code>&lt;rdf:Description&gt;</code>. For example:</p>
<pre class="code literal-block"><span></span><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;rdf:RDF</span>
<span class="na">xmlns:rdf=</span><span class="s">"http://www.w3.org/1999/02/22-rdf-syntax-ns#"</span>
<span class="na">xmlns:cd=</span><span class="s">"http://www.recshop.fake/cd#"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;rdf:Description</span> <span class="na">rdf:about=</span><span class="s">"http://www.recshop.fake/cd/Empire Burlesque"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;cd:artist</span> <span class="na">rdf:resource=</span><span class="s">"http://www.recshop.fake/cd/dylan"</span> <span class="nt">/&gt;</span>
        <span class="c">&lt;!-- other rdf:resource with cd namespace --&gt;</span>
    <span class="nt">&lt;/rdf:Description&gt;</span>
<span class="nt">&lt;/rdf:RDF&gt;</span>
</pre>


<h4>RDF Container Elements</h4>
<p>RDF containers are used to describe <strong>group of things</strong>.</p>
<p>The following RDF elements are used to describe groups: <code>&lt;Bag&gt;</code>, <code>&lt;Seq&gt;</code>, and <code>&lt;Alt&gt;</code>.</p>
<h4><bag></bag></h4>
<p>The <code>&lt;rdf:Bag&gt;</code> element is used to describe a list of values that <em>do not have to be in a specific order</em>.</p>
<p>The <code>&lt;rdf:Bag&gt;</code> element <em>may contain duplicate values</em>.</p>
<p>Example from W3C:</p>
<pre class="code literal-block"><span></span><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;rdf:RDF</span>
<span class="na">xmlns:rdf=</span><span class="s">"http://www.w3.org/1999/02/22-rdf-syntax-ns#"</span>
<span class="na">xmlns:cd=</span><span class="s">"http://www.recshop.fake/cd#"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;rdf:Description</span>
    <span class="na">rdf:about=</span><span class="s">"http://www.recshop.fake/cd/Beatles"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;cd:artist&gt;</span>
        <span class="nt">&lt;rdf:Bag&gt;</span>
          <span class="nt">&lt;rdf:li&gt;</span>John<span class="nt">&lt;/rdf:li&gt;</span>
          <span class="nt">&lt;rdf:li&gt;</span>Paul<span class="nt">&lt;/rdf:li&gt;</span>
          <span class="nt">&lt;rdf:li&gt;</span>George<span class="nt">&lt;/rdf:li&gt;</span>
          <span class="nt">&lt;rdf:li&gt;</span>Ringo<span class="nt">&lt;/rdf:li&gt;</span>
        <span class="nt">&lt;/rdf:Bag&gt;</span>
      <span class="nt">&lt;/cd:artist&gt;</span>
    <span class="nt">&lt;/rdf:Description&gt;</span>
<span class="nt">&lt;/rdf:RDF&gt;</span>
</pre>


<h4><seq></seq></h4>
<p>The <code>&lt;rdf:Seq&gt;</code> element is used to describe an <em>ordered list of values</em> (For example, in alphabetical order).</p>
<p>The <code>&lt;rdf:Seq&gt;</code> element <em>may contain duplicate values</em>.</p>
<p>If you want to see an example, just replace <code>&lt;rdf:Bag&gt;</code> with <code>&lt;rdf:Seq&gt;</code> from example abpve.</p>
<h4><alt></alt></h4>
<p>The <code>&lt;rdf:Alt&gt;</code> element is used to describe a list of alternative values (<em>the user can select only one of the values</em>).</p>
<p>Example from W3C:</p>
<pre class="code literal-block"><span></span><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;rdf:RDF</span>
<span class="na">xmlns:rdf=</span><span class="s">"http://www.w3.org/1999/02/22-rdf-syntax-ns#"</span>
<span class="na">xmlns:cd=</span><span class="s">"http://www.recshop.fake/cd#"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;rdf:Description</span>
    <span class="na">rdf:about=</span><span class="s">"http://www.recshop.fake/cd/Beatles"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;cd:format&gt;</span>
            <span class="nt">&lt;rdf:Alt&gt;</span>
              <span class="nt">&lt;rdf:li&gt;</span>CD<span class="nt">&lt;/rdf:li&gt;</span>
              <span class="nt">&lt;rdf:li&gt;</span>Record<span class="nt">&lt;/rdf:li&gt;</span>
              <span class="nt">&lt;rdf:li&gt;</span>Tape<span class="nt">&lt;/rdf:li&gt;</span>
            <span class="nt">&lt;/rdf:Alt&gt;</span>
          <span class="nt">&lt;/cd:format&gt;</span>
    <span class="nt">&lt;/rdf:Description&gt;</span>
<span class="nt">&lt;/rdf:RDF&gt;</span>
</pre>


<h5>RDF Terms</h5>
<ul>
<li>
<p>A <code>container</code> is a resource that contains things</p>
</li>
<li>
<p>The contained things are called <code>member</code>s (not list of values)</p>
</li>
</ul>
<h4>RDF Collections</h4>
<p>RDF collections describe groups that can <strong>ONLY</strong> contain the specified members.</p>
<p>A collection is described by the attribute <code>rdf:parseType="Collection"</code>.</p>
<p>Example from W3C:</p>
<pre class="code literal-block"><span></span><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;rdf:RDF</span>
<span class="na">xmlns:rdf=</span><span class="s">"http://www.w3.org/1999/02/22-rdf-syntax-ns#"</span>
<span class="na">xmlns:cd=</span><span class="s">"http://recshop.fake/cd#"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;rdf:Description</span>
    <span class="na">rdf:about=</span><span class="s">"http://recshop.fake/cd/Beatles"</span><span class="nt">&gt;</span>
          <span class="c">&lt;!-- This cd namespace element contains a series of rdf description elements --&gt;</span>
          <span class="nt">&lt;cd:artist</span> <span class="na">rdf:parseType=</span><span class="s">"Collection"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;rdf:Description</span> <span class="na">rdf:about=</span><span class="s">"http://recshop.fake/cd/Beatles/George"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;rdf:Description</span> <span class="na">rdf:about=</span><span class="s">"http://recshop.fake/cd/Beatles/John"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;rdf:Description</span> <span class="na">rdf:about=</span><span class="s">"http://recshop.fake/cd/Beatles/Paul"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;rdf:Description</span> <span class="na">rdf:about=</span><span class="s">"http://recshop.fake/cd/Beatles/Ringo"</span><span class="nt">/&gt;</span>
              <span class="nt">&lt;/cd:artist&gt;</span>
    <span class="nt">&lt;/rdf:Description&gt;</span>
<span class="nt">&lt;/rdf:RDF&gt;</span>
</pre>


<h4>RDF Schema (RDFS)</h4>
<p>RDF Schema does not provide actual application-specific classes and properties.</p>
<p>Instead RDF Schema provides <strong>the framework to describe</strong> application-specific classes and properties.</p>
<p><em>Classes in RDF Schema are much like classes in object oriented programming languages</em>. This allows resources to be defined as instances of classes, and subclasses of classes.</p>
<p>Example from W3C:</p>
<pre class="code literal-block"><span></span><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;rdf:RDF</span>
<span class="na">xmlns:rdf=</span><span class="s">"http://www.w3.org/1999/02/22-rdf-syntax-ns#"</span>
<span class="na">xmlns:rdfs=</span><span class="s">"http://www.w3.org/2000/01/rdf-schema#"</span>
<span class="na">xml:base=</span><span class="s">"http://www.animals.fake/animals#"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;rdf:Description</span> <span class="na">rdf:ID=</span><span class="s">"animal"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;rdf:type</span> <span class="na">rdf:resource=</span><span class="s">"http://www.w3.org/2000/01/rdf-schema#Class"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/rdf:Description&gt;</span>
    <span class="nt">&lt;rdf:Description</span> <span class="na">rdf:ID=</span><span class="s">"horse"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;rdf:type</span> <span class="na">rdf:resource=</span><span class="s">"http://www.w3.org/2000/01/rdf-schema#Class"</span><span class="nt">/&gt;</span>
        <span class="c">&lt;!-- Note the resource "horse" is a subclass of the class "animal"--&gt;</span>
      <span class="nt">&lt;rdfs:subClassOf</span> <span class="na">rdf:resource=</span><span class="s">"#animal"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/rdf:Description&gt;</span>
<span class="nt">&lt;/rdf:RDF&gt;</span>
</pre>


<p>The example above can be abbreviated to:</p>
<pre class="code literal-block"><span></span><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;rdf:RDF</span>
<span class="na">xmlns:rdf=</span><span class="s">"http://www.w3.org/1999/02/22-rdf-syntax-ns#"</span>
<span class="na">xmlns:rdfs=</span><span class="s">"http://www.w3.org/2000/01/rdf-schema#"</span>
<span class="na">xml:base=</span><span class="s">"http://www.animals.fake/animals#"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;rdfs:Class</span> <span class="na">rdf:ID=</span><span class="s">"animal"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;rdfs:Class</span> <span class="na">rdf:ID=</span><span class="s">"horse"</span><span class="nt">&gt;</span>
          <span class="c">&lt;!-- Define the resource "horse" is a subclass of the class "animal"--&gt;</span>
          <span class="nt">&lt;rdfs:subClassOf</span> <span class="na">rdf:resource=</span><span class="s">"#animal"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/rdfs:Class&gt;</span>
<span class="nt">&lt;/rdf:RDF&gt;</span>
</pre>


<h4>OWL</h4>
<p>OWL is a language for processing web information. It is built on top of RDF, and also written in <code>XML</code>.</p>
<p><code>Ontology</code> is about the exact description of things and their relationships.</p>
<p>For the web, ontology is about the exact description of web information and relationships between web information.</p>
<p>OWL and RDF are much of the same thing, but OWL is a <strong>stronger</strong> language with greater machine interpretability than RDF.</p>
<p>OWL comes with a larger vocabulary and stronger syntax than RDF.</p>
<p>OWL is also a W3C recommendation.</p>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/2015/Data%20Science/search-engine-basics-lucene.html">Search Engine Basics (Including Lucene)</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-07-21T00:00:00-04:00">2015-07-21 00:00</time>
</div>
                <div class="stats">
                                <a href="posts/2015/Data%20Science/search-engine-basics-lucene.html#disqus_thread" data-disqus-identifier="cache/posts/2015/Data Science/search-engine-basics-lucene.html">Comments</a>


                </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/data-science.html" rel="tag">Data Science</a></li>
           <li><a class="tag p-category" href="categories/hydra.html" rel="tag">Hydra</a></li>
           <li><a class="tag p-category" href="categories/search-engine.html" rel="tag">Search Engine</a></li>
           <li><a class="tag p-category" href="categories/seo.html" rel="tag">SEO</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<h3>Reference List</h3>
<ul>
<li><a href="http://www.tutorialspoint.com/lucene/lucene_overview.htm">Lucene Tutorial from TutorialPoint.com</a></li>
</ul>
<h3>Search Engine Basics</h3>
<h4>Search Application Operation List</h4>
<ol>
<li>
<p><strong>Acquire Raw Content</strong>: Collect the target contents on which search are to be conducted.</p>
</li>
<li>
<p><strong>Build the document</strong>:  Build the document(s) from the raw contents which search application can understands and interpret easily.</p>
</li>
<li>
<p><strong>Analyze the document</strong>: The document is to be analyzed as which part of the text is a candidate to be indexed.</p>
</li>
<li>
<p><strong>Indexing the document</strong>: Index documents so that this document can be retrived based on certain keys instead of whole contents of the document.</p>
</li>
<li>
<p><strong>User Interface for Search</strong>: To facilitate user to make a search, application must provide a user a mean or u0ser interface where a user can enter text and start the search process.</p>
</li>
<li>
<p><strong>Build Query</strong>: Once user made a request to search a text, application should prepare a Query object using that text which can be used to inquire index database to get the relevant details.</p>
</li>
<li>
<p><strong>Search Query</strong>: Using query object, index database is then checked to get the relevant details and the content documents.</p>
</li>
<li>
<p><strong>Render Results</strong>: Once result is received the application should decide how to show the results to the user using User Interface. How much information is to be shown at first look and so on.</p>
</li>
</ol>
<h3>Lucene Basics</h3>
<h4>Setup</h4>
<p>Lucene performs step 2 to step 7 in <code>Search Application Operation List</code> section above.</p>
<p>You need <code>JDK</code> for Lucene setup. You can view setup process <a href="http://www.tutorialspoint.com/lucene/lucene_environment.htm">here</a>.</p>
<h4>Index Process</h4>
<p>In Lucene, <code>IndexWriter</code> is the most important and core component of the indexing process.</p>
<p>Process Chart for TutorialsPoint:</p>
<p>images/articles/2015/data/indexing_process.jpg </p>
<blockquote>
<p>We add Document(s) containing Field(s) to IndexWriter which analyzes the Document(s) using the Analyzer and then creates/open/edit indexes as required and store/update them in a Directory. IndexWriter is used to <em>update or create</em> indexes. It is not used to read indexes.</p>
</blockquote>
<h5>List of Indexing Classes</h5>
<ol>
<li>
<p><a href="http://www.tutorialspoint.com/lucene/lucene_indexwriter.htm">IndexWriter</a>: This class acts as a core component which <strong>creates/updates indexes</strong> during indexing process.</p>
</li>
<li>
<p><a href="http://www.tutorialspoint.com/lucene/lucene_directory.htm">Directory</a>: This class represents the <strong>storage</strong> location of the indexes.</p>
</li>
<li>
<p><a href="http://www.tutorialspoint.com/lucene/lucene_analyzer.htm">Analyzer</a>: Analyzer class is responsible to <strong>analyze</strong> a document and <strong>get the tokens/words from the text</strong> which is to be indexed. Without analysis done, IndexWriter can not create index.</p>
</li>
<li>
<p><a href="http://www.tutorialspoint.com/lucene/lucene_document.htm">Document</a>: Document represents a <strong>virtual document</strong> with Fields where Field is object which can contain the physical document's contents, its meta data and so on. Analyzer can understand a Document only.</p>
</li>
<li>
<p><a href="http://www.tutorialspoint.com/lucene/lucene_field.htm">Field</a>: Field is the <strong>lowest unit or the starting point</strong> of the indexing process. It represents the <code>key-value</code> pair relationship where a key is used to identify the value to be indexed. Say a field used to represent contents of a document will have key as "contents" and the value may contain the part or all of the text or numeric content of the document. Lucene can index only <strong>text or numeric</strong> contents only.</p>
</li>
</ol>
<h5>List of Search Classes</h5>
<p>Searching process is again one of the core functionality provided by Lucene.</p>
<p>It's flow is similar to that of indexing process. Basic search of lucene can be made using following classes which can also be termed as foundation classes for all search related operations:</p>
<ol>
<li>
<p><a href="http://www.tutorialspoint.com/lucene/lucene_indexsearcher.htm">IndexSearcher</a>: This class act as a core component which <strong>reads/searches indexes</strong> created after indexing process. It takes directory instance pointing to the location containing the indexes.</p>
</li>
<li>
<p><a href="http://www.tutorialspoint.com/lucene/lucene_term.htm">Term</a>: This class is the <strong>lowest</strong> unit of searching. It is similar to Field in indexing process.</p>
</li>
<li>
<p><a href="http://www.tutorialspoint.com/lucene/lucene_query.htm">Query</a>: Query is an abstract class and contains various utility methods and is the parent of all types of queries that lucene uses during search process.</p>
</li>
<li>
<p><a href="http://www.tutorialspoint.com/lucene/lucene_termquery.htm">TermQuery</a>: TermQuery is the <strong>most commonly used query object</strong> and is the foundation of many complex queries that lucene can make use of.</p>
</li>
<li>
<p><a href="http://www.tutorialspoint.com/lucene/lucene_topdocs.htm">TopDocs</a> : TopDocs points to the top N search results which matches the search criteria. It is simple container of pointers to point to documents which are output of search result.</p>
</li>
</ol>
<h5>Create a Document</h5>
<ol>
<li>
<p>Create a method to <strong>get a lucene document</strong> from a text file.</p>
</li>
<li>
<p>Create various types of fields which are <code>key-value</code> pairs containing keys as <strong>names</strong> and <strong>values</strong> as contents to be indexed.</p>
</li>
<li>
<p>Set field to be analyzed or not. In our case, only contents is to be analyzed as it can contain data such as <code>a</code>, <code>am</code>, <code>are</code>, <code>an</code> etc. which are not required in search operations.</p>
</li>
</ol>
<p>Example Code from TutorialsPoint:</p>
<pre class="code literal-block"><span></span><span class="kd">private</span> <span class="n">Document</span> <span class="nf">getDocument</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">{</span>
    <span class="n">Document</span> <span class="n">document</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Document</span><span class="o">();</span>
    <span class="c1">//index file contents</span>
    <span class="n">Field</span> <span class="n">contentField</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Field</span><span class="o">(</span><span class="n">LuceneConstants</span><span class="o">.</span><span class="na">CONTENTS</span><span class="o">,</span> <span class="k">new</span> <span class="n">FileReader</span><span class="o">(</span><span class="n">file</span><span class="o">));</span>
    <span class="c1">//index file name</span>
    <span class="n">Field</span> <span class="n">fileNameField</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Field</span><span class="o">(</span><span class="n">LuceneConstants</span><span class="o">.</span><span class="na">FILE_NAME</span><span class="o">,</span> <span class="n">file</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">Field</span><span class="o">.</span><span class="na">Store</span><span class="o">.</span><span class="na">YES</span><span class="o">,</span> <span class="n">Field</span><span class="o">.</span><span class="na">Index</span><span class="o">.</span><span class="na">NOT_ANALYZED</span><span class="o">);</span>
    <span class="c1">//index file path</span>
    <span class="n">Field</span> <span class="n">filePathField</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Field</span><span class="o">(</span><span class="n">LuceneConstants</span><span class="o">.</span><span class="na">FILE_PATH</span><span class="o">,</span> <span class="n">file</span><span class="o">.</span><span class="na">getCanonicalPath</span><span class="o">(),</span> <span class="n">Field</span><span class="o">.</span><span class="na">Store</span><span class="o">.</span><span class="na">YES</span><span class="o">,</span><span class="n">Field</span><span class="o">.</span><span class="na">Index</span><span class="o">.</span><span class="na">NOT_ANALYZED</span><span class="o">);</span>
    <span class="n">document</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">contentField</span><span class="o">);</span>
    <span class="n">document</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">fileNameField</span><span class="o">);</span>
    <span class="n">document</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">filePathField</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">document</span><span class="o">;</span>
<span class="o">}</span>
</pre>


<h5>Create a IndexWriter</h5>
<ol>
<li>
<p>IndexWriter class acts as a core component which <strong>creates/updates</strong> indexes during indexing process.</p>
</li>
<li>
<p>Create object of <code>IndexWriter</code>.</p>
</li>
<li>
<p>Create a <code>lucene directory</code> which should point to location where indexes are to be stored.</p>
</li>
<li>
<p>Initialize the IndexWriter object created with the index directory, a standard analyzer having version information and other required/optional parameters.</p>
</li>
</ol>
<p>Example Code from TutorialsPoint:</p>
<pre class="code literal-block"><span></span><span class="kd">private</span> <span class="n">IndexWriter</span> <span class="n">writer</span><span class="o">;</span>
<span class="kd">public</span> <span class="nf">Indexer</span><span class="o">(</span><span class="n">String</span> <span class="n">indexDirectoryPath</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">{</span>
   <span class="c1">//this directory will contain the indexes</span>
   <span class="n">Directory</span> <span class="n">indexDirectory</span> <span class="o">=</span> <span class="n">FSDirectory</span><span class="o">.</span><span class="na">open</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">indexDirectoryPath</span><span class="o">));</span>
   <span class="c1">//create the indexer</span>
   <span class="n">writer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">IndexWriter</span><span class="o">(</span><span class="n">indexDirectory</span><span class="o">,</span> <span class="k">new</span> <span class="n">StandardAnalyzer</span><span class="o">(</span><span class="n">Version</span><span class="o">.</span><span class="na">LUCENE_36</span><span class="o">),</span><span class="kc">true</span><span class="o">,</span> <span class="n">IndexWriter</span><span class="o">.</span><span class="na">MaxFieldLength</span><span class="o">.</span><span class="na">UNLIMITED</span><span class="o">);</span>
<span class="o">}</span>
</pre>


<h5>Start Indexing Process</h5>
<pre class="code literal-block"><span></span><span class="kd">private</span> <span class="kt">void</span> <span class="nf">indexFile</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">{</span>
   <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Indexing "</span><span class="o">+</span><span class="n">file</span><span class="o">.</span><span class="na">getCanonicalPath</span><span class="o">());</span>
   <span class="n">Document</span> <span class="n">document</span> <span class="o">=</span> <span class="n">getDocument</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
   <span class="n">writer</span><span class="o">.</span><span class="na">addDocument</span><span class="o">(</span><span class="n">document</span><span class="o">);</span>
<span class="o">}</span>
</pre>


<h4>Basic Indexing Operations</h4>
<h5>Add Document Operation</h5>
<p>Add document is one of the core operation as part of indexing process.</p>
<ol>
<li>
<p><strong>Add a document to an index</strong>: Refer to <code>Create a Document</code> section above for process. After last step, add the newly created fields to the document object and return it to the caller method.</p>
</li>
<li>
<p><strong>Create a IndexWriter</strong>: Refer to <code>Create a IndexWriter</code> section above for process.</p>
</li>
<li>
<p><strong>Add document and start Indexing process</strong>: Two ways.</p>
</li>
</ol>
<blockquote>
<p>Way 1: <strong>addDocument(Document)</strong> - Adds the document using the default analyzer (specified when index writer is created.)</p>
<p>Way 2: <strong>addDocument(Document,Analyzer)</strong> - Adds the document using the provided analyzer.</p>
</blockquote>
<p>Refer "Start Indexing Process" section above for code reference.</p>
<h5>Update Document Operation</h5>
<p>Update document is another important operation as part of indexing process.</p>
<p>This operation is used when already indexed contents are updated and indexes become invalid. This operation is also known as <code>re-indexing</code>.</p>
<p>We update Document(s) containing Field(s) to <code>IndexWriter</code> where <code>IndexWriter</code> is used to update indexes.</p>
<ol>
<li>
<strong>Update a document to an index</strong>: Create a method to update a lucene document from an updated text file.</li>
</ol>
<blockquote>
<pre class="code literal-block"><span></span><span class="kd">private</span> <span class="kt">void</span> <span class="nf">updateDocument</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">{</span>
   <span class="n">Document</span> <span class="n">document</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Document</span><span class="o">();</span>
</pre>


</blockquote>
<pre class="code literal-block"><span></span>   //update indexes for file contents
   writer.updateDocument(new Term
      (LuceneConstants.CONTENTS,
      new FileReader(file)),document);
   writer.close();
}
</pre>


<ol>
<li>
<p><strong>Create a IndexWriter</strong>: Same as above.</p>
</li>
<li>
<p><strong>Update document and start reindexing process</strong>: Two Ways.</p>
</li>
</ol>
<blockquote>
<p>Way1: <strong>updateDocument(Term, Document)</strong>: <em>Delete</em> the document containing the term and <em>add</em> the document using the default analyzer (specified when index writer is created.)</p>
<p>Way2: <strong>updateDocument(Term, Document,Analyzer)</strong>: <em>Delete</em> the document containing the term and <em>add</em> the document using the provided analyzer.</p>
<pre class="code literal-block"><span></span><span class="kd">private</span> <span class="kt">void</span> <span class="nf">indexFile</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">{</span>
   <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Updating index for "</span><span class="o">+</span><span class="n">file</span><span class="o">.</span><span class="na">getCanonicalPath</span><span class="o">());</span>
   <span class="n">updateDocument</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
<span class="o">}</span>
</pre>


</blockquote>
<h5>Delete Document Operation</h5>
<p>Delete document is another important operation as part of indexing process.</p>
<p>This operation is used when already indexed contents are updated and indexes become invalid or indexes become very large in size then <em>in order to reduce the size and update the index</em>, delete operations are carried out.</p>
<p>We delete Document(s) containing Field(s) to <code>IndexWriter</code> where <code>IndexWriter</code> is used to update indexes.</p>
<ol>
<li>
<strong>Delete a document from an index</strong> : Create a method to delete a lucene document of an obsolete text file.</li>
</ol>
<blockquote>
<pre class="code literal-block"><span></span><span class="kd">private</span> <span class="kt">void</span> <span class="nf">deleteDocument</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">{</span>
   <span class="c1">//delete indexes for a file</span>
   <span class="n">writer</span><span class="o">.</span><span class="na">deleteDocument</span><span class="o">(</span><span class="k">new</span> <span class="n">Term</span><span class="o">(</span><span class="n">LuceneConstants</span><span class="o">.</span><span class="na">FILE_NAME</span><span class="o">,</span><span class="n">file</span><span class="o">.</span><span class="na">getName</span><span class="o">()));</span>
   <span class="n">writer</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>
   <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"index contains deleted files: "</span><span class="o">+</span><span class="n">writer</span><span class="o">.</span><span class="na">hasDeletions</span><span class="o">());</span>
   <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"index contains documents: "</span><span class="o">+</span><span class="n">writer</span><span class="o">.</span><span class="na">maxDoc</span><span class="o">());</span>
   <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"index contains deleted documents: "</span><span class="o">+</span><span class="n">writer</span><span class="o">.</span><span class="na">numDoc</span><span class="o">());</span>
<span class="o">}</span>
</pre>


</blockquote>
<ol>
<li>
<p><strong>Create a IndexWriter</strong>: Same as above</p>
</li>
<li>
<p><strong>Delete document and start reindexing process</strong>: Five ways.</p>
</li>
</ol>
<blockquote>
<p>Way1: <strong>deleteDocuments(Term)</strong>: Delete all the documents containing the term.</p>
<p>Way2: <strong>deleteDocuments(Term[])</strong>: Delete all the documents containing any of the terms in the array.</p>
<p>Way3: <strong>deleteDocuments(Query)</strong>: Delete all the documents matching the query.</p>
<p>Way4: <strong>deleteDocuments(Query[])</strong>: Delete all the documents matching the query in the array.</p>
<p>Way5: <strong>deleteAll</strong>: Delete all the documents.</p>
</blockquote>
<pre class="code literal-block"><span></span><span class="kd">private</span> <span class="kt">void</span> <span class="nf">indexFile</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">{</span>
   <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Deleting index for "</span><span class="o">+</span><span class="n">file</span><span class="o">.</span><span class="na">getCanonicalPath</span><span class="o">());</span>
   <span class="n">deleteDocument</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
<span class="o">}</span>
</pre>


<h5>Field Options</h5>
<p>Field is the most important and the foundation unit of indexing process.</p>
<p>It is the actual object containing the contents to be indexed. When we add a field, lucene provides numerous controls on the field using Field Options which states how much a field is to be searchable.</p>
<p>We add Document(s) containing Field(s) to <code>IndexWriter</code> where <code>IndexWriter</code> is used to update or create indexes.</p>
<h6>List of Field Options</h6>
<ul>
<li>
<p><code>Index.ANALYZED</code>: First analyze then do indexing. Used for <em>normal text indexing</em>. Analyzer will break the field's value into stream of tokens and each token is searcable sepearately.</p>
</li>
<li>
<p><code>Index.NOT_ANALYZED</code>: Don't analyze but do indexing. Used for <em>complete text indexing</em> *for example person's names, URL etc.</p>
</li>
<li>
<p><code>Index.ANALYZED_NO_NORMS</code>: Varient of <code>Index.ANALYZED</code>. Analyzer will <em>break the field's value into stream of tokens</em> and each token is searcable sepearately but <code>NORMs</code> are not stored in the indexes. <code>NORMS</code> are used to boost searching but are sometime memory consuming.</p>
</li>
<li>
<p><code>Index.Index.NOT_ANALYZED_NO_NORMS</code>:  Varient of <code>Index.NOT_ANALYZED</code>. Indexing is done but NORMS are not stored in the indexes.</p>
</li>
<li>
<p><code>Index.NO</code>: Field value is not searchable.</p>
</li>
</ul>
<h6>Use of Field Options</h6>
<ol>
<li>
<p>Same steps as <code>Create a Document</code> section</p>
</li>
<li>
<p>Add the newly created fields to the document object and return it to the caller method.</p>
</li>
</ol>
<h4>Search Operations</h4>
<p>Searching process is one of the core functionality provided by Lucene.</p>
<p><code>IndexSearcher</code> is the most important and core component of the searching process.</p>
<p>Process Chart for TutorialsPoint:</p>
<p>images/articles/2015/data/searching_process.jpg </p>
<p>We first create <code>Directory</code>(s) containing <code>index</code>es and then pass it to <code>IndexSearcher</code> which opens the <code>Directory</code> using <code>IndexReader</code>.</p>
<p>Then we create a <code>Query</code> with a <code>Term</code> and make a search using <code>IndexSearcher</code> by passing the <code>Query</code> to the searcher.</p>
<p><code>IndexSearcher</code> returns a <code>TopDocs</code> object which contains the search details along with document <code>ID</code>(s) of the Document which is the result of the search operation.</p>
<h5>Create a QueryParser</h5>
<ol>
<li>
<p>QueryParser class parses the user entered input into <strong>lucene understandable format query</strong>.</p>
</li>
<li>
<p>Create object of <code>QueryParser</code>.</p>
</li>
<li>
<p>Initialize the QueryParser object created with a standard analyzer having version information and index name on which this query is to run.</p>
</li>
</ol>
<blockquote>
<pre class="code literal-block"><span></span><span class="n">QueryParser</span> <span class="n">queryParser</span><span class="o">;</span>
<span class="kd">public</span> <span class="nf">Searcher</span><span class="o">(</span><span class="n">String</span> <span class="n">indexDirectoryPath</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">{</span>
   <span class="n">queryParser</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QueryParser</span><span class="o">(</span><span class="n">Version</span><span class="o">.</span><span class="na">LUCENE_36</span><span class="o">,</span>
      <span class="n">LuceneConstants</span><span class="o">.</span><span class="na">CONTENTS</span><span class="o">,</span>
         <span class="k">new</span> <span class="n">StandardAnalyzer</span><span class="o">(</span><span class="n">Version</span><span class="o">.</span><span class="na">LUCENE_36</span><span class="o">));</span>
<span class="o">}</span>
</pre>


</blockquote>
<h5>Create a IndexSearch</h5>
<ol>
<li>
<p><code>IndexSearcher</code> class acts as a core component which searcher indexes created during indexing process.</p>
</li>
<li>
<p>Create object of <code>IndexSearcher</code>.</p>
</li>
<li>
<p>Create a <strong>lucene directory</strong> which should point to location where indexes are to be stored.</p>
</li>
<li>
<p>Initialize the <code>IndexSearcher</code> object created with the index directory</p>
</li>
</ol>
<blockquote>
<pre class="code literal-block"><span></span><span class="n">IndexSearcher</span> <span class="n">indexSearcher</span><span class="o">;</span>
<span class="kd">public</span> <span class="nf">Searcher</span><span class="o">(</span><span class="n">String</span> <span class="n">indexDirectoryPath</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">{</span>
   <span class="n">Directory</span> <span class="n">indexDirectory</span> <span class="o">=</span>
      <span class="n">FSDirectory</span><span class="o">.</span><span class="na">open</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">indexDirectoryPath</span><span class="o">));</span>
   <span class="n">indexSearcher</span> <span class="o">=</span> <span class="k">new</span> <span class="n">IndexSearcher</span><span class="o">(</span><span class="n">indexDirectory</span><span class="o">);</span>
<span class="o">}</span>
</pre>


</blockquote>
<h5>Make search</h5>
<ul>
<li>
<p>To start search, create a <code>Query</code> object by parsing search expression through QueryParser.</p>
</li>
<li>
<p>Make search by calling `IndexSearcher.search()`` method.</p>
</li>
</ul>
<blockquote>
<pre class="code literal-block"><span></span><span class="n">Query</span> <span class="n">query</span><span class="o">;</span>
<span class="kd">public</span> <span class="n">TopDocs</span> <span class="nf">search</span><span class="o">(</span> <span class="n">String</span> <span class="n">searchQuery</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">,</span><span class="n">ParseException</span><span class="o">{</span>
   <span class="n">query</span> <span class="o">=</span> <span class="n">queryParser</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">searchQuery</span><span class="o">);</span>
   <span class="k">return</span> <span class="n">indexSearcher</span><span class="o">.</span><span class="na">search</span><span class="o">(</span><span class="n">query</span><span class="o">,</span> <span class="n">LuceneConstants</span><span class="o">.</span><span class="na">MAX_SEARCH</span><span class="o">);</span>
<span class="o">}</span>
</pre>


</blockquote>
<h5>Get the document</h5>
<pre class="code literal-block"><span></span><span class="kd">public</span> <span class="n">Document</span> <span class="nf">getDocument</span><span class="o">(</span><span class="n">ScoreDoc</span> <span class="n">scoreDoc</span><span class="o">)</span>
   <span class="kd">throws</span> <span class="n">CorruptIndexException</span><span class="o">,</span> <span class="n">IOException</span><span class="o">{</span>
   <span class="k">return</span> <span class="n">indexSearcher</span><span class="o">.</span><span class="na">doc</span><span class="o">(</span><span class="n">scoreDoc</span><span class="o">.</span><span class="na">doc</span><span class="o">);</span>
<span class="o">}</span>
</pre>


<h5>Close IndexSearcher</h5>
<pre class="code literal-block"><span></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">close</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">{</span>
   <span class="n">indexSearcher</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="o">}</span>
</pre>


<h4>Query Programming</h4>
<p><a href="http://www.tutorialspoint.com/lucene/lucene_termquery1.htm">TermQuery</a>: TermQuery is the most commonly used query object and is the foundation of many complex queries that lucene can make use of. TermQuery is normally used to retrieve documents based on the key which is case sensitive.</p>
<p><a href="http://www.tutorialspoint.com/lucene/lucene_termrangequery.htm">TermRangeQuery</a>: TermRangeQuery is the used when a range of textual terms are to be searched.</p>
<p><a href="http://www.tutorialspoint.com/lucene/lucene_prefixquery.htm">PrefixQuery</a>: PrefixQuery is used to match documents whose <em>index starts with a specified string</em>.</p>
<p><a href="http://www.tutorialspoint.com/lucene/lucene_booleanquery.htm">BooleanQuery</a>: BooleanQuery is used to search documents which are result of multiple queries using <code>AND</code>, <code>OR</code> or <code>NOT</code> operators.</p>
<p><a href="http://www.tutorialspoint.com/lucene/lucene_phrasequery.htm">PhraseQuery</a>: Phrase query is used to search documents which contain a particular sequence of terms.</p>
<p>WhildCardQuery: WildcardQuery is used to search documents using wildcards like <code>*</code> for any character sequence,<code>?</code> matching a single character.</p>
<p><a href="http://www.tutorialspoint.com/lucene/lucene_fuzzyquery.htm">FuzzyQuery</a>: FuzzyQuery is used to search documents using <strong>fuzzy implementation</strong> that is an approximate search based on edit distance algorithm.</p>
<p><a href="http://www.tutorialspoint.com/lucene/lucene_matchalldocsquery.htm">MatchAllDocsQuery</a>: MatchAllDocsQuery as name suggests <em>matches all the documents</em>.</p>
<h4>Analysis Objects</h4>
<p><a href="http://www.tutorialspoint.com/lucene/lucene_token.htm">Token</a>: Token represents text or word in a document with relevant details like its <strong>metadata</strong> (position, start offset, end offset, token type and its position increment).</p>
<p><a href="http://www.tutorialspoint.com/lucene/lucene_tokenstream.htm">TokenStream</a>: TokenStream is an output of analysis process and it comprises of series of tokens. It is an abstract class.</p>
<p><a href="http://www.tutorialspoint.com/lucene/lucene_analyzer_class.htm">Analyzer</a>: Analyzer class is responsible to analyze a document and get the tokens/words from the text which is to be indexed. Without analysis done, IndexWriter can not create index.</p>
<p><a href="http://www.tutorialspoint.com/lucene/lucene_whitespaceanalyzer.htm">WhitespaceAnalyzer</a>: This analyzer spilts the text in a document based on <strong>whitespace</strong>.</p>
<p><a href="http://www.tutorialspoint.com/lucene/lucene_simpleanalyzer.htm">SimpleAnalyzer</a>: This analyzer spilts the text in a document based on <strong>non-letter characters</strong> and then lowercase them.</p>
<p><a href="http://www.tutorialspoint.com/lucene/lucene_stopanalyzer.htm">StopAnalyzer</a>: This analyzer works similar to SimpleAnalyzer and remove the common words like <code>a</code>,<code>an</code>,<code>the</code> etc.</p>
<p><a href="http://www.tutorialspoint.com/lucene/lucene_standardanalyzer.htm">StandardAnalyzer</a>: This is the most sofisticated analyzer and is capable of handling <code>names</code>, <code>email address</code> etc. It lowercases each token and removes common words and punctuation if any.</p>
<h4>Sorting</h4>
<h5>Sorting By Relevance</h5>
<p>This is <strong>default</strong> sorting mode used by lucene.</p>
<p>Lucene provides results by the most relevant hit at the top.</p>
<p>Example Code from TutorialsPoint:</p>
<pre class="code literal-block"><span></span><span class="kd">private</span> <span class="kt">void</span> <span class="nf">sortUsingRelevance</span><span class="o">(</span><span class="n">String</span> <span class="n">searchQuery</span><span class="o">)</span>
 <span class="kd">throws</span> <span class="n">IOException</span><span class="o">,</span> <span class="n">ParseException</span><span class="o">{</span>
   <span class="n">searcher</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Searcher</span><span class="o">(</span><span class="n">indexDir</span><span class="o">);</span>
   <span class="kt">long</span> <span class="n">startTime</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
   <span class="c1">//create a term to search file name</span>
   <span class="n">Term</span> <span class="n">term</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Term</span><span class="o">(</span><span class="n">LuceneConstants</span><span class="o">.</span><span class="na">FILE_NAME</span><span class="o">,</span> <span class="n">searchQuery</span><span class="o">);</span>
   <span class="c1">//create the term query object</span>
   <span class="n">Query</span> <span class="n">query</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FuzzyQuery</span><span class="o">(</span><span class="n">term</span><span class="o">);</span>
   <span class="n">searcher</span><span class="o">.</span><span class="na">setDefaultFieldSortScoring</span><span class="o">(</span><span class="kc">true</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
   <span class="c1">//do the search</span>
   <span class="n">TopDocs</span> <span class="n">hits</span> <span class="o">=</span> <span class="n">searcher</span><span class="o">.</span><span class="na">search</span><span class="o">(</span><span class="n">query</span><span class="o">,</span><span class="n">Sort</span><span class="o">.</span><span class="na">RELEVANCE</span><span class="o">);</span>
   <span class="kt">long</span> <span class="n">endTime</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
   <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">hits</span><span class="o">.</span><span class="na">totalHits</span> <span class="o">+</span>
      <span class="s">" documents found. Time :"</span> <span class="o">+</span> <span class="o">(</span><span class="n">endTime</span> <span class="o">-</span> <span class="n">startTime</span><span class="o">)</span> <span class="o">+</span> <span class="s">"ms"</span><span class="o">);</span>
   <span class="k">for</span><span class="o">(</span><span class="n">ScoreDoc</span> <span class="n">scoreDoc</span> <span class="o">:</span> <span class="n">hits</span><span class="o">.</span><span class="na">scoreDocs</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">Document</span> <span class="n">doc</span> <span class="o">=</span> <span class="n">searcher</span><span class="o">.</span><span class="na">getDocument</span><span class="o">(</span><span class="n">scoreDoc</span><span class="o">);</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"Score: "</span><span class="o">+</span> <span class="n">scoreDoc</span><span class="o">.</span><span class="na">score</span> <span class="o">+</span> <span class="s">" "</span><span class="o">);</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"File: "</span><span class="o">+</span> <span class="n">doc</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">LuceneConstants</span><span class="o">.</span><span class="na">FILE_PATH</span><span class="o">));</span>
   <span class="o">}</span>
   <span class="n">searcher</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="o">}</span>
</pre>


<h5>Sorting By IndexOrder</h5>
<p>This is sorting mode used by lucene in which first document indexed is shown first in the search results.</p>
<pre class="code literal-block"><span></span><span class="kd">private</span> <span class="kt">void</span> <span class="nf">sortUsingIndex</span><span class="o">(</span><span class="n">String</span> <span class="n">searchQuery</span><span class="o">)</span>
 <span class="kd">throws</span> <span class="n">IOException</span><span class="o">,</span> <span class="n">ParseException</span><span class="o">{</span>
   <span class="n">searcher</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Searcher</span><span class="o">(</span><span class="n">indexDir</span><span class="o">);</span>
   <span class="kt">long</span> <span class="n">startTime</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
   <span class="c1">//create a term to search file name</span>
   <span class="n">Term</span> <span class="n">term</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Term</span><span class="o">(</span><span class="n">LuceneConstants</span><span class="o">.</span><span class="na">FILE_NAME</span><span class="o">,</span> <span class="n">searchQuery</span><span class="o">);</span>
   <span class="c1">//create the term query object</span>
   <span class="n">Query</span> <span class="n">query</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FuzzyQuery</span><span class="o">(</span><span class="n">term</span><span class="o">);</span>
   <span class="n">searcher</span><span class="o">.</span><span class="na">setDefaultFieldSortScoring</span><span class="o">(</span><span class="kc">true</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
   <span class="c1">//do the search</span>
   <span class="n">TopDocs</span> <span class="n">hits</span> <span class="o">=</span> <span class="n">searcher</span><span class="o">.</span><span class="na">search</span><span class="o">(</span><span class="n">query</span><span class="o">,</span><span class="n">Sort</span><span class="o">.</span><span class="na">INDEXORDER</span><span class="o">);</span>
   <span class="kt">long</span> <span class="n">endTime</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
   <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">hits</span><span class="o">.</span><span class="na">totalHits</span> <span class="o">+</span>
      <span class="s">" documents found. Time :"</span> <span class="o">+</span> <span class="o">(</span><span class="n">endTime</span> <span class="o">-</span> <span class="n">startTime</span><span class="o">)</span> <span class="o">+</span> <span class="s">"ms"</span><span class="o">);</span>
   <span class="k">for</span><span class="o">(</span><span class="n">ScoreDoc</span> <span class="n">scoreDoc</span> <span class="o">:</span> <span class="n">hits</span><span class="o">.</span><span class="na">scoreDocs</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">Document</span> <span class="n">doc</span> <span class="o">=</span> <span class="n">searcher</span><span class="o">.</span><span class="na">getDocument</span><span class="o">(</span><span class="n">scoreDoc</span><span class="o">);</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"Score: "</span><span class="o">+</span> <span class="n">scoreDoc</span><span class="o">.</span><span class="na">score</span> <span class="o">+</span> <span class="s">" "</span><span class="o">);</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"File: "</span><span class="o">+</span> <span class="n">doc</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">LuceneConstants</span><span class="o">.</span><span class="na">FILE_PATH</span><span class="o">));</span>
   <span class="o">}</span>
   <span class="n">searcher</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="o">}</span>
</pre>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/2015/JavaScript/javascript-object-and-json.html">JavaScript Object and JSON</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-07-10T00:00:00-04:00">2015-07-10 00:00</time>
</div>
                <div class="stats">
                                <a href="posts/2015/JavaScript/javascript-object-and-json.html#disqus_thread" data-disqus-identifier="cache/posts/2015/JavaScript/javascript-object-and-json.html">Comments</a>


                </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/javascript.html" rel="tag">JavaScript</a></li>
           <li><a class="tag p-category" href="categories/jquery.html" rel="tag">jQuery</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p>Full information about following notes is on <a href="http://www.w3schools.com/js/js_objects.asp">www3school</a>.</p>
<h3>JavaScript Object</h3>
<p>A JavaScript is wrapped by <code>{}</code> or created by <code>new</code>. Components inside are like <em>key:value</em> pairs.</p>
<blockquote>
<p>i.e. JavaScript objects are containers for named values.</p>
</blockquote>
<p>An example of JavaScript Object:</p>
<pre class="code literal-block"><span></span><span class="kd">var</span> <span class="nx">car</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">type</span><span class="o">:</span> <span class="s2">"Fiat"</span><span class="p">,</span>
            <span class="nx">model</span><span class="o">:</span> <span class="mi">500</span><span class="p">,</span>
            <span class="nx">color</span><span class="o">:</span> <span class="s2">"silver"</span><span class="p">,</span>
            <span class="nx">buycar</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">money</span><span class="p">){</span>
                <span class="k">return</span> <span class="nx">money</span> <span class="o">*</span> <span class="mi">115</span><span class="o">%</span><span class="p">;</span>
                <span class="p">}</span>
           <span class="p">};</span>
</pre>


<p>Each JavaScript has <strong>properties</strong> and <strong>methods</strong>.</p>
<h4>Properties</h4>
<p>In the example above, <code>type</code>, <code>model</code> and <code>color</code> are properties. You can access properties by using <code>object_name.property_name</code> to get value of certain property.</p>
<pre class="code literal-block"><span></span><span class="nx">car</span><span class="p">.</span><span class="nx">type</span> <span class="c1">//'Fiat'</span>
<span class="c1">//Or</span>
<span class="nx">car</span><span class="p">[</span><span class="nx">type</span><span class="p">]</span><span class="c1">//'Fiat'</span>
</pre>


<p>A JavaScript object has two build-in properties: <code>length</code> and <code>prototype</code></p>
<h4>Methods</h4>
<p>You can create methods in a JavaScript object. In code above, <code>butcar</code> is a method. A method can be defined by a function.</p>
<blockquote>
<p>A method may or may not have parameters
A method may or may not have return values</p>
</blockquote>
<pre class="code literal-block"><span></span><span class="nx">car</span><span class="p">.</span><span class="nx">buycar</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="c1">//115</span>
</pre>


<p>A JavaScript object has a list of build-in method. You can view them <a href="http://www.tutorialspoint.com/javascript/javascript_builtin_functions.htm">here</a>.</p>
<h4>Tips</h4>
<ol>
<li>
<p>To change JSON to JavaScript object, you can use <code>JSON.parse(json_object)</code> or jQuery method: <code>$.parseJSON(json_object)</code></p>
</li>
<li>
<p><code>String</code>, <code>Number</code> and <code>Boolean</code> should not be declared as objects, which means code like <code>var x = new String()</code> is not recommended.</p>
</li>
</ol>
<h3>JSON</h3>
<p><strong>JSON</strong> means <strong>JavaScript Object Notation</strong>. It has following rules:</p>
<ul>
<li>
<p>Data is in name/value pairs</p>
</li>
<li>
<p>Data is separated by commas <code>,</code></p>
</li>
<li>
<p>Curly braces <code>{}</code> hold <em>objects</em></p>
</li>
<li>
<p>Square brackets <code>[]</code> hold <em>arrays</em></p>
</li>
</ul>
<p>To operate JSON, you can change a JSON to a JavaScript object, then use properties and methods of that JavaScript object.</p>
<p>Example of JSON:</p>
<pre class="code literal-block"><span></span><span class="kd">var</span> <span class="nx">text</span> <span class="o">=</span>  <span class="s1">'{ "employees" : ['</span> <span class="o">+</span>
            <span class="s1">'{ "firstName":"John" , "lastName":"Doe" },'</span> <span class="o">+</span>
            <span class="s1">'{ "firstName":"Anna" , "lastName":"Smith" },'</span> <span class="o">+</span>
            <span class="s1">'{ "firstName":"Peter" , "lastName":"Jones" } ]}'</span><span class="p">;</span>
<span class="cm">/*</span>
<span class="cm">* 1. This JSON has a large JavaScript object, which has a property: 'employees'</span>
<span class="cm">* 2. The value of the 'employees' property is an JavaScript objects array.</span>
<span class="cm">* 3. The array has four JavaScript objects, each object has two properties: 'firstName' and 'lastName', with property values.</span>
<span class="cm">*/</span>
</pre>


<h4>Tips</h4>
<ol>
<li>To change a JavaScript objec to JSON, using <code>JSON.stringify(js_object)</code>
</li>
</ol>
</div>
            </div>
        </div>
            <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-7.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-5.html" rel="next">Older posts</a>
            </li>
        </ul></nav><script>var disqus_shortname="pengyinsnotes";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><footer id="footer"><p>Contents © 2016         <a href="mailto:shanpy901115@gmail.com">Pengyin Shan</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>
</div>
    </section><script src="assets/js/all-nocdn.js" type="text/javascript"></script><script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
